{"version":8,"type":"context-options","origin":"library","browserName":"chromium","options":{"noDefaultViewport":false,"viewport":{"width":390,"height":664},"screen":{"width":390,"height":844},"ignoreHTTPSErrors":true,"javaScriptEnabled":true,"bypassCSP":false,"userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1","locale":"en-US","permissions":["camera","microphone"],"extraHTTPHeaders":[{"name":"Accept-Language","value":"zh-TW,zh;q=0.9,en;q=0.8"}],"offline":false,"deviceScaleFactor":3,"isMobile":true,"hasTouch":true,"colorScheme":"light","acceptDownloads":"accept","baseURL":"http://localhost:3000","serviceWorkers":"allow","selectorEngines":[],"testIdAttributeName":"data-testid"},"platform":"win32","wallTime":1758852698844,"monotonicTime":26727.853,"sdkLanguage":"javascript","testIdAttributeName":"data-testid","contextId":"browser-context@f8b0f823dc8b576727d3ca5f45a9165d","title":"e2e\\mobile-fullscreen-test.spec.js:5 › 手機全螢幕功能測試 › iPhone Safari 全螢幕測試"}
{"type":"before","callId":"call@6","startTime":26736.6,"class":"BrowserContext","method":"newPage","params":{},"stepId":"pw:api@6","beforeSnapshot":"before@call@6"}
{"type":"event","time":26882.946,"class":"BrowserContext","method":"page","params":{"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}}
{"type":"after","callId":"call@6","endTime":26883.229,"result":{"page":"<Page>"},"afterSnapshot":"after@call@6"}
{"type":"before","callId":"call@8","startTime":26892.353,"class":"Page","method":"setViewportSize","params":{"viewportSize":{"width":390,"height":844}},"stepId":"pw:api@7","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@8"}
{"type":"frame-snapshot","snapshot":{"callId":"call@8","snapshotName":"before@call@8","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"about:blank","html":["HTML",{},["HEAD",{},["BASE",{"href":"about:blank"}]],["BODY"]],"viewport":{"width":980,"height":1669},"timestamp":26898.428,"wallTime":1758852699015,"collectionTime":1.5,"resourceOverrides":[],"isMainFrame":true}}
{"type":"after","callId":"call@8","endTime":26903.662,"afterSnapshot":"after@call@8"}
{"type":"frame-snapshot","snapshot":{"callId":"call@8","snapshotName":"after@call@8","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"about:blank","html":[[1,3]],"viewport":{"width":980,"height":2121},"timestamp":26906.382,"wallTime":1758852699023,"collectionTime":0.19999998807907104,"resourceOverrides":[],"isMainFrame":true}}
{"type":"before","callId":"call@10","startTime":26910.098,"class":"Frame","method":"goto","params":{"url":"http://localhost:3000/mobile-postmessage-test.html","timeout":30000,"waitUntil":"load"},"stepId":"pw:api@8","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@10"}
{"type":"frame-snapshot","snapshot":{"callId":"call@10","snapshotName":"before@call@10","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"about:blank","html":[[2,3]],"viewport":{"width":980,"height":2121},"timestamp":26911.753,"wallTime":1758852699028,"collectionTime":0.30000001192092896,"resourceOverrides":[],"isMainFrame":true}}
{"type":"log","callId":"call@10","time":26916.283,"message":"navigating to \"http://localhost:3000/mobile-postmessage-test.html\", waiting until \"load\""}
{"type":"console","messageType":"log","text":"📱 手機 PostMessage 測試工具載入","args":[{"preview":"📱 手機 PostMessage 測試工具載入","value":"📱 手機 PostMessage 測試工具載入"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":172,"columnNumber":16},"time":26938.479,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 手機 PostMessage 測試工具初始化","args":[{"preview":"🚀 手機 PostMessage 測試工具初始化","value":"🚀 手機 PostMessage 測試工具初始化"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":27060.869,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔍 環境檢測完成: {\n  \"userAgent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\n  \"isMobile\": true,\n  \"isSafari\": true,\n  \"isIOS\": true,\n  \"isAndroid\": false,\n  \"screenWidth\": 390,\n  \"screenHeight\": 844,\n  \"windowWidth\": 390,\n  \"windowHeight\": 844,\n  \"hasPostMessage\": true,\n  \"timestamp\": \"2025-09-26T02:11:39.178Z\"\n}","args":[{"preview":"🔍 環境檢測完成: {\n  \"userAgent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\n  \"isMobile\": true,\n  \"isSafari\": true,\n  \"isIOS\": true,\n  \"isAndroid\": false,\n  \"screenWidth\": 390,\n  \"screenHeight\": 844,\n  \"windowWidth\": 390,\n  \"windowHeight\": 844,\n  \"hasPostMessage\": true,\n  \"timestamp\": \"2025-09-26T02:11:39.178Z\"\n}","value":"🔍 環境檢測完成: {\n  \"userAgent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\n  \"isMobile\": true,\n  \"isSafari\": true,\n  \"isIOS\": true,\n  \"isAndroid\": false,\n  \"screenWidth\": 390,\n  \"screenHeight\": 844,\n  \"windowWidth\": 390,\n  \"windowHeight\": 844,\n  \"hasPostMessage\": true,\n  \"timestamp\": \"2025-09-26T02:11:39.178Z\"\n}"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":27098.505,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📡 設置父頁面 PostMessage 監聽器","args":[{"preview":"📡 設置父頁面 PostMessage 監聽器","value":"📡 設置父頁面 PostMessage 監聽器"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":27101.065,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 父頁面 PostMessage 監聽器已設置","args":[{"preview":"✅ 父頁面 PostMessage 監聽器已設置","value":"✅ 父頁面 PostMessage 監聽器已設置"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":27102.318,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 測試工具初始化完成","args":[{"preview":"✅ 測試工具初始化完成","value":"✅ 測試工具初始化完成"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":27102.884,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🎮 TouchControls 初始化開始...","args":[{"preview":"🎮 TouchControls 初始化開始...","value":"🎮 TouchControls 初始化開始..."}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":180,"columnNumber":40},"time":27122.753,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ TouchControls 事件監聽器已設置","args":[{"preview":"✅ TouchControls 事件監聽器已設置","value":"✅ TouchControls 事件監聽器已設置"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":233,"columnNumber":40},"time":27122.937,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🎮 觸摸控制系統已初始化","args":[{"preview":"🎮 觸摸控制系統已初始化","value":"🎮 觸摸控制系統已初始化"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":386,"columnNumber":16},"time":27123.355,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"💡 使用 testTouchControls() 進行測試","args":[{"preview":"💡 使用 testTouchControls() 進行測試","value":"💡 使用 testTouchControls() 進行測試"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":387,"columnNumber":16},"time":27123.542,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🎯 載入座標同步解決方案","args":[{"preview":"🎯 載入座標同步解決方案","value":"🎯 載入座標同步解決方案"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":523,"columnNumber":20},"time":27123.7,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔍 載入 PostMessage 通信診斷工具","args":[{"preview":"🔍 載入 PostMessage 通信診斷工具","value":"🔍 載入 PostMessage 通信診斷工具"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":739,"columnNumber":20},"time":27123.994,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🍎 載入 Safari 全螢幕支援","args":[{"preview":"🍎 載入 Safari 全螢幕支援","value":"🍎 載入 Safari 全螢幕支援"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1086,"columnNumber":20},"time":27124.094,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🎯 載入雙重全螢幕同步功能","args":[{"preview":"🎯 載入雙重全螢幕同步功能","value":"🎯 載入雙重全螢幕同步功能"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1417,"columnNumber":20},"time":27124.196,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 載入 Safari 整合順序修復","args":[{"preview":"🔧 載入 Safari 整合順序修復","value":"🔧 載入 Safari 整合順序修復"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1563,"columnNumber":20},"time":27124.289,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 載入 PostMessage 通信修復","args":[{"preview":"🔧 載入 PostMessage 通信修復","value":"🔧 載入 PostMessage 通信修復"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1804,"columnNumber":20},"time":27124.383,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 載入強制遊戲全螢幕按鈕修復","args":[{"preview":"🔧 載入強制遊戲全螢幕按鈕修復","value":"🔧 載入強制遊戲全螢幕按鈕修復"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2136,"columnNumber":20},"time":27124.477,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 強制遊戲全螢幕按鈕修復已載入","args":[{"preview":"✅ 強制遊戲全螢幕按鈕修復已載入","value":"✅ 強制遊戲全螢幕按鈕修復已載入"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2341,"columnNumber":20},"time":27124.561,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699374.jpeg","width":390,"height":844,"timestamp":27258.107,"frameSwapWallTime":1758852699371.1182}
{"type":"console","messageType":"log","text":"%c %c %c %c %c Phaser v3.80.1 (WebGL | Web Audio) %c https://phaser.io background: #ff0000 background: #ffff00 background: #00ff00 background: #00ffff color: #ffffff; background: #000000 background: transparent","args":[{"preview":"%c %c %c %c %c Phaser v3.80.1 (WebGL | Web Audio) %c https://phaser.io","value":"%c %c %c %c %c Phaser v3.80.1 (WebGL | Web Audio) %c https://phaser.io"},{"preview":"background: #ff0000","value":"background: #ff0000"},{"preview":"background: #ffff00","value":"background: #ffff00"},{"preview":"background: #00ff00","value":"background: #00ff00"},{"preview":"background: #00ffff","value":"background: #00ffff"},{"preview":"color: #ffffff; background: #000000","value":"color: #ffffff; background: #000000"},{"preview":"background: transparent","value":"background: transparent"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/assets/phaser-CmFXOKba.js","lineNumber":0,"columnNumber":74353},"time":27404.093,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🎮 添加啟動畫面點擊和觸摸支援","args":[{"preview":"🎮 添加啟動畫面點擊和觸摸支援","value":"🎮 添加啟動畫面點擊和觸摸支援"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":431,"columnNumber":20},"time":27410.775,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 開始實現座標同步","args":[{"preview":"🔧 開始實現座標同步","value":"🔧 開始實現座標同步"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":543,"columnNumber":24},"time":27410.967,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 座標同步解決方案實現完成","args":[{"preview":"✅ 座標同步解決方案實現完成","value":"✅ 座標同步解決方案實現完成"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":672,"columnNumber":24},"time":27411.104,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 初始化 PostMessage 診斷工具","args":[{"preview":"🚀 初始化 PostMessage 診斷工具","value":"🚀 初始化 PostMessage 診斷工具"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1066,"columnNumber":24},"time":27411.249,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 初始化 PostMessage 診斷工具","args":[{"preview":"🚀 初始化 PostMessage 診斷工具","value":"🚀 初始化 PostMessage 診斷工具"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":754,"columnNumber":28},"time":27411.603,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔍 診斷環境設置","args":[{"preview":"🔍 診斷環境設置","value":"🔍 診斷環境設置"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":762,"columnNumber":28},"time":27411.764,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔍 環境診斷結果: {timestamp: 2025-09-26T02:11:39.527Z, userAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, isInIframe: true, canAccessParent: true, isSafari: true}","args":[{"preview":"🔍 環境診斷結果:","value":"🔍 環境診斷結果:"},{"preview":"{timestamp: 2025-09-26T02:11:39.527Z, userAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, isInIframe: true, canAccessParent: true, isSafari: true}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":779,"columnNumber":28},"time":27412.035,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"⚠️ 診斷警告: {code: IOS_SAFARI_DETECTED, message: iOS Safari 檢測到，可能有特殊限制, timestamp: 2025-09-26T02:11:39.527Z, type: WARNING}","args":[{"preview":"⚠️ 診斷警告:","value":"⚠️ 診斷警告:"},{"preview":"{code: IOS_SAFARI_DETECTED, message: iOS Safari 檢測到，可能有特殊限制, timestamp: 2025-09-26T02:11:39.527Z, type: WARNING}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":962,"columnNumber":28},"time":27412.254,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📡 設置通信測試","args":[{"preview":"📡 設置通信測試","value":"📡 設置通信測試"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":825,"columnNumber":28},"time":27412.412,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🧪 開始通信測試","args":[{"preview":"🧪 開始通信測試","value":"🧪 開始通信測試"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":864,"columnNumber":28},"time":27412.581,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📤 測試消息已發送: {type: DIAGNOSTIC_REQUEST, action: COMMUNICATION_TEST, timestamp: 2025-09-26T02:11:39.528Z, testId: nfgqwkjcy}","args":[{"preview":"📤 測試消息已發送:","value":"📤 測試消息已發送:"},{"preview":"{type: DIAGNOSTIC_REQUEST, action: COMMUNICATION_TEST, timestamp: 2025-09-26T02:11:39.528Z, testId: nfgqwkjcy}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":883,"columnNumber":32},"time":27413.213,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ PostMessage 診斷函數已添加到全局","args":[{"preview":"✅ PostMessage 診斷函數已添加到全局","value":"✅ PostMessage 診斷函數已添加到全局"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1006,"columnNumber":28},"time":27413.399,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 初始化 Safari 全螢幕支援","args":[{"preview":"🚀 初始化 Safari 全螢幕支援","value":"🚀 初始化 Safari 全螢幕支援"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1374,"columnNumber":24},"time":27413.544,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 創建跨瀏覽器全螢幕 API","args":[{"preview":"🔧 創建跨瀏覽器全螢幕 API","value":"🔧 創建跨瀏覽器全螢幕 API"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1090,"columnNumber":24},"time":27413.692,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔍 瀏覽器檢測: {isIOS: true, isSafari: true, isWebKit: true, userAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1}","args":[{"preview":"🔍 瀏覽器檢測:","value":"🔍 瀏覽器檢測:"},{"preview":"{isIOS: true, isSafari: true, isWebKit: true, userAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1097,"columnNumber":24},"time":27413.92,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 跨瀏覽器全螢幕 API 已創建","args":[{"preview":"✅ 跨瀏覽器全螢幕 API 已創建","value":"✅ 跨瀏覽器全螢幕 API 已創建"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1222,"columnNumber":24},"time":27414.068,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📱 添加 iOS Safari 全螢幕模擬樣式","args":[{"preview":"📱 添加 iOS Safari 全螢幕模擬樣式","value":"📱 添加 iOS Safari 全螢幕模擬樣式"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1227,"columnNumber":24},"time":27414.217,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ iOS Safari 全螢幕模擬樣式已添加","args":[{"preview":"✅ iOS Safari 全螢幕模擬樣式已添加","value":"✅ iOS Safari 全螢幕模擬樣式已添加"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1270,"columnNumber":28},"time":27414.587,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 增強 toggleFullscreen 方法以支援 Safari","args":[{"preview":"🔧 增強 toggleFullscreen 方法以支援 Safari","value":"🔧 增強 toggleFullscreen 方法以支援 Safari"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1276,"columnNumber":24},"time":27414.73,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ Safari 全螢幕支援初始化完成","args":[{"preview":"✅ Safari 全螢幕支援初始化完成","value":"✅ Safari 全螢幕支援初始化完成"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1385,"columnNumber":24},"time":27414.863,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 開始增強 TouchControls 的 Safari 支援","args":[{"preview":"🔧 開始增強 TouchControls 的 Safari 支援","value":"🔧 開始增強 TouchControls 的 Safari 支援"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1293,"columnNumber":28},"time":27414.98,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ TouchControls Safari 支援增強完成","args":[{"preview":"✅ TouchControls Safari 支援增強完成","value":"✅ TouchControls Safari 支援增強完成"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1368,"columnNumber":28},"time":27415.123,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 開始實現雙重全螢幕同步","args":[{"preview":"🔧 開始實現雙重全螢幕同步","value":"🔧 開始實現雙重全螢幕同步"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1439,"columnNumber":24},"time":27415.258,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 雙重全螢幕同步功能實現完成","args":[{"preview":"✅ 雙重全螢幕同步功能實現完成","value":"✅ 雙重全螢幕同步功能實現完成"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1520,"columnNumber":24},"time":27415.401,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 開始修復 Safari 整合順序","args":[{"preview":"🚀 開始修復 Safari 整合順序","value":"🚀 開始修復 Safari 整合順序"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1567,"columnNumber":24},"time":27415.545,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 所有功能已載入，開始修復整合順序","args":[{"preview":"✅ 所有功能已載入，開始修復整合順序","value":"✅ 所有功能已載入，開始修復整合順序"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1588,"columnNumber":28},"time":27415.675,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 創建 Safari 增強的座標同步版本","args":[{"preview":"🔧 創建 Safari 增強的座標同步版本","value":"🔧 創建 Safari 增強的座標同步版本"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1596,"columnNumber":28},"time":27415.811,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 更新雙重同步以使用 Safari 增強版本","args":[{"preview":"🔧 更新雙重同步以使用 Safari 增強版本","value":"🔧 更新雙重同步以使用 Safari 增強版本"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1687,"columnNumber":28},"time":27415.934,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 發現雙重同步版本，進行 Safari 增強","args":[{"preview":"🔧 發現雙重同步版本，進行 Safari 增強","value":"🔧 發現雙重同步版本，進行 Safari 增強"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1695,"columnNumber":36},"time":27416.337,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 雙重同步已升級為 Safari 增強版本","args":[{"preview":"✅ 雙重同步已升級為 Safari 增強版本","value":"✅ 雙重同步已升級為 Safari 增強版本"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1757,"columnNumber":36},"time":27416.477,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ Safari 整合順序修復完成","args":[{"preview":"✅ Safari 整合順序修復完成","value":"✅ Safari 整合順序修復完成"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1784,"columnNumber":28},"time":27416.613,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🎯 修復內容：","args":[{"preview":"🎯 修復內容：","value":"🎯 修復內容："}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1785,"columnNumber":28},"time":27416.755,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"   ✅ 創建 Safari 增強的座標同步版本","args":[{"preview":"   ✅ 創建 Safari 增強的座標同步版本","value":"   ✅ 創建 Safari 增強的座標同步版本"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1786,"columnNumber":28},"time":27416.882,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"   ✅ 雙重同步現在使用 Safari 增強版本","args":[{"preview":"   ✅ 雙重同步現在使用 Safari 增強版本","value":"   ✅ 雙重同步現在使用 Safari 增強版本"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1787,"columnNumber":28},"time":27417.016,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"   ✅ 跨瀏覽器 API 正確整合","args":[{"preview":"   ✅ 跨瀏覽器 API 正確整合","value":"   ✅ 跨瀏覽器 API 正確整合"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1788,"columnNumber":28},"time":27417.141,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"   ✅ 錯誤處理和回退機制完善","args":[{"preview":"   ✅ 錯誤處理和回退機制完善","value":"   ✅ 錯誤處理和回退機制完善"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1789,"columnNumber":28},"time":27417.29,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 初始化 PostMessage 通信修復系統","args":[{"preview":"🚀 初始化 PostMessage 通信修復系統","value":"🚀 初始化 PostMessage 通信修復系統"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1808,"columnNumber":24},"time":27417.416,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ PostMessage 通信修復系統初始化完成","args":[{"preview":"✅ PostMessage 通信修復系統初始化完成","value":"✅ PostMessage 通信修復系統初始化完成"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2117,"columnNumber":24},"time":27417.553,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699548.jpeg","width":390,"height":844,"timestamp":27431.872,"frameSwapWallTime":1758852699546.112}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699571.jpeg","width":390,"height":844,"timestamp":27454.35,"frameSwapWallTime":1758852699560.509}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699578.jpeg","width":390,"height":844,"timestamp":27461.717,"frameSwapWallTime":1758852699575.738}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699594.jpeg","width":390,"height":844,"timestamp":27477.704,"frameSwapWallTime":1758852699592.199}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699616.jpeg","width":390,"height":844,"timestamp":27499.711,"frameSwapWallTime":1758852699613.9578}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699645.jpeg","width":390,"height":844,"timestamp":27528.505,"frameSwapWallTime":1758852699642.793}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699677.jpeg","width":390,"height":844,"timestamp":27560.805,"frameSwapWallTime":1758852699675.073}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699729.jpeg","width":390,"height":844,"timestamp":27613.14,"frameSwapWallTime":1758852699727.5542}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699745.jpeg","width":390,"height":844,"timestamp":27629.232,"frameSwapWallTime":1758852699743.581}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699776.jpeg","width":390,"height":844,"timestamp":27659.714,"frameSwapWallTime":1758852699774.067}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699825.jpeg","width":390,"height":844,"timestamp":27709.17,"frameSwapWallTime":1758852699823.527}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852699862.jpeg","width":390,"height":844,"timestamp":27745.255,"frameSwapWallTime":1758852699859.62}
{"type":"console","messageType":"log","text":"📨 父頁面收到消息: {\"type\":\"DIAGNOSTIC_REQUEST\",\"action\":\"COMMUNICATION_TEST\",\"timestamp\":\"2025-09-26T02:11:39.528Z\",\"testId\":\"nfgqwkjcy\"}","args":[{"preview":"📨 父頁面收到消息: {\"type\":\"DIAGNOSTIC_REQUEST\",\"action\":\"COMMUNICATION_TEST\",\"timestamp\":\"2025-09-26T02:11:39.528Z\",\"testId\":\"nfgqwkjcy\"}","value":"📨 父頁面收到消息: {\"type\":\"DIAGNOSTIC_REQUEST\",\"action\":\"COMMUNICATION_TEST\",\"timestamp\":\"2025-09-26T02:11:39.528Z\",\"testId\":\"nfgqwkjcy\"}"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":27969.964,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 遊戲 iframe 已載入","args":[{"preview":"✅ 遊戲 iframe 已載入","value":"✅ 遊戲 iframe 已載入"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":27974.481,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"after","callId":"call@10","endTime":27980.787,"result":{"response":"<Response>"},"afterSnapshot":"after@call@10"}
{"type":"frame-snapshot","snapshot":{"callId":"call@10","snapshotName":"after@call@10","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":["HTML",{"lang":"zh-TW"},["HEAD",{},["BASE",{"href":"http://localhost:3000/mobile-postmessage-test.html"}],"\n    ",["META",{"charset":"utf-8"}],"\n    ",["META",{"name":"viewport","content":"width=device-width, initial-scale=1.0"}],"\n    ",["TITLE",{},"📱 手機 PostMessage 通信測試工具"],"\n    ",["STYLE",{},"\n        body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            min-height: 100vh;\n        }\n        \n        .container {\n            max-width: 800px;\n            margin: 0 auto;\n            background: rgba(255, 255, 255, 0.1);\n            border-radius: 15px;\n            padding: 20px;\n            backdrop-filter: blur(10px);\n        }\n        \n        h1 {\n            text-align: center;\n            margin-bottom: 30px;\n            font-size: 24px;\n        }\n        \n        .test-section {\n            background: rgba(255, 255, 255, 0.1);\n            border-radius: 10px;\n            padding: 15px;\n            margin-bottom: 20px;\n        }\n        \n        .test-button {\n            background: #4CAF50;\n            color: white;\n            border: none;\n            padding: 15px 25px;\n            border-radius: 8px;\n            font-size: 16px;\n            cursor: pointer;\n            width: 100%;\n            margin-bottom: 10px;\n            transition: background 0.3s;\n        }\n        \n        .test-button:hover {\n            background: #45a049;\n        }\n        \n        .test-button:disabled {\n            background: #666;\n            cursor: not-allowed;\n        }\n        \n        .status {\n            padding: 10px;\n            border-radius: 5px;\n            margin-bottom: 10px;\n            font-weight: bold;\n        }\n        \n        .status.success {\n            background: rgba(76, 175, 80, 0.3);\n            border: 1px solid #4CAF50;\n        }\n        \n        .status.error {\n            background: rgba(244, 67, 54, 0.3);\n            border: 1px solid #f44336;\n        }\n        \n        .status.info {\n            background: rgba(33, 150, 243, 0.3);\n            border: 1px solid #2196F3;\n        }\n        \n        .log {\n            background: rgba(0, 0, 0, 0.3);\n            border-radius: 5px;\n            padding: 10px;\n            max-height: 300px;\n            overflow-y: auto;\n            font-family: monospace;\n            font-size: 12px;\n            white-space: pre-wrap;\n        }\n        \n        .iframe-container {\n            width: 100%;\n            height: 400px;\n            border: 2px solid rgba(255, 255, 255, 0.3);\n            border-radius: 10px;\n            overflow: hidden;\n            margin-top: 20px;\n        }\n        \n        iframe {\n            width: 100%;\n            height: 100%;\n            border: none;\n        }\n        \n        .environment-info {\n            font-size: 12px;\n            background: rgba(0, 0, 0, 0.2);\n            padding: 10px;\n            border-radius: 5px;\n            margin-bottom: 20px;\n        }\n    "],"\n"],"\n",["BODY",{},"\n    ",["DIV",{"class":"container"},"\n        ",["H1",{},"📱 手機 PostMessage 通信測試工具"],"\n        \n        ","\n        ",["DIV",{"class":"environment-info","id":"environmentInfo"},"\n                ",["STRONG",{},"🔍 環境信息："],["BR"],"\n                📱 移動設備: 是",["BR"],"\n                🍎 Safari: 是",["BR"],"\n                📱 iOS: 是",["BR"],"\n                🤖 Android: 否",["BR"],"\n                📐 螢幕: 390x844",["BR"],"\n                🪟 視窗: 390x844",["BR"],"\n                📡 PostMessage: 支援\n            "],"\n        \n        ","\n        ",["DIV",{"class":"test-section"},"\n            ",["H3",{},"📡 通信狀態"],"\n            ",["DIV",{"id":"commStatus","class":"status success"},"✅ iframe 已載入，可以開始測試"],"\n        "],"\n        \n        ","\n        ",["DIV",{"class":"test-section"},"\n            ",["H3",{},"🧪 測試功能"],"\n            ",["BUTTON",{"class":"test-button","onclick":""},"\n                📤 測試基本通信\n            "],"\n            ",["BUTTON",{"class":"test-button","onclick":""},"\n                🔧 測試強化通信\n            "],"\n            ",["BUTTON",{"class":"test-button","onclick":""},"\n                🍎 測試全螢幕請求\n            "],"\n            ",["BUTTON",{"class":"test-button","onclick":""},"\n                📊 監控通信狀態\n            "],"\n            ",["BUTTON",{"class":"test-button","onclick":""},"\n                🗑️ 清除日誌\n            "],"\n        "],"\n        \n        ","\n        ",["DIV",{"class":"test-section"},"\n            ",["H3",{},"📋 測試日誌"],"\n            ",["DIV",{"__playwright_scroll_top_":"100","id":"testLog","class":"log"},"[10:11:39 AM] 🚀 手機 PostMessage 測試工具初始化\\n[10:11:39 AM] 🔍 環境檢測完成: {\n  \"userAgent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\n  \"isMobile\": true,\n  \"isSafari\": true,\n  \"isIOS\": true,\n  \"isAndroid\": false,\n  \"screenWidth\": 390,\n  \"screenHeight\": 844,\n  \"windowWidth\": 390,\n  \"windowHeight\": 844,\n  \"hasPostMessage\": true,\n  \"timestamp\": \"2025-09-26T02:11:39.178Z\"\n}\\n[10:11:39 AM] 📡 設置父頁面 PostMessage 監聽器\\n[10:11:39 AM] ✅ 父頁面 PostMessage 監聽器已設置\\n[10:11:39 AM] ✅ 測試工具初始化完成\\n[10:11:40 AM] 📨 父頁面收到消息: {\"type\":\"DIAGNOSTIC_REQUEST\",\"action\":\"COMMUNICATION_TEST\",\"timestamp\":\"2025-09-26T02:11:39.528Z\",\"testId\":\"nfgqwkjcy\"}\\n[10:11:40 AM] ✅ 遊戲 iframe 已載入"],"\n        "],"\n        \n        ","\n        ",["DIV",{"class":"test-section"},"\n            ",["H3",{},"🎮 遊戲 iframe 測試"],"\n            ",["DIV",{"class":"iframe-container"},"\n                ",["IFRAME",{"__playwright_bounding_rect__":"{\"left\":57,\"top\":1414.109375,\"right\":337,\"bottom\":1814.109375}","src":"/snapshot/frame@d1d22f8ef9609364cccf65d5ebc628d2","id":"gameIframe"}],"\n            "],"\n        "],"\n    "],"\n\n    ","\n\n\n"]],"viewport":{"width":390,"height":844},"timestamp":28001.867,"wallTime":1758852700118,"collectionTime":2.5999999940395355,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@10","snapshotName":"after@call@10","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":["HTML",{"lang":"en"},["HEAD",{},["BASE",{"href":"http://localhost:3000/games/starshake-game/dist/index.html"}],"\n    ",["META",{"charset":"utf-8"}],"\n    ",["LINK",{"rel":"icon","type":"image/png","href":"/favicon.png"}],"\n    ",["META",{"name":"viewport","content":"width=device-width, initial-scale=1.0"}],"\n    ",["TITLE",{},"EduCreate - Starshake"],"\n\n    ",["STYLE",{},"\n        /* reset CSS */\n        html, body {\n            margin: 0;\n            padding: 0;\n            background: #000;\n            overflow: hidden;\n            font-family: 'Open Sans', sans-serif;\n        }\n\n        #app {\n            width: 100vw;\n            height: 100vh;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n\n        #game-container {\n            width: 100%;\n            height: 100%;\n            max-width: 1000px;\n            max-height: 800px;\n        }\n    "],"\n  ","\n  ",["LINK",{"rel":"modulepreload","crossorigin":"","href":"/games/starshake-game/dist/assets/phaser-CmFXOKba.js"}],"\n\n    ","\n    \n\n    ","\n    ",["STYLE",{},"\n        /* 觸摸控制面板 */\n        #touch-controls {\n            position: fixed;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            height: 200px;\n            background: transparent;\n            display: none;\n            z-index: 1000;\n            pointer-events: none;\n        }\n        \n        /* 移動控制區域 */\n        .touch-joystick {\n            position: absolute;\n            bottom: 20px;\n            left: 20px;\n            width: 120px;\n            height: 120px;\n            background: transparent;\n            border: 2px solid rgba(255, 255, 255, 0.3);\n            border-radius: 50%;\n            pointer-events: all;\n        }\n        \n        .touch-joystick-knob {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: 40px;\n            height: 40px;\n            background: transparent;\n            border: 2px solid rgba(255, 255, 255, 0.6);\n            border-radius: 50%;\n            transform: translate(-50%, -50%);\n            transition: all 0.1s ease;\n        }\n        \n        /* 射擊按鈕 */\n        .touch-shoot-btn {\n            position: absolute;\n            bottom: 20px;\n            right: 20px;\n            width: 80px;\n            height: 80px;\n            background: transparent;\n            border: 2px solid rgba(255, 0, 0, 0.6);\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: rgba(255, 0, 0, 0.8);\n            font-size: 24px;\n            font-weight: bold;\n            pointer-events: all;\n            user-select: none;\n        }\n        \n        .touch-shoot-btn:active {\n            background: rgba(255, 0, 0, 0.2);\n            border-color: rgba(255, 0, 0, 0.8);\n            transform: scale(0.95);\n        }\n        \n        /* 移動設備檢測 */\n        @media (max-width: 768px), (pointer: coarse) {\n            #touch-controls {\n                display: block;\n            }\n        }\n        \n        /* 全螢幕按鈕 */\n        .fullscreen-btn {\n            position: absolute;\n            top: 20px;\n            right: 20px;\n            width: 50px;\n            height: 50px;\n            background: transparent;\n            border: 2px solid rgba(255, 255, 255, 0.3);\n            border-radius: 8px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: white;\n            font-size: 20px;\n            pointer-events: all;\n            cursor: pointer;\n        }\n    "],"\n",["STYLE",{},"\n                        /* iOS Safari 全螢幕模擬 */\n                        body.ios-fullscreen-simulation {\n                            position: fixed !important;\n                            top: 0 !important;\n                            left: 0 !important;\n                            width: 100vw !important;\n                            height: 100vh !important;\n                            height: 100dvh !important;\n                            margin: 0 !important;\n                            padding: 0 !important;\n                            overflow: hidden !important;\n                            background: black !important;\n                            z-index: 2147483647 !important;\n                        }\n                        \n                        body.ios-fullscreen-simulation #app {\n                            width: 100vw !important;\n                            height: 100vh !important;\n                            height: 100dvh !important;\n                        }\n                        \n                        body.ios-fullscreen-simulation #game-container {\n                            width: 100% !important;\n                            height: 100% !important;\n                            max-width: none !important;\n                            max-height: none !important;\n                        }\n                        \n                        /* 隱藏 iOS Safari 地址欄 */\n                        @supports (-webkit-touch-callout: none) {\n                            body.ios-fullscreen-simulation {\n                                height: -webkit-fill-available !important;\n                            }\n                        }\n                    "]],"\n\n",["BODY",{},"\n    ",["DIV",{"id":"app"},"\n        ",["DIV",{"id":"game-container"},["CANVAS",{"__playwright_bounding_rect__":"{\"left\":0,\"top\":88,\"right\":280,\"bottom\":312}","width":"1000","height":"800","style":"width: 280px; height: 224px; margin-left: 0px; margin-top: 88px;"}]],"\n        \n        ","\n        ",["DIV",{"id":"touch-controls"},"\n            ","\n            ",["DIV",{"class":"touch-joystick","id":"touch-joystick"},"\n                ",["DIV",{"class":"touch-joystick-knob","id":"joystick-knob"}],"\n            "],"\n            \n            ","\n            ",["DIV",{"class":"touch-shoot-btn","id":"touch-shoot"},"\n                🚀\n            "],"\n            \n            ","\n            ",["DIV",{"class":"fullscreen-btn","id":"fullscreen-btn"},"\n                ⛶\n            "],"\n        "],"\n    "],"\n    \n    ","\n    ","\n\n    ","\n    ","\n\n\n        ","\n        ","\n        \n        \n        \n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        \n        \n        \n        ","\n    \n\n"]],"viewport":{"width":280,"height":400},"timestamp":28004.063,"wallTime":1758852700120,"collectionTime":1.800000011920929,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@12","startTime":28010.842,"title":"Wait for load state \"networkidle\"","class":"Page","method":"waitForEventInfo","params":{"info":{"waitId":"a6d03ed5ba71b490fdee275c873a23b6","phase":"before","event":""}},"stepId":"pw:api@9","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@12"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852700131.jpeg","width":390,"height":844,"timestamp":28014.497,"frameSwapWallTime":1758852700123.765}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852700135.jpeg","width":390,"height":844,"timestamp":28018.719,"frameSwapWallTime":1758852700125.845}
{"type":"frame-snapshot","snapshot":{"callId":"call@12","snapshotName":"before@call@12","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[1,97]],"viewport":{"width":390,"height":844},"timestamp":28043.343,"wallTime":1758852700160,"collectionTime":0.9000000059604645,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@12","snapshotName":"before@call@12","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[1,77]],"viewport":{"width":280,"height":400},"timestamp":28044.21,"wallTime":1758852700161,"collectionTime":0.9000000059604645,"resourceOverrides":[],"isMainFrame":false}}
{"type":"console","messageType":"error","text":"Failed to load resource: the server responded with a status of 404 (Not Found)","args":[],"location":{"url":"http://localhost:3000/favicon.ico","lineNumber":0,"columnNumber":0},"time":28049.26,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 自動嘗試建立 PostMessage 通信","args":[{"preview":"🚀 自動嘗試建立 PostMessage 通信","value":"🚀 自動嘗試建立 PostMessage 通信"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2121,"columnNumber":28},"time":28581.164,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔄 自動重試通信建立","args":[{"preview":"🔄 自動重試通信建立","value":"🔄 自動重試通信建立"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1950,"columnNumber":28},"time":28581.366,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔄 重試 1/10","args":[{"preview":"🔄 重試 1/10","value":"🔄 重試 1/10"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1953,"columnNumber":32},"time":28581.491,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📡 設置強化的父頁面監聽器","args":[{"preview":"📡 設置強化的父頁面監聽器","value":"📡 設置強化的父頁面監聽器"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1823,"columnNumber":28},"time":28581.647,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📤 發送父頁面監聽器設置請求: {type: SETUP_PARENT_LISTENER, timestamp: 1758852700565, userAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, location: http://localhost:3000/games/starshake-game/dist/index.html}","args":[{"preview":"📤 發送父頁面監聽器設置請求:","value":"📤 發送父頁面監聽器設置請求:"},{"preview":"{type: SETUP_PARENT_LISTENER, timestamp: 1758852700565, userAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, location: http://localhost:3000/games/starshake-game/dist/index.html}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1842,"columnNumber":32},"time":28581.809,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📨 父頁面收到消息: {\"type\":\"SETUP_PARENT_LISTENER\",\"timestamp\":1758852700565,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"location\":\"http://localhost:3000/games/starshake-game/dist/index.html\"}","args":[{"preview":"📨 父頁面收到消息: {\"type\":\"SETUP_PARENT_LISTENER\",\"timestamp\":1758852700565,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"location\":\"http://localhost:3000/games/starshake-game/dist/index.html\"}","value":"📨 父頁面收到消息: {\"type\":\"SETUP_PARENT_LISTENER\",\"timestamp\":1758852700565,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"location\":\"http://localhost:3000/games/starshake-game/dist/index.html\"}"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":28581.925,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 處理監聽器設置請求","args":[{"preview":"🔧 處理監聽器設置請求","value":"🔧 處理監聽器設置請求"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":28582.011,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 父頁面監聽器就緒響應已發送","args":[{"preview":"✅ 父頁面監聽器就緒響應已發送","value":"✅ 父頁面監聽器就緒響應已發送"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":28582.089,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📥 收到消息: {type: PARENT_LISTENER_READY, timestamp: 1758852700571, parentUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1} from: http://localhost:3000","args":[{"preview":"📥 收到消息:","value":"📥 收到消息:"},{"preview":"{type: PARENT_LISTENER_READY, timestamp: 1758852700571, parentUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1}"},{"preview":"from:","value":"from:"},{"preview":"http://localhost:3000","value":"http://localhost:3000"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":841,"columnNumber":28},"time":28582.239,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 父頁面監聽器已就緒","args":[{"preview":"✅ 父頁面監聽器已就緒","value":"✅ 父頁面監聽器已就緒"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1854,"columnNumber":44},"time":28582.406,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🧪 執行強化的 PostMessage 通信測試","args":[{"preview":"🧪 執行強化的 PostMessage 通信測試","value":"🧪 執行強化的 PostMessage 通信測試"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1873,"columnNumber":28},"time":28582.488,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📤 發送強化測試消息: {type: COMMUNICATION_TEST, testId: test_1758852700583, timestamp: 1758852700583, userAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, isMobile: true}","args":[{"preview":"📤 發送強化測試消息:","value":"📤 發送強化測試消息:"},{"preview":"{type: COMMUNICATION_TEST, testId: test_1758852700583, timestamp: 1758852700583, userAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, isMobile: true}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1905,"columnNumber":32},"time":28582.595,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📨 父頁面收到消息: {\"type\":\"COMMUNICATION_TEST\",\"testId\":\"test_1758852700583\",\"timestamp\":1758852700583,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"isMobile\":true,\"isSafari\":true,\"isIOS\":true}","args":[{"preview":"📨 父頁面收到消息: {\"type\":\"COMMUNICATION_TEST\",\"testId\":\"test_1758852700583\",\"timestamp\":1758852700583,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"isMobile\":true,\"isSafari\":true,\"isIOS\":true}","value":"📨 父頁面收到消息: {\"type\":\"COMMUNICATION_TEST\",\"testId\":\"test_1758852700583\",\"timestamp\":1758852700583,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"isMobile\":true,\"isSafari\":true,\"isIOS\":true}"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":28582.691,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🧪 處理通信測試: test_1758852700583","args":[{"preview":"🧪 處理通信測試: test_1758852700583","value":"🧪 處理通信測試: test_1758852700583"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":28582.772,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 通信測試響應已發送","args":[{"preview":"✅ 通信測試響應已發送","value":"✅ 通信測試響應已發送"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":28582.849,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📥 收到消息: {type: COMMUNICATION_TEST_RESPONSE, testId: test_1758852700583, timestamp: 1758852700588, parentUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, receivedAt: 1758852700588} from: http://localhost:3000","args":[{"preview":"📥 收到消息:","value":"📥 收到消息:"},{"preview":"{type: COMMUNICATION_TEST_RESPONSE, testId: test_1758852700583, timestamp: 1758852700588, parentUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, receivedAt: 1758852700588}"},{"preview":"from:","value":"from:"},{"preview":"http://localhost:3000","value":"http://localhost:3000"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":841,"columnNumber":28},"time":28582.996,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 強化通信測試成功: {type: COMMUNICATION_TEST_RESPONSE, testId: test_1758852700583, timestamp: 1758852700588, parentUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, receivedAt: 1758852700588}","args":[{"preview":"✅ 強化通信測試成功:","value":"✅ 強化通信測試成功:"},{"preview":"{type: COMMUNICATION_TEST_RESPONSE, testId: test_1758852700583, timestamp: 1758852700588, parentUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac O…ke Gecko) Version/15.0 Mobile/15E148 Safari/604.1, receivedAt: 1758852700588}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1934,"columnNumber":32},"time":28583.179,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"⏱️ 響應時間: 12ms","args":[{"preview":"⏱️ 響應時間:","value":"⏱️ 響應時間:"},{"preview":"12ms","value":"12ms"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1935,"columnNumber":32},"time":28583.286,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 通信建立成功！","args":[{"preview":"✅ 通信建立成功！","value":"✅ 通信建立成功！"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1963,"columnNumber":40},"time":28583.366,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852700700.jpeg","width":390,"height":844,"timestamp":28583.597,"frameSwapWallTime":1758852700595.9512}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852700707.jpeg","width":390,"height":844,"timestamp":28590.566,"frameSwapWallTime":1758852700607.951}
{"type":"log","callId":"call@12","time":28789.781,"message":"  \"networkidle\" event fired"}
{"type":"after","callId":"call@12","endTime":28789.893,"afterSnapshot":"after@call@12"}
{"type":"before","callId":"call@16","startTime":28792.772,"class":"Page","method":"screenshot","params":{"timeout":10000,"type":"png","fullPage":true},"stepId":"pw:api@10","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@16"}
{"type":"frame-snapshot","snapshot":{"callId":"call@12","snapshotName":"after@call@12","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":["HTML",{"lang":"zh-TW"},[[2,12]],[[2,13]],["BODY",{},[[2,14]],["DIV",{"class":"container"},[[2,15]],[[2,17]],[[2,18]],[[2,19]],[[2,37]],[[2,38]],[[2,39]],["DIV",{"class":"test-section"},[[2,40]],[[2,42]],[[2,43]],["DIV",{"id":"commStatus","class":"status success"},"✅ PostMessage 通信正常工作"],[[2,46]]],[[2,48]],[[2,49]],[[2,69]],[[2,70]],[[2,71]],["DIV",{"class":"test-section"},[[2,72]],[[2,74]],[[2,75]],["DIV",{"__playwright_scroll_top_":"388","id":"testLog","class":"log"},"[10:11:39 AM] 🚀 手機 PostMessage 測試工具初始化\\n[10:11:39 AM] 🔍 環境檢測完成: {\n  \"userAgent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\n  \"isMobile\": true,\n  \"isSafari\": true,\n  \"isIOS\": true,\n  \"isAndroid\": false,\n  \"screenWidth\": 390,\n  \"screenHeight\": 844,\n  \"windowWidth\": 390,\n  \"windowHeight\": 844,\n  \"hasPostMessage\": true,\n  \"timestamp\": \"2025-09-26T02:11:39.178Z\"\n}\\n[10:11:39 AM] 📡 設置父頁面 PostMessage 監聽器\\n[10:11:39 AM] ✅ 父頁面 PostMessage 監聽器已設置\\n[10:11:39 AM] ✅ 測試工具初始化完成\\n[10:11:40 AM] 📨 父頁面收到消息: {\"type\":\"DIAGNOSTIC_REQUEST\",\"action\":\"COMMUNICATION_TEST\",\"timestamp\":\"2025-09-26T02:11:39.528Z\",\"testId\":\"nfgqwkjcy\"}\\n[10:11:40 AM] ✅ 遊戲 iframe 已載入\\n[10:11:40 AM] 📨 父頁面收到消息: {\"type\":\"SETUP_PARENT_LISTENER\",\"timestamp\":1758852700565,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"location\":\"http://localhost:3000/games/starshake-game/dist/index.html\"}\\n[10:11:40 AM] 🔧 處理監聽器設置請求\\n[10:11:40 AM] ✅ 父頁面監聽器就緒響應已發送\\n[10:11:40 AM] 📨 父頁面收到消息: {\"type\":\"COMMUNICATION_TEST\",\"testId\":\"test_1758852700583\",\"timestamp\":1758852700583,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"isMobile\":true,\"isSafari\":true,\"isIOS\":true}\\n[10:11:40 AM] 🧪 處理通信測試: test_1758852700583\\n[10:11:40 AM] ✅ 通信測試響應已發送"],[[2,78]]],[[2,80]],[[2,81]],[[2,91]],[[2,92]]],[[2,94]],[[2,95]]]],"viewport":{"width":390,"height":844},"timestamp":28796.023,"wallTime":1758852700912,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@12","snapshotName":"after@call@12","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[2,77]],"viewport":{"width":280,"height":400},"timestamp":28796.604,"wallTime":1758852700913,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":false}}
{"type":"frame-snapshot","snapshot":{"callId":"call@16","snapshotName":"before@call@16","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[1,8]],"viewport":{"width":390,"height":844},"timestamp":28797.008,"wallTime":1758852700913,"collectionTime":0.20000001788139343,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@16","snapshotName":"before@call@16","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[3,77]],"viewport":{"width":280,"height":400},"timestamp":28797.324,"wallTime":1758852700914,"collectionTime":0.30000001192092896,"resourceOverrides":[],"isMainFrame":false}}
{"type":"log","callId":"call@16","time":28799.697,"message":"taking page screenshot"}
{"type":"log","callId":"call@16","time":28873.4,"message":"waiting for fonts to load..."}
{"type":"log","callId":"call@16","time":28877.158,"message":"fonts loaded"}
{"type":"console","messageType":"log","text":"🔄 視窗大小變化，重新計算座標","args":[{"preview":"🔄 視窗大小變化，重新計算座標","value":"🔄 視窗大小變化，重新計算座標"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":664,"columnNumber":28},"time":28905.27,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852701055.jpeg","width":1170,"height":5673,"timestamp":28938.267,"frameSwapWallTime":1758852701054.2542}
{"type":"console","messageType":"log","text":"🔄 重新計算 TouchControls 座標","args":[{"preview":"🔄 重新計算 TouchControls 座標","value":"🔄 重新計算 TouchControls 座標"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":616,"columnNumber":28},"time":29005.75,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🕹️ 搖桿中心座標已更新: {x: 82, y: 318}","args":[{"preview":"🕹️ 搖桿中心座標已更新:","value":"🕹️ 搖桿中心座標已更新:"},{"preview":"{x: 82, y: 318}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":625,"columnNumber":32},"time":29006.115,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 射擊按鈕座標已更新: {left: 176, top: 296, width: 84, height: 84}","args":[{"preview":"🚀 射擊按鈕座標已更新:","value":"🚀 射擊按鈕座標已更新:"},{"preview":"{left: 176, top: 296, width: 84, height: 84}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":631,"columnNumber":32},"time":29006.306,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"⛶ 全螢幕按鈕座標已更新: {left: 206, top: 220, width: 54, height: 54}","args":[{"preview":"⛶ 全螢幕按鈕座標已更新:","value":"⛶ 全螢幕按鈕座標已更新:"},{"preview":"{left: 206, top: 220, width: 54, height: 54}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":643,"columnNumber":32},"time":29006.488,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852701198.jpeg","width":1170,"height":5673,"timestamp":29081.972,"frameSwapWallTime":1758852701197.041}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852701201.jpeg","width":1170,"height":5673,"timestamp":29084.637,"frameSwapWallTime":1758852701199.917}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852701201.jpeg","width":1170,"height":5673,"timestamp":29085.221,"frameSwapWallTime":1758852701200.232}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852701644.jpeg","width":1170,"height":5673,"timestamp":29527.652,"frameSwapWallTime":1758852701248.3162}
{"type":"console","messageType":"log","text":"🔧 修復遊戲內全螢幕按鈕連接","args":[{"preview":"🔧 修復遊戲內全螢幕按鈕連接","value":"🔧 修復遊戲內全螢幕按鈕連接"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2030,"columnNumber":28},"time":29528.161,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🎯 開始修復遊戲內全螢幕按鈕","args":[{"preview":"🎯 開始修復遊戲內全螢幕按鈕","value":"🎯 開始修復遊戲內全螢幕按鈕"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2047,"columnNumber":32},"time":29528.26,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 遊戲內全螢幕按鈕修復完成","args":[{"preview":"✅ 遊戲內全螢幕按鈕修復完成","value":"✅ 遊戲內全螢幕按鈕修復完成"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2085,"columnNumber":32},"time":29528.354,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🎯 現在點擊遊戲內的 ⛶ 按鈕應該會使用修復後的 PostMessage 通信","args":[{"preview":"🎯 現在點擊遊戲內的 ⛶ 按鈕應該會使用修復後的 PostMessage 通信","value":"🎯 現在點擊遊戲內的 ⛶ 按鈕應該會使用修復後的 PostMessage 通信"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2086,"columnNumber":32},"time":29528.429,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"after","callId":"call@16","endTime":29529.092,"result":{"binary":"<Buffer>"},"afterSnapshot":"after@call@16"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852701647.jpeg","width":390,"height":844,"timestamp":29530.603,"frameSwapWallTime":1758852701645.114}
{"type":"frame-snapshot","snapshot":{"callId":"call@16","snapshotName":"after@call@16","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[2,8]],"viewport":{"width":390,"height":844},"timestamp":29531.35,"wallTime":1758852701648,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@16","snapshotName":"after@call@16","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[4,77]],"viewport":{"width":280,"height":400},"timestamp":29532.244,"wallTime":1758852701648,"collectionTime":0.5999999940395355,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@18","startTime":29541.65,"class":"Frame","method":"waitForSelector","params":{"selector":"#gameIframe","timeout":30000},"stepId":"pw:api@11","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@18"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852701660.jpeg","width":390,"height":844,"timestamp":29543.272,"frameSwapWallTime":1758852701654.422}
{"type":"frame-snapshot","snapshot":{"callId":"call@18","snapshotName":"before@call@18","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[3,8]],"viewport":{"width":390,"height":844},"timestamp":29543.988,"wallTime":1758852701660,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@18","snapshotName":"before@call@18","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[5,77]],"viewport":{"width":280,"height":400},"timestamp":29544.393,"wallTime":1758852701661,"collectionTime":0.3999999761581421,"resourceOverrides":[],"isMainFrame":false}}
{"type":"log","callId":"call@18","time":29546.136,"message":"waiting for locator('#gameIframe') to be visible"}
{"type":"log","callId":"call@18","time":29552.605,"message":"  locator resolved to visible <iframe id=\"gameIframe\" src=\"/games/starshake-game/dist/index.html\"></iframe>"}
{"type":"after","callId":"call@18","endTime":29557.353,"result":{"element":"<ElementHandle>"},"afterSnapshot":"after@call@18"}
{"type":"frame-snapshot","snapshot":{"callId":"call@18","snapshotName":"after@call@18","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[4,8]],"viewport":{"width":390,"height":844},"timestamp":29559.886,"wallTime":1758852701676,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@18","snapshotName":"after@call@18","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[6,77]],"viewport":{"width":280,"height":400},"timestamp":29560.719,"wallTime":1758852701677,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@20","startTime":29565.134,"class":"Frame","method":"waitForTimeout","params":{"timeout":5000},"stepId":"pw:api@12","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@20"}
{"type":"frame-snapshot","snapshot":{"callId":"call@20","snapshotName":"before@call@20","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[5,8]],"viewport":{"width":390,"height":844},"timestamp":29567.98,"wallTime":1758852701684,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@20","snapshotName":"before@call@20","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[7,77]],"viewport":{"width":280,"height":400},"timestamp":29568.322,"wallTime":1758852701685,"collectionTime":0.30000001192092896,"resourceOverrides":[],"isMainFrame":false}}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852702054.jpeg","width":390,"height":844,"timestamp":29937.873,"frameSwapWallTime":1758852702051.94}
{"type":"console","messageType":"log","text":"🧪 開始測試基本 PostMessage 通信","args":[{"preview":"🧪 開始測試基本 PostMessage 通信","value":"🧪 開始測試基本 PostMessage 通信"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":29978.028,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📤 發送基本測試消息: {\"type\":\"BASIC_COMMUNICATION_TEST\",\"timestamp\":1758852702094,\"testId\":\"basic_1758852702094\"}","args":[{"preview":"📤 發送基本測試消息: {\"type\":\"BASIC_COMMUNICATION_TEST\",\"timestamp\":1758852702094,\"testId\":\"basic_1758852702094\"}","value":"📤 發送基本測試消息: {\"type\":\"BASIC_COMMUNICATION_TEST\",\"timestamp\":1758852702094,\"testId\":\"basic_1758852702094\"}"}],"location":{"url":"http://localhost:3000/mobile-postmessage-test.html","lineNumber":196,"columnNumber":20},"time":29981.358,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📥 收到消息: {type: BASIC_COMMUNICATION_TEST, timestamp: 1758852702094, testId: basic_1758852702094} from: http://localhost:3000","args":[{"preview":"📥 收到消息:","value":"📥 收到消息:"},{"preview":"{type: BASIC_COMMUNICATION_TEST, timestamp: 1758852702094, testId: basic_1758852702094}"},{"preview":"from:","value":"from:"},{"preview":"http://localhost:3000","value":"http://localhost:3000"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":841,"columnNumber":28},"time":29981.651,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852702129.jpeg","width":390,"height":844,"timestamp":30012.765,"frameSwapWallTime":1758852702127.032}
{"type":"console","messageType":"log","text":"❌ 診斷錯誤: {code: NO_PARENT_RESPONSE, message: 父頁面沒有響應測試消息, timestamp: 2025-09-26T02:11:42.529Z}","args":[{"preview":"❌ 診斷錯誤:","value":"❌ 診斷錯誤:"},{"preview":"{code: NO_PARENT_RESPONSE, message: 父頁面沒有響應測試消息, timestamp: 2025-09-26T02:11:42.529Z}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":950,"columnNumber":28},"time":30413.208,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852702606.jpeg","width":390,"height":844,"timestamp":30489.322,"frameSwapWallTime":1758852702603.594}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852702672.jpeg","width":390,"height":844,"timestamp":30555.632,"frameSwapWallTime":1758852702669.7258}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852702712.jpeg","width":390,"height":844,"timestamp":30595.996,"frameSwapWallTime":1758852702710.246}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852702778.jpeg","width":390,"height":844,"timestamp":30662.05,"frameSwapWallTime":1758852702776.291}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852702846.jpeg","width":390,"height":844,"timestamp":30729.46,"frameSwapWallTime":1758852702843.773}
{"type":"console","messageType":"log","text":"🎮 開始強制修復遊戲內全螢幕按鈕","args":[{"preview":"🎮 開始強制修復遊戲內全螢幕按鈕","value":"🎮 開始強制修復遊戲內全螢幕按鈕"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2140,"columnNumber":24},"time":30972.488,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 開始執行強制修復","args":[{"preview":"🚀 開始執行強制修復","value":"🚀 開始執行強制修復"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2295,"columnNumber":24},"time":30972.617,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 方法1：直接替換按鈕事件","args":[{"preview":"🔧 方法1：直接替換按鈕事件","value":"🔧 方法1：直接替換按鈕事件"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2144,"columnNumber":28},"time":30972.867,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 找到全螢幕按鈕，移除舊事件","args":[{"preview":"✅ 找到全螢幕按鈕，移除舊事件","value":"✅ 找到全螢幕按鈕，移除舊事件"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2148,"columnNumber":32},"time":30972.957,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 全螢幕按鈕事件已替換","args":[{"preview":"✅ 全螢幕按鈕事件已替換","value":"✅ 全螢幕按鈕事件已替換"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2169,"columnNumber":32},"time":30973.035,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🔧 方法2：替換 TouchControls 方法","args":[{"preview":"🔧 方法2：替換 TouchControls 方法","value":"🔧 方法2：替換 TouchControls 方法"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2179,"columnNumber":28},"time":30973.121,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 找到 TouchControls，替換 toggleFullscreen 方法","args":[{"preview":"✅ 找到 TouchControls，替換 toggleFullscreen 方法","value":"✅ 找到 TouchControls，替換 toggleFullscreen 方法"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2182,"columnNumber":32},"time":30973.193,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ TouchControls.toggleFullscreen 已替換","args":[{"preview":"✅ TouchControls.toggleFullscreen 已替換","value":"✅ TouchControls.toggleFullscreen 已替換"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2193,"columnNumber":32},"time":30973.262,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"✅ 強制修復成功","args":[{"preview":"✅ 強制修復成功","value":"✅ 強制修復成功"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2304,"columnNumber":28},"time":30973.343,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🎯 現在點擊遊戲內的 ⛶ 按鈕應該會有反應","args":[{"preview":"🎯 現在點擊遊戲內的 ⛶ 按鈕應該會有反應","value":"🎯 現在點擊遊戲內的 ⛶ 按鈕應該會有反應"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2305,"columnNumber":28},"time":30973.514,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🧪 添加了測試函數：window.testGameFullscreenFix()","args":[{"preview":"🧪 添加了測試函數：window.testGameFullscreenFix()","value":"🧪 添加了測試函數：window.testGameFullscreenFix()"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":2316,"columnNumber":24},"time":30973.591,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📋 PostMessage 診斷報告: {summary: Object, details: Object, recommendations: Array(2)}","args":[{"preview":"📋 PostMessage 診斷報告:","value":"📋 PostMessage 診斷報告:"},{"preview":"{summary: Object, details: Object, recommendations: Array(2)}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1022,"columnNumber":28},"time":32413.362,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"📋 初始診斷報告已生成","args":[{"preview":"📋 初始診斷報告已生成","value":"📋 初始診斷報告已生成"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":1072,"columnNumber":28},"time":32413.639,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"after","callId":"call@20","endTime":34568.51,"afterSnapshot":"after@call@20"}
{"type":"frame-snapshot","snapshot":{"callId":"call@20","snapshotName":"after@call@20","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":["HTML",{"lang":"zh-TW"},[[8,12]],[[8,13]],["BODY",{},[[8,14]],["DIV",{"class":"container"},[[8,15]],[[8,17]],[[8,18]],[[8,19]],[[8,37]],[[8,38]],[[8,39]],["DIV",{"class":"test-section"},[[8,40]],[[8,42]],[[8,43]],["DIV",{"id":"commStatus","class":"status info"},"🔄 測試基本通信中..."],[[8,46]]],[[8,48]],[[8,49]],[[8,69]],[[8,70]],[[8,71]],["DIV",{"class":"test-section"},[[8,72]],[[8,74]],[[8,75]],["DIV",{"__playwright_scroll_top_":"436","id":"testLog","class":"log"},"[10:11:39 AM] 🚀 手機 PostMessage 測試工具初始化\\n[10:11:39 AM] 🔍 環境檢測完成: {\n  \"userAgent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\n  \"isMobile\": true,\n  \"isSafari\": true,\n  \"isIOS\": true,\n  \"isAndroid\": false,\n  \"screenWidth\": 390,\n  \"screenHeight\": 844,\n  \"windowWidth\": 390,\n  \"windowHeight\": 844,\n  \"hasPostMessage\": true,\n  \"timestamp\": \"2025-09-26T02:11:39.178Z\"\n}\\n[10:11:39 AM] 📡 設置父頁面 PostMessage 監聽器\\n[10:11:39 AM] ✅ 父頁面 PostMessage 監聽器已設置\\n[10:11:39 AM] ✅ 測試工具初始化完成\\n[10:11:40 AM] 📨 父頁面收到消息: {\"type\":\"DIAGNOSTIC_REQUEST\",\"action\":\"COMMUNICATION_TEST\",\"timestamp\":\"2025-09-26T02:11:39.528Z\",\"testId\":\"nfgqwkjcy\"}\\n[10:11:40 AM] ✅ 遊戲 iframe 已載入\\n[10:11:40 AM] 📨 父頁面收到消息: {\"type\":\"SETUP_PARENT_LISTENER\",\"timestamp\":1758852700565,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"location\":\"http://localhost:3000/games/starshake-game/dist/index.html\"}\\n[10:11:40 AM] 🔧 處理監聽器設置請求\\n[10:11:40 AM] ✅ 父頁面監聽器就緒響應已發送\\n[10:11:40 AM] 📨 父頁面收到消息: {\"type\":\"COMMUNICATION_TEST\",\"testId\":\"test_1758852700583\",\"timestamp\":1758852700583,\"userAgent\":\"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1\",\"isMobile\":true,\"isSafari\":true,\"isIOS\":true}\\n[10:11:40 AM] 🧪 處理通信測試: test_1758852700583\\n[10:11:40 AM] ✅ 通信測試響應已發送\\n[10:11:42 AM] 🧪 開始測試基本 PostMessage 通信\\n[10:11:42 AM] 📤 發送基本測試消息: {\"type\":\"BASIC_COMMUNICATION_TEST\",\"timestamp\":1758852702094,\"testId\":\"basic_1758852702094\"}"],[[8,78]]],[[8,80]],[[8,81]],[[8,91]],[[8,92]]],[[8,94]],[[8,95]]]],"viewport":{"width":390,"height":844},"timestamp":34571.617,"wallTime":1758852706688,"collectionTime":0.699999988079071,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@20","snapshotName":"after@call@20","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":["HTML",{"lang":"en"},[[8,24]],[[8,25]],["BODY",{},[[8,26]],["DIV",{"id":"app"},[[8,27]],[[8,29]],[[8,30]],[[8,31]],["DIV",{"id":"touch-controls"},[[8,32]],[[8,33]],[[8,37]],[[8,38]],[[8,39]],[[8,41]],[[8,42]],[[8,43]],["DIV",{"class":"fullscreen-btn","id":"fullscreen-btn"},"\n                ⛶\n            "],[[8,46]]],[[8,48]]],[[8,50]],[[8,51]],[[8,52]],[[8,53]],[[8,54]],[[8,55]],[[8,56]],[[8,57]],[[8,58]],[[8,59]],[[8,60]],[[8,61]],[[8,62]],[[8,63]],[[8,64]],[[8,65]],[[8,66]],[[8,67]],[[8,68]],[[8,69]],[[8,70]],[[8,71]],[[8,72]],[[8,73]],[[8,74]],[[8,75]]]],"viewport":{"width":280,"height":400},"timestamp":34572.315,"wallTime":1758852706689,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@22","startTime":34574.897,"class":"Page","method":"screenshot","params":{"timeout":10000,"type":"png","fullPage":true},"stepId":"pw:api@13","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@22"}
{"type":"frame-snapshot","snapshot":{"callId":"call@22","snapshotName":"before@call@22","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[1,8]],"viewport":{"width":390,"height":844},"timestamp":34576.793,"wallTime":1758852706693,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@22","snapshotName":"before@call@22","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[1,5]],"viewport":{"width":280,"height":400},"timestamp":34577.188,"wallTime":1758852706694,"collectionTime":0.20000001788139343,"resourceOverrides":[],"isMainFrame":false}}
{"type":"log","callId":"call@22","time":34577.712,"message":"taking page screenshot"}
{"type":"log","callId":"call@22","time":34579.708,"message":"waiting for fonts to load..."}
{"type":"log","callId":"call@22","time":34580.969,"message":"fonts loaded"}
{"type":"console","messageType":"log","text":"🔄 視窗大小變化，重新計算座標","args":[{"preview":"🔄 視窗大小變化，重新計算座標","value":"🔄 視窗大小變化，重新計算座標"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":664,"columnNumber":28},"time":34588.252,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852706742.jpeg","width":1170,"height":5673,"timestamp":34626.161,"frameSwapWallTime":1758852706741.218}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852706745.jpeg","width":1170,"height":5673,"timestamp":34628.921,"frameSwapWallTime":1758852706744.366}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852706748.jpeg","width":1170,"height":5673,"timestamp":34632.051,"frameSwapWallTime":1758852706747.432}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852707230.jpeg","width":1170,"height":5673,"timestamp":35114.066,"frameSwapWallTime":1758852706798.906}
{"type":"console","messageType":"log","text":"🔄 重新計算 TouchControls 座標","args":[{"preview":"🔄 重新計算 TouchControls 座標","value":"🔄 重新計算 TouchControls 座標"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":616,"columnNumber":28},"time":35114.336,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🕹️ 搖桿中心座標已更新: {x: 82, y: 318}","args":[{"preview":"🕹️ 搖桿中心座標已更新:","value":"🕹️ 搖桿中心座標已更新:"},{"preview":"{x: 82, y: 318}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":625,"columnNumber":32},"time":35114.474,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"🚀 射擊按鈕座標已更新: {left: 176, top: 296, width: 84, height: 84}","args":[{"preview":"🚀 射擊按鈕座標已更新:","value":"🚀 射擊按鈕座標已更新:"},{"preview":"{left: 176, top: 296, width: 84, height: 84}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":631,"columnNumber":32},"time":35114.603,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"console","messageType":"log","text":"⛶ 全螢幕按鈕座標已更新: {left: 206, top: 220, width: 54, height: 54}","args":[{"preview":"⛶ 全螢幕按鈕座標已更新:","value":"⛶ 全螢幕按鈕座標已更新:"},{"preview":"{left: 206, top: 220, width: 54, height: 54}"}],"location":{"url":"http://localhost:3000/games/starshake-game/dist/index.html","lineNumber":643,"columnNumber":32},"time":35114.721,"pageId":"page@ef3cba5e1119af50bdf014abc2671d96"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852707231.jpeg","width":390,"height":844,"timestamp":35114.9,"frameSwapWallTime":1758852707229.033}
{"type":"after","callId":"call@22","endTime":35115.189,"result":{"binary":"<Buffer>"},"afterSnapshot":"after@call@22"}
{"type":"frame-snapshot","snapshot":{"callId":"call@22","snapshotName":"after@call@22","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[2,8]],"viewport":{"width":390,"height":844},"timestamp":35117.22,"wallTime":1758852707234,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@22","snapshotName":"after@call@22","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[2,5]],"viewport":{"width":280,"height":400},"timestamp":35117.629,"wallTime":1758852707234,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@24","startTime":35121.919,"class":"Frame","method":"waitForTimeout","params":{"timeout":3000},"stepId":"pw:api@14","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@24"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852707241.jpeg","width":390,"height":844,"timestamp":35124.408,"frameSwapWallTime":1758852707238.154}
{"type":"frame-snapshot","snapshot":{"callId":"call@24","snapshotName":"before@call@24","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[3,8]],"viewport":{"width":390,"height":844},"timestamp":35124.608,"wallTime":1758852707241,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@24","snapshotName":"before@call@24","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[3,5]],"viewport":{"width":280,"height":400},"timestamp":35124.779,"wallTime":1758852707241,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":false}}
{"type":"after","callId":"call@24","endTime":38126.071,"afterSnapshot":"after@call@24"}
{"type":"frame-snapshot","snapshot":{"callId":"call@24","snapshotName":"after@call@24","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[4,8]],"viewport":{"width":390,"height":844},"timestamp":38128.892,"wallTime":1758852710245,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@24","snapshotName":"after@call@24","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[4,5]],"viewport":{"width":280,"height":400},"timestamp":38129.208,"wallTime":1758852710246,"collectionTime":0.30000001192092896,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@26","startTime":38135.621,"class":"Frame","method":"isVisible","params":{"selector":"#gameIframe >> internal:control=enter-frame >> button:has-text(\"⛶\") >> nth=0","strict":true},"stepId":"pw:api@15","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@26"}
{"type":"frame-snapshot","snapshot":{"callId":"call@26","snapshotName":"before@call@26","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[5,8]],"viewport":{"width":390,"height":844},"timestamp":38139.676,"wallTime":1758852710256,"collectionTime":0.6000000238418579,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@26","snapshotName":"before@call@26","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[5,5]],"viewport":{"width":280,"height":400},"timestamp":38140.214,"wallTime":1758852710257,"collectionTime":0.5999999940395355,"resourceOverrides":[],"isMainFrame":false}}
{"type":"log","callId":"call@26","time":38142.09,"message":"  checking visibility of locator('#gameIframe').contentFrame().locator('button:has-text(\"⛶\")').first()"}
{"type":"after","callId":"call@26","endTime":38160.521,"result":{"value":false},"afterSnapshot":"after@call@26"}
{"type":"frame-snapshot","snapshot":{"callId":"call@26","snapshotName":"after@call@26","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[6,8]],"viewport":{"width":390,"height":844},"timestamp":38163.088,"wallTime":1758852710279,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@26","snapshotName":"after@call@26","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[6,5]],"viewport":{"width":280,"height":400},"timestamp":38163.445,"wallTime":1758852710280,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@28","startTime":38167.716,"class":"Frame","method":"isVisible","params":{"selector":"#gameIframe >> internal:control=enter-frame >> [onclick*=\"fullscreen\"] >> nth=0","strict":true},"stepId":"pw:api@16","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@28"}
{"type":"frame-snapshot","snapshot":{"callId":"call@28","snapshotName":"before@call@28","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[7,8]],"viewport":{"width":390,"height":844},"timestamp":38170.705,"wallTime":1758852710287,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@28","snapshotName":"before@call@28","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[7,5]],"viewport":{"width":280,"height":400},"timestamp":38171.121,"wallTime":1758852710287,"collectionTime":0.30000001192092896,"resourceOverrides":[],"isMainFrame":false}}
{"type":"log","callId":"call@28","time":38172.367,"message":"  checking visibility of locator('#gameIframe').contentFrame().locator('[onclick*=\"fullscreen\"]').first()"}
{"type":"after","callId":"call@28","endTime":38176.979,"result":{"value":false},"afterSnapshot":"after@call@28"}
{"type":"frame-snapshot","snapshot":{"callId":"call@28","snapshotName":"after@call@28","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[8,8]],"viewport":{"width":390,"height":844},"timestamp":38178.968,"wallTime":1758852710295,"collectionTime":0.29999998211860657,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@28","snapshotName":"after@call@28","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[8,5]],"viewport":{"width":280,"height":400},"timestamp":38179.362,"wallTime":1758852710296,"collectionTime":0.29999998211860657,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@30","startTime":38184.247,"class":"Frame","method":"isVisible","params":{"selector":"#gameIframe >> internal:control=enter-frame >> .fullscreen-btn >> nth=0","strict":true},"stepId":"pw:api@17","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@30"}
{"type":"frame-snapshot","snapshot":{"callId":"call@30","snapshotName":"before@call@30","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[9,8]],"viewport":{"width":390,"height":844},"timestamp":38186.48,"wallTime":1758852710303,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@30","snapshotName":"before@call@30","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[9,5]],"viewport":{"width":280,"height":400},"timestamp":38187.024,"wallTime":1758852710303,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":false}}
{"type":"log","callId":"call@30","time":38188.808,"message":"  checking visibility of locator('#gameIframe').contentFrame().locator('.fullscreen-btn').first()"}
{"type":"after","callId":"call@30","endTime":38195.812,"result":{"value":true},"afterSnapshot":"after@call@30"}
{"type":"frame-snapshot","snapshot":{"callId":"call@30","snapshotName":"after@call@30","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[10,8]],"viewport":{"width":390,"height":844},"timestamp":38197.823,"wallTime":1758852710314,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@30","snapshotName":"after@call@30","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[10,5]],"viewport":{"width":280,"height":400},"timestamp":38198.373,"wallTime":1758852710315,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@32","startTime":38203.274,"class":"Frame","method":"isVisible","params":{"selector":"#gameIframe >> internal:control=enter-frame >> .fullscreen-btn >> nth=0","strict":true},"stepId":"pw:api@18","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@32"}
{"type":"frame-snapshot","snapshot":{"callId":"call@32","snapshotName":"before@call@32","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[11,8]],"viewport":{"width":390,"height":844},"timestamp":38205.441,"wallTime":1758852710322,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@32","snapshotName":"before@call@32","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[11,5]],"viewport":{"width":280,"height":400},"timestamp":38205.859,"wallTime":1758852710322,"collectionTime":0.30000001192092896,"resourceOverrides":[],"isMainFrame":false}}
{"type":"log","callId":"call@32","time":38207.134,"message":"  checking visibility of locator('#gameIframe').contentFrame().locator('.fullscreen-btn').first()"}
{"type":"after","callId":"call@32","endTime":38211.513,"result":{"value":true},"afterSnapshot":"after@call@32"}
{"type":"frame-snapshot","snapshot":{"callId":"call@32","snapshotName":"after@call@32","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[12,8]],"viewport":{"width":390,"height":844},"timestamp":38214.432,"wallTime":1758852710331,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@32","snapshotName":"after@call@32","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[12,5]],"viewport":{"width":280,"height":400},"timestamp":38214.841,"wallTime":1758852710331,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@34","startTime":38217.943,"class":"Frame","method":"click","params":{"selector":"#gameIframe >> internal:control=enter-frame >> .fullscreen-btn >> nth=0","strict":true,"timeout":10000},"stepId":"pw:api@19","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@34"}
{"type":"frame-snapshot","snapshot":{"callId":"call@34","snapshotName":"before@call@34","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[13,8]],"viewport":{"width":390,"height":844},"timestamp":38219.963,"wallTime":1758852710336,"collectionTime":0.30000001192092896,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@34","snapshotName":"before@call@34","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[13,5]],"viewport":{"width":280,"height":400},"timestamp":38220.422,"wallTime":1758852710337,"collectionTime":0.5,"resourceOverrides":[],"isMainFrame":false}}
{"type":"log","callId":"call@34","time":38222.42,"message":"waiting for locator('#gameIframe').contentFrame().locator('.fullscreen-btn').first()"}
{"type":"log","callId":"call@34","time":38230.291,"message":"  locator resolved to <div id=\"fullscreen-btn\" class=\"fullscreen-btn\">↵                ⛶↵            </div>"}
{"type":"log","callId":"call@34","time":38232.162,"message":"attempting click action"}
{"type":"log","callId":"call@34","time":38233.661,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38255.923,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38255.951,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":38256.786,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":38258.481,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":38258.508,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":38259.914,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38288.79,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38288.824,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":38290.465,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":38291.739,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":38291.762,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":38291.772,"message":"  waiting 20ms"}
{"type":"log","callId":"call@34","time":38315.964,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38338.835,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38338.87,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":38340.291,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":38341.514,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":38341.537,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":38341.547,"message":"  waiting 100ms"}
{"type":"log","callId":"call@34","time":38445.159,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38472.208,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38472.245,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":38473.678,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":38475.912,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":38475.936,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":38475.954,"message":"  waiting 100ms"}
{"type":"log","callId":"call@34","time":38577.809,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38605.697,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":38605.726,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":38606.178,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":38607.329,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":38607.35,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":38607.36,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":39110.571,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":39139.091,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":39139.125,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":39140.538,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":39141.675,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":39141.702,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":39141.713,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":39645.211,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":39672.267,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":39672.302,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":39674.746,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":39675.889,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":39675.912,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":39675.923,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":40178.552,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":40205.489,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":40205.522,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":40206.967,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":40208.042,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":40208.065,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":40208.075,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":40710.218,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":40738.952,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":40738.982,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":40739.489,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":40740.779,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":40740.805,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":40740.815,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":41245.95,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":41272.287,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":41272.32,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":41273.698,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":41274.877,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":41274.904,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":41274.914,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":41778.069,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":41805.443,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":41805.478,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":41806.991,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":41808.081,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":41808.109,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":41808.124,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":42310.805,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":42338.949,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":42338.985,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":42340.546,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":42341.83,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":42341.852,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":42341.863,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":42844.75,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":42872.275,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":42872.306,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":42872.813,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":42874.072,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":42874.099,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":42874.11,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":43377.612,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":43405.489,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":43405.526,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":43406.871,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":43407.932,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":43407.953,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":43407.962,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":43911.627,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":43938.85,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":43938.889,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":43940.272,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":43941.418,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":43941.445,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":43941.456,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":44444.726,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":44472.309,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":44472.348,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":44474.001,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":44475.17,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":44475.191,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":44475.203,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":44977.871,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":45005.778,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":45005.808,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":45006.338,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":45008.25,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":45008.273,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":45008.286,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":45511.052,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":45538.934,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":45538.978,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":45540.323,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":45541.407,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":45541.431,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":45541.442,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":46044.853,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":46072.235,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":46072.27,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":46073.607,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":46074.721,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":46074.742,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":46074.753,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":46577.935,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":46605.829,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":46605.884,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":46607.804,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":46608.949,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":46608.971,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":46608.983,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":47111.187,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":47139.055,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":47139.087,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":47139.572,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":47140.728,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":47140.749,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":47140.761,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":47643.92,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":47672.341,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":47672.38,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":47673.724,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":47674.827,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":47674.85,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":47674.86,"message":"  waiting 500ms"}
{"type":"log","callId":"call@34","time":48178.189,"message":"  waiting for element to be visible, enabled and stable"}
{"type":"log","callId":"call@34","time":48205.667,"message":"  element is visible, enabled and stable"}
{"type":"log","callId":"call@34","time":48205.709,"message":"  scrolling into view if needed"}
{"type":"log","callId":"call@34","time":48207.18,"message":"  done scrolling"}
{"type":"log","callId":"call@34","time":48208.264,"message":"  element is outside of the viewport"}
{"type":"log","callId":"call@34","time":48208.285,"message":"retrying click action"}
{"type":"log","callId":"call@34","time":48208.302,"message":"  waiting 500ms"}
{"type":"after","callId":"call@34","endTime":48220.155,"error":{"message":"Timeout 10000ms exceeded.","stack":"TimeoutError: Timeout 10000ms exceeded.\n    at ProgressController.run (C:\\Users\\Administrator\\Desktop\\EduCreate\\node_modules\\playwright-core\\lib\\server\\progress.js:76:26)\n    at Frame.click (C:\\Users\\Administrator\\Desktop\\EduCreate\\node_modules\\playwright-core\\lib\\server\\frames.js:959:23)\n    at FrameDispatcher.click (C:\\Users\\Administrator\\Desktop\\EduCreate\\node_modules\\playwright-core\\lib\\server\\dispatchers\\frameDispatcher.js:117:30)\n    at FrameDispatcher._handleCommand (C:\\Users\\Administrator\\Desktop\\EduCreate\\node_modules\\playwright-core\\lib\\server\\dispatchers\\dispatcher.js:88:40)\n    at DispatcherConnection.dispatch (C:\\Users\\Administrator\\Desktop\\EduCreate\\node_modules\\playwright-core\\lib\\server\\dispatchers\\dispatcher.js:309:39)","name":"TimeoutError"},"afterSnapshot":"after@call@34"}
{"type":"frame-snapshot","snapshot":{"callId":"call@34","snapshotName":"after@call@34","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[14,8]],"viewport":{"width":390,"height":844},"timestamp":48223.24,"wallTime":1758852720340,"collectionTime":0.5999999940395355,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@34","snapshotName":"after@call@34","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":["HTML",{"lang":"en"},[[22,24]],[[22,25]],["BODY",{},[[22,26]],["DIV",{"id":"app"},[[22,27]],[[22,29]],[[22,30]],[[22,31]],["DIV",{"id":"touch-controls"},[[22,32]],[[22,33]],[[22,37]],[[22,38]],[[22,39]],[[22,41]],[[22,42]],[[22,43]],["DIV",{"__playwright_target__":"call@34","class":"fullscreen-btn","id":"fullscreen-btn"},[[14,0]]],[[22,46]]],[[22,48]]],[[22,50]],[[22,51]],[[22,52]],[[22,53]],[[22,54]],[[22,55]],[[22,56]],[[22,57]],[[22,58]],[[22,59]],[[22,60]],[[22,61]],[[22,62]],[[22,63]],[[22,64]],[[22,65]],[[22,66]],[[22,67]],[[22,68]],[[22,69]],[[22,70]],[[22,71]],[[22,72]],[[22,73]],[[22,74]],[[22,75]]]],"viewport":{"width":280,"height":400},"timestamp":48224.074,"wallTime":1758852720340,"collectionTime":0.5999999940395355,"resourceOverrides":[],"isMainFrame":false}}
{"type":"before","callId":"call@36","startTime":48233.883,"class":"Page","method":"screenshot","params":{"timeout":5000,"type":"png","caret":"initial"},"stepId":"pw:api@21","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","beforeSnapshot":"before@call@36"}
{"type":"frame-snapshot","snapshot":{"callId":"call@36","snapshotName":"before@call@36","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[15,8]],"viewport":{"width":390,"height":844},"timestamp":48235.795,"wallTime":1758852720352,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@36","snapshotName":"before@call@36","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[1,4]],"viewport":{"width":280,"height":400},"timestamp":48236.193,"wallTime":1758852720353,"collectionTime":0.30000001192092896,"resourceOverrides":[],"isMainFrame":false}}
{"type":"log","callId":"call@36","time":48236.942,"message":"taking page screenshot"}
{"type":"log","callId":"call@36","time":48238.83,"message":"waiting for fonts to load..."}
{"type":"log","callId":"call@36","time":48239.778,"message":"fonts loaded"}
{"type":"screencast-frame","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","sha1":"page@ef3cba5e1119af50bdf014abc2671d96-1758852720397.jpeg","width":1170,"height":2532,"timestamp":48280.925,"frameSwapWallTime":1758852720393.542}
{"type":"after","callId":"call@36","endTime":48483.287,"result":{"binary":"<Buffer>"},"afterSnapshot":"after@call@36"}
{"type":"frame-snapshot","snapshot":{"callId":"call@36","snapshotName":"after@call@36","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@ea2344e6d319634a222bd7ede92ae54c","frameUrl":"http://localhost:3000/mobile-postmessage-test.html","doctype":"html","html":[[16,8]],"viewport":{"width":390,"height":844},"timestamp":48485.069,"wallTime":1758852720601,"collectionTime":0.30000001192092896,"resourceOverrides":[],"isMainFrame":true}}
{"type":"frame-snapshot","snapshot":{"callId":"call@36","snapshotName":"after@call@36","pageId":"page@ef3cba5e1119af50bdf014abc2671d96","frameId":"frame@d1d22f8ef9609364cccf65d5ebc628d2","frameUrl":"http://localhost:3000/games/starshake-game/dist/index.html","doctype":"html","html":[[2,4]],"viewport":{"width":280,"height":400},"timestamp":48485.554,"wallTime":1758852720602,"collectionTime":0.4000000059604645,"resourceOverrides":[],"isMainFrame":false}}
