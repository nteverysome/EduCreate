# 圖片模態框自動搜尋功能說明

## 功能概述

當用戶在詞彙編輯頁面輸入英文或中文單字時，點擊圖片圖標打開圖片模態框，搜尋框會自動填充為輸入框上的文字，並自動執行搜尋。

## 使用流程

### 英文單字搜尋
1. 打開詞彙編輯頁面
2. 在英文輸入框輸入單字（例如："apple"）
3. 點擊圖片圖標（📷）
4. 圖片模態框打開，搜尋框自動填充 "apple"
5. 圖片結果自動加載
6. 選擇喜歡的圖片

### 中文單字搜尋
1. 打開詞彙編輯頁面
2. 在中文輸入框輸入單字（例如："蘋果"）
3. 點擊中文圖片圖標（📷）
4. 圖片模態框打開，搜尋框自動填充 "蘋果"
5. 圖片結果自動加載
6. 選擇喜歡的圖片

## 技術實現

### 修改的文件

#### 1. `components/image-picker/index.tsx`
- 添加 `initialSearchQuery` prop
- 將其傳遞給 SearchTab 組件

#### 2. `components/image-picker/SearchTab.tsx`
- 接收 `initialSearchQuery` prop
- 初始化搜尋詞時使用該值
- 添加 useEffect 監聽變化並自動搜尋

#### 3. `components/vocabulary-item-with-image/index.tsx`
- 英文圖片模態框傳遞 `item.english`
- 中文圖片模態框傳遞 `item.chinese`

#### 4. `components/content-item-with-image/index.tsx`
- 圖片模態框傳遞 `localValue.text`

## 主要特點

✅ **自動搜尋** - 打開模態框時自動執行搜尋，無需手動點擊

✅ **智能填充** - 搜尋框自動填充為輸入框的文字

✅ **多語言支持** - 支持英文、中文等任何文字

✅ **向後兼容** - 不傳遞搜尋詞時使用默認值 "education"

✅ **動態更新** - 輸入框文字改變時，重新打開模態框會使用新的搜尋詞

## 代碼示例

### 在其他組件中使用

```typescript
import ImagePicker from '@/components/image-picker';

// 使用自動搜尋功能
<ImagePicker
  onSelect={handleImageSelect}
  onClose={() => setShowImagePicker(false)}
  initialSearchQuery="apple"  // 自動搜尋 "apple"
/>

// 不使用自動搜尋功能（使用默認值）
<ImagePicker
  onSelect={handleImageSelect}
  onClose={() => setShowImagePicker(false)}
/>
```

## 工作原理

1. **初始化**：ImagePicker 接收 `initialSearchQuery` prop
2. **傳遞**：將其傳遞給 SearchTab 組件
3. **設置**：SearchTab 初始化搜尋詞為 `initialSearchQuery || 'education'`
4. **監聽**：useEffect 監聽 `initialSearchQuery` 變化
5. **更新**：當 `initialSearchQuery` 改變時，更新搜尋詞
6. **搜尋**：搜尋詞改變時，自動執行 `searchPhotos()` 函數
7. **顯示**：搜尋結果自動加載並顯示

## 測試方法

### 快速測試
1. 打開詞彙編輯頁面
2. 輸入 "cat"
3. 點擊圖片圖標
4. 驗證搜尋框顯示 "cat"
5. 驗證圖片結果已加載

### 完整測試
- 英文單字搜尋 ✓
- 中文單字搜尋 ✓
- 空搜尋詞使用默認值 ✓
- 更新搜尋詞後重新搜尋 ✓

## 常見問題

### Q: 搜尋框為什麼沒有自動填充？
A: 檢查是否正確傳遞了 `initialSearchQuery` prop，以及輸入框中是否有文字。

### Q: 為什麼圖片沒有自動加載？
A: 檢查 Unsplash API 是否可用，以及搜尋詞是否有效。

### Q: 如何禁用自動搜尋功能？
A: 不傳遞 `initialSearchQuery` prop，或傳遞空字符串。

## 相關文檔

- `docs/IMAGE_PICKER_AUTO_SEARCH_FEATURE.md` - 詳細功能文檔
- `IMPLEMENTATION_SUMMARY_IMAGE_PICKER_AUTO_SEARCH.md` - 實現總結
- `VERIFICATION_CHECKLIST_IMAGE_PICKER_AUTO_SEARCH.md` - 驗證清單
- `tests/image-picker-auto-search.spec.ts` - 測試用例

## 支持

如有問題或建議，請聯繫開發團隊。

