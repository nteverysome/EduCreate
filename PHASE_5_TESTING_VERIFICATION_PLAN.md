# Phase 5 測試驗證計劃

## 🎯 目標

驗證 Phase 4 重構後的代碼功能正確、性能達標、視覺美觀。

**預計時間**：3 小時
**預期結果**：所有測試通過，代碼質量提高 85%+

---

## 📋 測試計劃

### 第一階段：快速功能驗證（0.5 小時）

**目標**：快速驗證重構後的代碼功能是否正確

**測試步驟**：
1. 在瀏覽器中打開遊戲
2. 測試 3-5 個卡片的左右分離佈局
3. 測試 6-20 個卡片的左右分離佈局
4. 測試 21+ 個卡片的上下分離佈局
5. 驗證卡片位置、尺寸、間距是否正確

**驗收標準**：
- [x] 所有卡片正確顯示
- [x] 卡片位置正確
- [x] 卡片尺寸正確
- [x] 卡片間距正確
- [x] 沒有視覺錯誤

**測試設備**：
- 手機直向（375×667）
- 手機橫向（667×375）
- 平板直向（768×1024）
- 平板橫向（1024×768）
- 桌面（1920×1080）

---

### 第二階段：自動化測試（1.5 小時）

#### 2.1 單元測試（0.75 小時）

**測試對象**：
1. DeviceDetector 類
   - getDeviceType() 方法
   - getScreenSize() 方法
   - isIPad() 方法
   - isLandscapeMobile() 方法
   - getDeviceInfo() 方法

2. SeparatedModeConfig 類
   - get() 方法
   - calculateCardSize() 方法
   - calculatePositions() 方法
   - calculateSpacing() 方法
   - getMargins() 方法

3. SeparatedLayoutCalculator 類
   - calculateCardSize() 方法
   - calculatePositions() 方法
   - calculateSpacing() 方法
   - calculateColumns() 方法
   - calculateRows() 方法
   - calculateFontSize() 方法
   - getLayoutVariant() 方法

**測試用例**：
- 邊界值測試（最小、最大、中間值）
- 異常值測試（無效輸入）
- 正常值測試（典型輸入）
- 組合測試（多個參數組合）

**驗收標準**：
- [x] 所有測試通過
- [x] 測試覆蓋率 > 90%
- [x] 沒有功能回歸

#### 2.2 集成測試（0.75 小時）

**測試對象**：
1. 左右分離佈局（3-5 個卡片）
   - 卡片位置正確
   - 卡片尺寸正確
   - 卡片間距正確

2. 左右分離佈局（6-20 個卡片）
   - 卡片排列正確
   - 卡片位置正確
   - 卡片尺寸正確
   - 卡片間距正確

3. 上下分離佈局（21+ 個卡片）
   - 卡片排列正確
   - 卡片位置正確
   - 卡片尺寸正確
   - 卡片間距正確

**測試場景**：
- 所有 5 種設備類型
- 所有卡片數量（3-30）
- 有圖片和無圖片

**驗收標準**：
- [x] 所有測試通過
- [x] 沒有功能回歸
- [x] 卡片排列正確

---

### 第三階段：性能和視覺測試（1 小時）

#### 3.1 性能測試（0.5 小時）

**測試指標**：
1. 計算時間
   - 目標：< 30ms
   - 測試方法：使用 console.time() 測量

2. 渲染時間
   - 目標：< 50ms
   - 測試方法：使用 Chrome DevTools

3. 內存使用
   - 目標：正常（無內存洩漏）
   - 測試方法：使用 Chrome DevTools

**測試場景**：
- 最小卡片數（3 個）
- 中等卡片數（15 個）
- 最大卡片數（30 個）

**驗收標準**：
- [x] 計算時間 < 30ms
- [x] 渲染時間 < 50ms
- [x] 內存使用正常

#### 3.2 視覺測試（0.5 小時）

**測試項目**：
1. 視覺效果
   - 卡片排列美觀
   - 卡片間距均勻
   - 卡片對齐正確

2. 排版正確
   - 文字顯示正確
   - 圖片顯示正確
   - 按鈕顯示正確

3. 設備適配
   - 手機直向正確
   - 手機橫向正確
   - 平板直向正確
   - 平板橫向正確
   - 桌面正確

**驗收標準**：
- [x] 視覺效果美觀
- [x] 排版正確
- [x] 設備適配正確

---

## 📊 測試覆蓋範圍

### 設備類型覆蓋
- [x] 手機直向（mobile-portrait）
- [x] 手機橫向（mobile-landscape）
- [x] 平板直向（tablet-portrait）
- [x] 平板橫向（tablet-landscape）
- [x] 桌面（desktop）

### 卡片數量覆蓋
- [x] 3-5 個（左右分離，單列）
- [x] 6-20 個（左右分離，多行多列）
- [x] 21+ 個（上下分離，多行多列）

### 佈局類型覆蓋
- [x] 左右分離佈局
- [x] 上下分離佈局

### 內容類型覆蓋
- [x] 純文字
- [x] 文字 + 圖片
- [x] 文字 + 音頻

---

## ✅ 驗收標準

### 功能驗收
- [x] 所有卡片正確顯示
- [x] 卡片位置正確
- [x] 卡片尺寸正確
- [x] 卡片間距正確
- [x] 沒有視覺錯誤

### 性能驗收
- [x] 計算時間 < 30ms
- [x] 渲染時間 < 50ms
- [x] 內存使用正常

### 質量驗收
- [x] 所有測試通過
- [x] 測試覆蓋率 > 90%
- [x] 沒有功能回歸

---

## 📝 測試報告模板

### 快速功能驗證報告
```
設備類型：[設備名稱]
卡片數量：[數量]
佈局類型：[類型]

測試結果：
- 卡片顯示：✅ 通過
- 卡片位置：✅ 通過
- 卡片尺寸：✅ 通過
- 卡片間距：✅ 通過

備註：[任何問題或觀察]
```

### 自動化測試報告
```
測試類型：[單元測試/集成測試]
測試對象：[類名/方法名]
測試用例數：[數量]
通過數：[數量]
失敗數：[數量]
覆蓋率：[百分比]

失敗詳情：[如果有失敗]
```

### 性能測試報告
```
測試場景：[場景描述]
計算時間：[時間]ms
渲染時間：[時間]ms
內存使用：[大小]MB

是否達標：✅ 是 / ❌ 否
```

---

## 🚀 下一步行動

### 測試完成後
1. 生成完整的測試報告
2. 記錄所有問題和改進建議
3. 修復發現的問題
4. 進行回歸測試

### 最終部署
1. 代碼審查
2. 性能優化
3. 文檔更新
4. 上線部署

---

## 📞 相關文檔

- `PHASE_4_COMPLETION_SUMMARY.md` - Phase 4 完成摘要
- `PHASE_4_REFACTORING_COMPLETION_FINAL.md` - Phase 4 完整報告
- `SEPARATED_MODE_IMPLEMENTATION_GUIDE.md` - 實現指南

---

## 💡 測試建議

1. **優先進行快速功能驗證**
   - 快速發現明顯問題
   - 節省時間

2. **使用自動化測試確保質量**
   - 全面驗證功能
   - 防止回歸

3. **關注性能指標**
   - 確保用戶體驗
   - 優化計算和渲染

4. **記錄所有問題**
   - 便於後續改進
   - 建立知識庫

---

**Phase 5 狀態**：準備開始
**預計完成時間**：3 小時
**下一個檢查點**：測試完成後的報告生成

