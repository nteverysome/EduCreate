var e,o,n,t=Object.defineProperty;import{P as i}from"./chunks/phaser-CIjcVCQt.js";import{G as r}from"./chunks/scenes-CmW7m_tD.js";import"./chunks/managers-p0q_KFKn.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)}).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?o.credentials="include":"anonymous"===e.crossOrigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();class a{static getOptimizedConfig(e){const o={...this.DEFAULT_CONFIG,...e};return{type:Phaser.AUTO,width:o.baseWidth,height:o.baseHeight,parent:"game-container",backgroundColor:"transparent",scale:{mode:o.scaleMode,autoCenter:o.autoCenter,width:o.baseWidth,height:o.baseHeight,min:{width:o.minWidth,height:o.minHeight},max:{width:o.maxWidth,height:o.maxHeight},zoom:1,resizeInterval:500},physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!1}},render:{antialias:!0,pixelArt:!1,roundPixels:!1,transparent:!1,clearBeforeRender:!0,preserveDrawingBuffer:!1,premultipliedAlpha:!0,failIfMajorPerformanceCaveat:!1,powerPreference:"default"},audio:{disableWebAudio:!1,context:!1,noAudio:!1},input:{keyboard:!0,mouse:!0,touch:!0,gamepad:!1},dom:{createContainer:!1},plugins:{global:[],scene:[]}}}static getFullscreenConfig(){return this.getOptimizedConfig({scaleMode:Phaser.Scale.RESIZE,autoCenter:Phaser.Scale.CENTER_BOTH,enableResponsive:!0,smoothScaling:!0})}static getMobileConfig(){return this.getOptimizedConfig({scaleMode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,minWidth:320,minHeight:240,maxWidth:768,maxHeight:1024})}static getAdaptiveConfig(){switch(this.getViewportInfo().deviceType){case"mobile":return this.getMobileConfig();case"tablet":return this.getOptimizedConfig({scaleMode:Phaser.Scale.FIT,maxWidth:1024,maxHeight:768});default:return this.getOptimizedConfig()}}static getViewportInfo(){const e=window.innerWidth,o=window.innerHeight;let n="desktop";return e<768?n="mobile":e<1024&&(n="tablet"),{width:e,height:o,deviceType:n,aspectRatio:e/o,isLandscape:e>o,isPortrait:o>e}}static compareConfigs(){console.log("📊 Phaser 3 縮放模式比較:"),console.log(""),console.log("🔧 FIT 模式 (當前):"),console.log("  ✅ 保持寬高比，無變形"),console.log("  ✅ 自動居中，視覺穩定"),console.log("  ❌ 可能有黑邊"),console.log("  ❌ 無法充分利用大屏幕"),console.log(""),console.log("🔧 RESIZE 模式:"),console.log("  ✅ 充分利用屏幕空間"),console.log("  ✅ 無黑邊，完全填滿"),console.log("  ❌ 可能變形，需要額外處理"),console.log("  ❌ 複雜度較高"),console.log(""),console.log("💡 建議: 保持 FIT 模式 + 響應式管理器")}static monitorPerformance(e){if(!e)return;const o={fps:0,memory:0,drawCalls:0};return e.loop.on("step",()=>{o.fps=Math.round(e.loop.actualFps)}),performance.memory&&(o.memory=Math.round(performance.memory.usedJSHeapSize/1024/1024)),console.log("📈 性能監控已啟動:",o),o}}e=a,o="DEFAULT_CONFIG",n={baseWidth:1274,baseHeight:739,scaleMode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,minWidth:320,minHeight:240,maxWidth:1920,maxHeight:1080,enableResponsive:!0,smoothScaling:!0,maintainAspectRatio:!0},((e,o,n)=>{o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n})(e,"symbol"!=typeof o?o+"":o,n);async function s(){console.log("🎮 初始化 Airplane Collision Game - Vite 版本");try{console.log("🔧 開始初始化流程...");const e=document.getElementById("loading");e&&(e.style.display="none",console.log("✅ 載入畫面已隱藏")),console.log("📦 載入遊戲場景...");const o=await(async()=>(console.log("✅ GameScene 直接導入成功"),r))();console.log("✅ 遊戲場景載入完成:",o.name),console.log("⚙️ 設置遊戲配置...");const n={geptLevel:"elementary",enableSound:!0,enableHapticFeedback:!0,difficulty:"medium",gameMode:"practice"};console.log("✅ 遊戲配置設置完成"),console.log("🎯 獲取響應式 Phaser 配置...");const t=a.getAdaptiveConfig();console.log("✅ 響應式配置獲取完成"),console.log("🎬 設置場景到配置..."),t.scene=o,console.log("✅ 場景設置完成"),console.log("📊 顯示配置比較..."),a.compareConfigs(),console.log("✅ 配置比較完成"),console.log("🎮 創建 Phaser 遊戲實例...");const s=new i.Game(t);return console.log("✅ Phaser 遊戲實例創建完成"),console.log("📋 傳遞配置給場景..."),s.registry.set("gameConfig",n),console.log("✅ 配置傳遞完成"),s.events.on("error",e=>{console.error("❌ Phaser 遊戲錯誤:",e)}),s.events.once("ready",()=>{console.log("✅ Airplane Collision Game 初始化完成"),window.parent!==window&&window.parent.postMessage({type:"GAME_READY",timestamp:Date.now()},"*")}),"undefined"!=typeof window&&(window.phaserGame=s),s}catch(e){console.error("❌ 遊戲初始化失敗:",e);const o=document.getElementById("game-container");throw o&&(o.innerHTML=`\n        <div style="\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          height: 100%;\n          color: white;\n          text-align: center;\n          padding: 20px;\n        ">\n          <h2 style="color: #ff6b6b; margin-bottom: 16px;">⚠️ 遊戲載入失敗</h2>\n          <p style="margin-bottom: 16px;">無法初始化 Phaser 遊戲引擎</p>\n          <p style="font-size: 14px; opacity: 0.7;">${e instanceof Error?e.message:"未知錯誤"}</p>\n          <button \n            onclick="location.reload()" \n            style="\n              margin-top: 20px;\n              padding: 10px 20px;\n              background: #4CAF50;\n              color: white;\n              border: none;\n              border-radius: 4px;\n              cursor: pointer;\n            "\n          >\n            重新載入\n          </button>\n        </div>\n      `),e}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s();
//# sourceMappingURL=main-Dic2uEC7.js.map
