{"version":3,"file":"managers-p0q_KFKn.js","sources":["../../src/managers/GEPTManager.ts","../../src/managers/CollisionDetectionSystem.ts","../../src/managers/MemoryEnhancementEngine.ts"],"sourcesContent":["/**\r\n * GEPTManager - GEPTÂàÜÁ¥öÂíåÂÖßÂÆπÊ®°ÊùøÁÆ°ÁêÜÁ≥ªÁµ±\r\n * ÈÅ∑ÁßªÂà∞ Vite + Phaser 3 Â∞àÊ°à\r\n */\r\n\r\nexport type GEPTLevel = 'elementary' | 'intermediate' | 'high-intermediate';\r\n\r\nexport interface GEPTWord {\r\n  id: string;\r\n  english: string;\r\n  chinese: string;\r\n  level: GEPTLevel;\r\n  frequency: number; // ‰ΩøÁî®È†ªÁéá 1-100\r\n  difficulty?: number; // Èõ£Â∫¶ 1-10\r\n  partOfSpeech?: string;\r\n  pronunciation?: string;\r\n  category?: string;\r\n}\r\n\r\nexport interface ValidationResult {\r\n  isValid: boolean;\r\n  errors: ValidationError[];\r\n  warnings: ValidationWarning[];\r\n  suggestions: string[];\r\n  geptCompliance: {\r\n    level: GEPTLevel;\r\n    score: number; // 0-100\r\n    issues: string[];\r\n  };\r\n}\r\n\r\nexport interface ValidationError {\r\n  type: 'grammar' | 'spelling' | 'format' | 'gept-compliance';\r\n  message: string;\r\n  position?: { start: number; end: number };\r\n  severity: 'error' | 'warning' | 'info';\r\n  suggestion?: string;\r\n}\r\n\r\nexport interface ValidationWarning {\r\n  type: 'complexity' | 'vocabulary' | 'structure';\r\n  message: string;\r\n  suggestion: string;\r\n}\r\n\r\n/**\r\n * GEPT ÁÆ°ÁêÜÂô®È°û\r\n */\r\nexport class GEPTManager {\r\n  private wordDatabase: Map<GEPTLevel, GEPTWord[]> = new Map();\r\n  private currentLevel: GEPTLevel = 'elementary';\r\n\r\n  constructor() {\r\n    this.initializeWordDatabase();\r\n  }\r\n\r\n  /**\r\n   * ÂàùÂßãÂåñË©ûÂΩôÊï∏ÊìöÂ∫´\r\n   */\r\n  private initializeWordDatabase(): void {\r\n    // Elementary Á¥öÂà•Ë©ûÂΩô\r\n    const elementaryWords: GEPTWord[] = [\r\n      { id: '1', english: 'hello', chinese: '‰Ω†Â•Ω', level: 'elementary', frequency: 100 },\r\n      { id: '2', english: 'world', chinese: '‰∏ñÁïå', level: 'elementary', frequency: 95 },\r\n      { id: '3', english: 'book', chinese: 'Êõ∏', level: 'elementary', frequency: 90 },\r\n      { id: '4', english: 'school', chinese: 'Â≠∏Ê†°', level: 'elementary', frequency: 85 },\r\n      { id: '5', english: 'friend', chinese: 'ÊúãÂèã', level: 'elementary', frequency: 80 },\r\n      { id: '6', english: 'family', chinese: 'ÂÆ∂Â∫≠', level: 'elementary', frequency: 85 },\r\n      { id: '7', english: 'house', chinese: 'ÊàøÂ≠ê', level: 'elementary', frequency: 82 },\r\n      { id: '8', english: 'water', chinese: 'Ê∞¥', level: 'elementary', frequency: 88 },\r\n      { id: '9', english: 'food', chinese: 'È£üÁâ©', level: 'elementary', frequency: 86 },\r\n      { id: '10', english: 'time', chinese: 'ÊôÇÈñì', level: 'elementary', frequency: 92 }\r\n    ];\r\n\r\n    // Intermediate Á¥öÂà•Ë©ûÂΩô\r\n    const intermediateWords: GEPTWord[] = [\r\n      { id: '11', english: 'environment', chinese: 'Áí∞Â¢É', level: 'intermediate', frequency: 75 },\r\n      { id: '12', english: 'technology', chinese: 'ÊäÄË°ì', level: 'intermediate', frequency: 78 },\r\n      { id: '13', english: 'education', chinese: 'ÊïôËÇ≤', level: 'intermediate', frequency: 80 },\r\n      { id: '14', english: 'government', chinese: 'ÊîøÂ∫ú', level: 'intermediate', frequency: 72 },\r\n      { id: '15', english: 'economy', chinese: 'Á∂ìÊøü', level: 'intermediate', frequency: 70 }\r\n    ];\r\n\r\n    // High-Intermediate Á¥öÂà•Ë©ûÂΩô\r\n    const highIntermediateWords: GEPTWord[] = [\r\n      { id: '16', english: 'sophisticated', chinese: 'Ë§áÈõúÁöÑ', level: 'high-intermediate', frequency: 60 },\r\n      { id: '17', english: 'phenomenon', chinese: 'ÁèæË±°', level: 'high-intermediate', frequency: 58 },\r\n      { id: '18', english: 'hypothesis', chinese: 'ÂÅáË®≠', level: 'high-intermediate', frequency: 55 },\r\n      { id: '19', english: 'methodology', chinese: 'ÊñπÊ≥ïË´ñ', level: 'high-intermediate', frequency: 52 },\r\n      { id: '20', english: 'comprehensive', chinese: 'ÂÖ®Èù¢ÁöÑ', level: 'high-intermediate', frequency: 65 }\r\n    ];\r\n\r\n    this.wordDatabase.set('elementary', elementaryWords);\r\n    this.wordDatabase.set('intermediate', intermediateWords);\r\n    this.wordDatabase.set('high-intermediate', highIntermediateWords);\r\n\r\n    console.log('üìö GEPT Ë©ûÂΩôÊï∏ÊìöÂ∫´ÂàùÂßãÂåñÂÆåÊàê');\r\n  }\r\n\r\n  /**\r\n   * Ë®≠ÁΩÆÁï∂Ââç GEPT Á≠âÁ¥ö\r\n   */\r\n  setLevel(level: GEPTLevel): void {\r\n    this.currentLevel = level;\r\n    console.log(`üìä Ë®≠ÁΩÆ GEPT Á≠âÁ¥ö: ${level}`);\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÁï∂ÂâçÁ≠âÁ¥ö\r\n   */\r\n  getCurrentLevel(): GEPTLevel {\r\n    return this.currentLevel;\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÊåáÂÆöÁ≠âÁ¥öÁöÑË©ûÂΩô\r\n   */\r\n  getWordsForLevel(level: GEPTLevel): GEPTWord[] {\r\n    return this.wordDatabase.get(level) || [];\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÁï∂ÂâçÁ≠âÁ¥öÁöÑË©ûÂΩô\r\n   */\r\n  getCurrentLevelWords(): GEPTWord[] {\r\n    return this.getWordsForLevel(this.currentLevel);\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÈö®Ê©üË©ûÂΩô\r\n   */\r\n  getRandomWord(level?: GEPTLevel): GEPTWord | null {\r\n    // È¶ñÂÖàÂòóË©¶Âæû VocabularyIntegrationService Áç≤ÂèñË©ûÂΩô\r\n    const customVocabulary = this.getCustomVocabulary();\r\n    if (customVocabulary.length > 0) {\r\n      console.log('üéØ ‰ΩøÁî®Ëá™ÂÆöÁæ©Ë©ûÂΩô:', customVocabulary.length, 'ÂÄãË©ûÂΩô');\r\n      return customVocabulary[Math.floor(Math.random() * customVocabulary.length)];\r\n    }\r\n\r\n    // Â¶ÇÊûúÊ≤íÊúâËá™ÂÆöÁæ©Ë©ûÂΩôÔºå‰ΩøÁî®È†êË®≠Ë©ûÂΩô\r\n    const targetLevel = level || this.currentLevel;\r\n    const words = this.getWordsForLevel(targetLevel);\r\n\r\n    if (words.length === 0) {\r\n      console.warn(`‚ö†Ô∏è Ê≤íÊúâÊâæÂà∞ ${targetLevel} Á≠âÁ¥öÁöÑË©ûÂΩô`);\r\n      return null;\r\n    }\r\n\r\n    const randomIndex = Math.floor(Math.random() * words.length);\r\n    return words[randomIndex];\r\n  }\r\n\r\n  /**\r\n   * Âæû VocabularyIntegrationService Áç≤ÂèñËá™ÂÆöÁæ©Ë©ûÂΩô\r\n   */\r\n  private getCustomVocabulary(): GEPTWord[] {\r\n    try {\r\n      const vocabularyData = localStorage.getItem('vocabulary_integration_data');\r\n      if (!vocabularyData) return [];\r\n\r\n      const parsed = JSON.parse(vocabularyData);\r\n      if (!parsed.vocabulary || !Array.isArray(parsed.vocabulary)) return [];\r\n\r\n      // ËΩâÊèõÁÇ∫ GEPTWord Ê†ºÂºè\r\n      return parsed.vocabulary.map((item: any, index: number) => ({\r\n        id: (index + 1000).toString(), // ‰ΩøÁî®È´ò ID ÈÅøÂÖçË°ùÁ™Å\r\n        english: item.english,\r\n        chinese: item.chinese,\r\n        level: item.level || 'elementary',\r\n        frequency: item.frequency || 80,\r\n        difficulty: item.difficulty || 3,\r\n        partOfSpeech: item.partOfSpeech || 'noun',\r\n        category: item.category || 'custom'\r\n      }));\r\n    } catch (error) {\r\n      console.warn('‚ö†Ô∏è ÁÑ°Ê≥ïËÆÄÂèñËá™ÂÆöÁæ©Ë©ûÂΩô:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÂ§öÂÄãÈö®Ê©üË©ûÂΩô\r\n   */\r\n  getRandomWords(count: number, level?: GEPTLevel): GEPTWord[] {\r\n    // È¶ñÂÖàÂòóË©¶ÂæûËá™ÂÆöÁæ©Ë©ûÂΩôÁç≤Âèñ\r\n    const customVocabulary = this.getCustomVocabulary();\r\n    if (customVocabulary.length > 0) {\r\n      console.log('üéØ ‰ΩøÁî®Ëá™ÂÆöÁæ©Ë©ûÂΩôÁç≤ÂèñÂ§öÂÄãË©ûÂΩô:', customVocabulary.length, 'ÂÄãÂèØÁî®');\r\n      const shuffled = [...customVocabulary].sort(() => 0.5 - Math.random());\r\n      return shuffled.slice(0, Math.min(count, customVocabulary.length));\r\n    }\r\n\r\n    // Â¶ÇÊûúÊ≤íÊúâËá™ÂÆöÁæ©Ë©ûÂΩôÔºå‰ΩøÁî®È†êË®≠Ë©ûÂΩô\r\n    const targetLevel = level || this.currentLevel;\r\n    const words = this.getWordsForLevel(targetLevel);\r\n\r\n    if (words.length === 0) return [];\r\n\r\n    const shuffled = [...words].sort(() => 0.5 - Math.random());\r\n    return shuffled.slice(0, Math.min(count, words.length));\r\n  }\r\n\r\n  /**\r\n   * Ê†πÊìö ID Êü•ÊâæË©ûÂΩô\r\n   */\r\n  findWordById(id: string): GEPTWord | null {\r\n    for (const [level, words] of this.wordDatabase) {\r\n      const word = words.find(w => w.id === id);\r\n      if (word) return word;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Ê†πÊìöËã±ÊñáÂñÆÂ≠óÊü•ÊâæË©ûÂΩô\r\n   */\r\n  findWordByEnglish(english: string): GEPTWord | null {\r\n    for (const [level, words] of this.wordDatabase) {\r\n      const word = words.find(w => w.english.toLowerCase() === english.toLowerCase());\r\n      if (word) return word;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * È©óË≠âË©ûÂΩôÊòØÂê¶Á¨¶Âêà GEPT Ê®ôÊ∫ñ\r\n   */\r\n  validateWord(word: string, level: GEPTLevel): ValidationResult {\r\n    const foundWord = this.findWordByEnglish(word);\r\n    \r\n    if (!foundWord) {\r\n      return {\r\n        isValid: false,\r\n        errors: [{\r\n          type: 'gept-compliance',\r\n          message: `Ë©ûÂΩô \"${word}\" ‰∏çÂú® GEPT ${level} Ë©ûÂΩôË°®‰∏≠`,\r\n          severity: 'error',\r\n          suggestion: 'Ë´ã‰ΩøÁî® GEPT Ê®ôÊ∫ñË©ûÂΩô'\r\n        }],\r\n        warnings: [],\r\n        suggestions: [],\r\n        geptCompliance: {\r\n          level,\r\n          score: 0,\r\n          issues: [`Ë©ûÂΩô \"${word}\" Êú™ÊâæÂà∞`]\r\n        }\r\n      };\r\n    }\r\n\r\n    const isCorrectLevel = foundWord.level === level;\r\n    \r\n    return {\r\n      isValid: isCorrectLevel,\r\n      errors: isCorrectLevel ? [] : [{\r\n        type: 'gept-compliance',\r\n        message: `Ë©ûÂΩô \"${word}\" Â±¨Êñº ${foundWord.level} Á≠âÁ¥öÔºå‰∏çÁ¨¶Âêà ${level} Á≠âÁ¥öË¶ÅÊ±Ç`,\r\n        severity: 'warning',\r\n        suggestion: `Âª∫Ë≠∞‰ΩøÁî® ${level} Á≠âÁ¥öË©ûÂΩô`\r\n      }],\r\n      warnings: [],\r\n      suggestions: [],\r\n      geptCompliance: {\r\n        level: foundWord.level,\r\n        score: isCorrectLevel ? 100 : 50,\r\n        issues: isCorrectLevel ? [] : [`Á≠âÁ¥ö‰∏çÂåπÈÖç: ${foundWord.level} vs ${level}`]\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñË©ûÂΩôÁµ±Ë®à‰ø°ÊÅØ\r\n   */\r\n  getStatistics(): { [key in GEPTLevel]: number } {\r\n    return {\r\n      elementary: this.wordDatabase.get('elementary')?.length || 0,\r\n      intermediate: this.wordDatabase.get('intermediate')?.length || 0,\r\n      'high-intermediate': this.wordDatabase.get('high-intermediate')?.length || 0\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Ê∑ªÂä†Êñ∞Ë©ûÂΩô\r\n   */\r\n  addWord(word: GEPTWord): boolean {\r\n    const words = this.wordDatabase.get(word.level);\r\n    if (!words) return false;\r\n\r\n    // Ê™¢Êü•ÊòØÂê¶Â∑≤Â≠òÂú®\r\n    const exists = words.some(w => w.english.toLowerCase() === word.english.toLowerCase());\r\n    if (exists) {\r\n      console.warn(`‚ö†Ô∏è Ë©ûÂΩô \"${word.english}\" Â∑≤Â≠òÂú®`);\r\n      return false;\r\n    }\r\n\r\n    words.push(word);\r\n    console.log(`‚úÖ Ê∑ªÂä†Ë©ûÂΩô: ${word.english} (${word.level})`);\r\n    return true;\r\n  }\r\n}\r\n","/**\r\n * Á¢∞ÊíûÊ™¢Ê∏¨Á≥ªÁµ± - Vite + Phaser 3 ÁâàÊú¨\r\n * Ë≤†Ë≤¨ËôïÁêÜÈ£õÊ©üËàáÈõ≤ÊúµÁöÑÁ¢∞ÊíûÊ™¢Ê∏¨„ÄÅÁâπÊïàËß∏ÁôºÂíåÂ≠∏ÁøíÊï∏ÊìöË®òÈåÑ\r\n */\r\n\r\nimport Phaser from 'phaser';\r\nimport { GEPTWord, GEPTLevel } from './GEPTManager';\r\n\r\nexport interface CollisionEvent {\r\n  type: 'correct' | 'incorrect' | 'neutral';\r\n  cloudWord: string;\r\n  targetWord: string;\r\n  responseTime: number;\r\n  timestamp: number;\r\n  playerPosition: { x: number; y: number };\r\n  cloudPosition: { x: number; y: number };\r\n}\r\n\r\nexport interface CollisionEffectConfig {\r\n  enableParticles: boolean;\r\n  enableScreenShake: boolean;\r\n  enableSoundEffects: boolean;\r\n  enableVisualFeedback: boolean;\r\n  particleIntensity: 'low' | 'medium' | 'high';\r\n  soundVolume: number;\r\n}\r\n\r\n/**\r\n * Á¢∞ÊíûÊ™¢Ê∏¨Á≥ªÁµ±\r\n */\r\nexport class CollisionDetectionSystem {\r\n  private scene: Phaser.Scene;\r\n  private geptLevel: GEPTLevel;\r\n  private effectConfig: CollisionEffectConfig;\r\n\r\n  // ÁõÆÊ®ôË©ûÂΩôÁÆ°ÁêÜ\r\n  private targetEnglishWord: string = '';\r\n  private targetChineseWord: string = '';\r\n  private targetSetTime: number = 0;\r\n\r\n  // Áµ±Ë®àÊï∏Êìö\r\n  private collisionHistory: CollisionEvent[] = [];\r\n  private correctCollisions: number = 0;\r\n  private incorrectCollisions: number = 0;\r\n\r\n  // ÁâπÊïàÁ≥ªÁµ±\r\n  private particles?: Phaser.GameObjects.Particles.ParticleEmitter;\r\n  private screenShakeIntensity: number = 0;\r\n\r\n  constructor(\r\n    scene: Phaser.Scene,\r\n    geptLevel: GEPTLevel,\r\n    effectConfig: CollisionEffectConfig\r\n  ) {\r\n    this.scene = scene;\r\n    this.geptLevel = geptLevel;\r\n    this.effectConfig = effectConfig;\r\n    \r\n    this.initializeEffectSystems();\r\n    console.log('üéØ Á¢∞ÊíûÊ™¢Ê∏¨Á≥ªÁµ±ÂàùÂßãÂåñÂÆåÊàê');\r\n  }\r\n\r\n  /**\r\n   * ÂàùÂßãÂåñÁâπÊïàÁ≥ªÁµ±\r\n   */\r\n  private initializeEffectSystems(): void {\r\n    if (this.effectConfig.enableParticles) {\r\n      this.initializeParticleSystem();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÂàùÂßãÂåñÁ≤íÂ≠êÁ≥ªÁµ±\r\n   */\r\n  private initializeParticleSystem(): void {\r\n    // ÂâµÂª∫Á≤íÂ≠êÁ¥ãÁêÜ\r\n    const graphics = this.scene.add.graphics();\r\n    graphics.fillStyle(0xffffff);\r\n    graphics.fillCircle(4, 4, 4);\r\n    graphics.generateTexture('particle', 8, 8);\r\n    graphics.destroy();\r\n\r\n    console.log('‚ú® Á≤íÂ≠êÁ≥ªÁµ±ÂàùÂßãÂåñÂÆåÊàê');\r\n  }\r\n\r\n  /**\r\n   * Ë®≠ÁΩÆÁõÆÊ®ôË©ûÂΩô\r\n   */\r\n  setTargetWord(englishWord: string, chineseWord: string): void {\r\n    this.targetEnglishWord = englishWord;\r\n    this.targetChineseWord = chineseWord;\r\n    this.targetSetTime = Date.now();\r\n    \r\n    console.log(`üéØ Ë®≠ÁΩÆÁõÆÊ®ôË©ûÂΩô: ${englishWord} (${chineseWord})`);\r\n  }\r\n\r\n  /**\r\n   * ËôïÁêÜÁ¢∞Êíû‰∫ã‰ª∂\r\n   */\r\n  handleCollision(\r\n    player: Phaser.GameObjects.GameObject,\r\n    cloud: Phaser.GameObjects.GameObject,\r\n    cloudWord: GEPTWord\r\n  ): CollisionEvent {\r\n    const currentTime = Date.now();\r\n    const responseTime = currentTime - this.targetSetTime;\r\n    \r\n    // Âà§Êñ∑Á¢∞ÊíûÈ°ûÂûã\r\n    const isCorrect = cloudWord.english === this.targetEnglishWord;\r\n    const collisionType: 'correct' | 'incorrect' = isCorrect ? 'correct' : 'incorrect';\r\n    \r\n    // ÂâµÂª∫Á¢∞Êíû‰∫ã‰ª∂\r\n    const collisionEvent: CollisionEvent = {\r\n      type: collisionType,\r\n      cloudWord: cloudWord.english,\r\n      targetWord: this.targetEnglishWord,\r\n      responseTime,\r\n      timestamp: currentTime,\r\n      playerPosition: { x: (player as any).x, y: (player as any).y },\r\n      cloudPosition: { x: (cloud as any).x, y: (cloud as any).y }\r\n    };\r\n\r\n    // Ë®òÈåÑÁµ±Ë®à\r\n    if (isCorrect) {\r\n      this.correctCollisions++;\r\n    } else {\r\n      this.incorrectCollisions++;\r\n    }\r\n    \r\n    this.collisionHistory.push(collisionEvent);\r\n\r\n    // Ëß∏ÁôºÁâπÊïà\r\n    this.triggerCollisionEffects(collisionEvent, cloud as any);\r\n\r\n    console.log(`üí• Á¢∞ÊíûËôïÁêÜ: ${cloudWord.english} - ${collisionType}`);\r\n    \r\n    return collisionEvent;\r\n  }\r\n\r\n  /**\r\n   * Ëß∏ÁôºÁ¢∞ÊíûÁâπÊïà - ÂÑ™ÂåñÁâàÊú¨ÔºåÊ∏õÂ∞ëÈñÉÁàç\r\n   */\r\n  private triggerCollisionEffects(\r\n    event: CollisionEvent,\r\n    cloud: Phaser.GameObjects.GameObject\r\n  ): void {\r\n    const { x, y } = event.cloudPosition;\r\n\r\n    // Ë¶ñË¶∫ÂèçÈ•ã - ÊâÄÊúâÁ¢∞ÊíûÈÉΩÈ°ØÁ§∫\r\n    if (this.effectConfig.enableVisualFeedback && event.type !== 'neutral') {\r\n      this.createVisualFeedback(event.type, x, y);\r\n    }\r\n\r\n    // Ê†πÊìöÁ¢∞ÊíûÈ°ûÂûãÈÅ∏ÊìáÊÄßËß∏ÁôºÁâπÊïàÔºåÊ∏õÂ∞ëÈñÉÁàç\r\n    if (event.type === 'correct') {\r\n      // Ê≠£Á¢∫Á¢∞ÊíûÔºöÂè™È°ØÁ§∫Á≤íÂ≠êÁâπÊïàÂíåÈü≥ÊïàÔºå‰∏çÈúáÂãï\r\n      if (this.effectConfig.enableParticles) {\r\n        this.createParticleEffect(event.type, x, y);\r\n      }\r\n      if (this.effectConfig.enableSoundEffects) {\r\n        this.playSoundEffect(event.type);\r\n      }\r\n      console.log('‚úÖ Ê≠£Á¢∫Á¢∞ÊíûÔºöÊ∫´ÂíåÁâπÊïà');\r\n    } else if (event.type === 'incorrect') {\r\n      // ÈåØË™§Á¢∞ÊíûÔºöËºïÂæÆÈúáÂãï + Á≤íÂ≠êÁâπÊïà + Èü≥Êïà\r\n      if (this.effectConfig.enableParticles) {\r\n        this.createParticleEffect(event.type, x, y);\r\n      }\r\n      if (this.effectConfig.enableScreenShake) {\r\n        this.triggerScreenShake(event.type);\r\n      }\r\n      if (this.effectConfig.enableSoundEffects) {\r\n        this.playSoundEffect(event.type);\r\n      }\r\n      console.log('‚ùå ÈåØË™§Á¢∞ÊíûÔºöËºïÂæÆÈúáÂãïÁâπÊïà');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÂâµÂª∫Ë¶ñË¶∫ÂèçÈ•ã\r\n   */\r\n  private createVisualFeedback(type: 'correct' | 'incorrect', x: number, y: number): void {\r\n    const color = type === 'correct' ? '#00ff00' : '#ff0000';\r\n    const text = type === 'correct' ? '‚úì' : '‚úó';\r\n    \r\n    const feedback = this.scene.add.text(x, y, text, {\r\n      fontSize: '32px',\r\n      color: color,\r\n      fontStyle: 'bold'\r\n    }).setOrigin(0.5);\r\n\r\n    // ÂãïÁï´ÊïàÊûú\r\n    this.scene.tweens.add({\r\n      targets: feedback,\r\n      y: y - 50,\r\n      alpha: 0,\r\n      scale: 1.5,\r\n      duration: 1000,\r\n      ease: 'Power2',\r\n      onComplete: () => feedback.destroy()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ÂâµÂª∫Á≤íÂ≠êÁâπÊïà\r\n   */\r\n  private createParticleEffect(type: 'correct' | 'incorrect', x: number, y: number): void {\r\n    const color = type === 'correct' ? 0x00ff00 : 0xff0000;\r\n    const particleCount = this.getParticleCount();\r\n\r\n    // ÂâµÂª∫Ëá®ÊôÇÁ≤íÂ≠êÁôºÂ∞ÑÂô®\r\n    const emitter = this.scene.add.particles(x, y, 'particle', {\r\n      speed: { min: 50, max: 150 },\r\n      scale: { start: 0.5, end: 0 },\r\n      tint: color,\r\n      lifespan: 500,\r\n      quantity: particleCount\r\n    });\r\n\r\n    // Ëá™ÂãïÊ∏ÖÁêÜ\r\n    this.scene.time.delayedCall(1000, () => {\r\n      emitter.destroy();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÁ≤íÂ≠êÊï∏Èáè\r\n   */\r\n  private getParticleCount(): number {\r\n    switch (this.effectConfig.particleIntensity) {\r\n      case 'low': return 5;\r\n      case 'medium': return 10;\r\n      case 'high': return 20;\r\n      default: return 10;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ëß∏ÁôºËû¢ÂπïÈúáÂãï - ÂÑ™ÂåñÁâàÊú¨ÔºåÊ∏õÂ∞ëÈñÉÁàç\r\n   */\r\n  private triggerScreenShake(type: 'correct' | 'incorrect'): void {\r\n    // Â§ßÂπÖÈôç‰ΩéÈúáÂãïÂº∑Â∫¶ÂíåÊåÅÁ∫åÊôÇÈñì‰ª•Ê∏õÂ∞ëÈñÉÁàç\r\n    const intensity = type === 'correct' ? 1 : 3;  // Âæû 5/10 Èôç‰ΩéÂà∞ 1/3\r\n    const duration = type === 'correct' ? 100 : 200;  // Âæû 200/400 Èôç‰ΩéÂà∞ 100/200\r\n\r\n    // Á∞°ÂñÆÁöÑÁõ∏Ê©üÈúáÂãïÊïàÊûú\r\n    if (this.scene.cameras.main) {\r\n      this.scene.cameras.main.shake(duration, intensity);\r\n      console.log(`üì≥ Ëß∏Áôº${type === 'correct' ? 'ËºïÂæÆ' : 'Ê∫´Âíå'}ÈúáÂãï (Âº∑Â∫¶: ${intensity}, ÊôÇÈï∑: ${duration}ms)`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Êí≠ÊîæÈü≥Êïà\r\n   */\r\n  private playSoundEffect(type: 'correct' | 'incorrect'): void {\r\n    // ÈÄôË£°ÂèØ‰ª•Ê∑ªÂä†Èü≥ÊïàÊí≠ÊîæÈÇèËºØ\r\n    // ÁõÆÂâçÂè™Ë®òÈåÑÊó•Ë™å\r\n    const soundType = type === 'correct' ? 'Ê≠£Á¢∫Èü≥Êïà' : 'ÈåØË™§Èü≥Êïà';\r\n    console.log(`üîä Êí≠Êîæ${soundType} (Èü≥Èáè: ${this.effectConfig.soundVolume})`);\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÁµ±Ë®àÊï∏Êìö\r\n   */\r\n  getStatistics(): {\r\n    correctCollisions: number;\r\n    incorrectCollisions: number;\r\n    totalCollisions: number;\r\n    accuracy: number;\r\n    averageResponseTime: number;\r\n  } {\r\n    const totalCollisions = this.correctCollisions + this.incorrectCollisions;\r\n    const accuracy = totalCollisions > 0 ? (this.correctCollisions / totalCollisions) * 100 : 0;\r\n    \r\n    const totalResponseTime = this.collisionHistory.reduce((sum, event) => sum + event.responseTime, 0);\r\n    const averageResponseTime = this.collisionHistory.length > 0 ? totalResponseTime / this.collisionHistory.length : 0;\r\n\r\n    return {\r\n      correctCollisions: this.correctCollisions,\r\n      incorrectCollisions: this.incorrectCollisions,\r\n      totalCollisions,\r\n      accuracy: Math.round(accuracy * 100) / 100,\r\n      averageResponseTime: Math.round(averageResponseTime)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÁ¢∞ÊíûÊ≠∑Âè≤\r\n   */\r\n  getCollisionHistory(): CollisionEvent[] {\r\n    return [...this.collisionHistory];\r\n  }\r\n\r\n  /**\r\n   * ÈáçÁΩÆÁµ±Ë®àÊï∏Êìö\r\n   */\r\n  resetStatistics(): void {\r\n    this.correctCollisions = 0;\r\n    this.incorrectCollisions = 0;\r\n    this.collisionHistory = [];\r\n    console.log('üìä Á¢∞ÊíûÁµ±Ë®àÊï∏ÊìöÂ∑≤ÈáçÁΩÆ');\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞ÈÖçÁΩÆ\r\n   */\r\n  updateConfig(newConfig: Partial<CollisionEffectConfig>): void {\r\n    this.effectConfig = { ...this.effectConfig, ...newConfig };\r\n    console.log('‚öôÔ∏è Á¢∞ÊíûÊ™¢Ê∏¨ÈÖçÁΩÆÂ∑≤Êõ¥Êñ∞');\r\n  }\r\n\r\n  /**\r\n   * Èä∑ÊØÄÁ≥ªÁµ±\r\n   */\r\n  destroy(): void {\r\n    if (this.particles) {\r\n      this.particles.destroy();\r\n    }\r\n    this.collisionHistory = [];\r\n    console.log('üóëÔ∏è Á¢∞ÊíûÊ™¢Ê∏¨Á≥ªÁµ±Â∑≤Èä∑ÊØÄ');\r\n  }\r\n}\r\n","/**\r\n * Ë®òÊÜ∂Â¢ûÂº∑ÂºïÊìé - Vite + Phaser 3 ÁâàÊú¨\r\n * Âü∫ÊñºË®òÊÜ∂ÁßëÂ≠∏ÂéüÁêÜÁöÑÂ≠∏ÁøíÊïàÊûúÂÑ™ÂåñÁ≥ªÁµ±\r\n */\r\n\r\nexport interface MemoryType {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  cognitiveLoad: 'low' | 'medium' | 'high';\r\n  memorySystem: 'working' | 'short-term' | 'long-term' | 'procedural' | 'episodic';\r\n  neuralBasis: string[];\r\n  enhancementStrategies: string[];\r\n}\r\n\r\nexport interface MemoryConfiguration {\r\n  primaryMemoryType: string;\r\n  secondaryMemoryTypes: string[];\r\n  difficultyLevel: number; // 1-5\r\n  timeConstraints: {\r\n    enabled: boolean;\r\n    duration: number; // seconds\r\n    pressureLevel: 'low' | 'medium' | 'high';\r\n  };\r\n  repetitionSettings: {\r\n    spacedRepetition: boolean;\r\n    intervalMultiplier: number;\r\n    maxRepetitions: number;\r\n  };\r\n  feedbackMechanisms: {\r\n    immediate: boolean;\r\n    delayed: boolean;\r\n    explanatory: boolean;\r\n    emotional: boolean;\r\n  };\r\n}\r\n\r\nexport interface MemoryMetrics {\r\n  retentionRate: number; // 0-100\r\n  recallSpeed: number; // milliseconds\r\n  errorRate: number; // 0-100\r\n  cognitiveLoad: number; // 1-10\r\n  engagementLevel: number; // 1-10\r\n  learningEfficiency: number; // 0-100\r\n}\r\n\r\nexport interface LearningEvent {\r\n  wordId: string;\r\n  word: string;\r\n  timestamp: number;\r\n  responseTime: number;\r\n  isCorrect: boolean;\r\n  attemptNumber: number;\r\n  contextData: any;\r\n}\r\n\r\n/**\r\n * Ë®òÊÜ∂Â¢ûÂº∑ÂºïÊìé\r\n */\r\nexport class MemoryEnhancementEngine {\r\n  private memoryTypes: Map<string, MemoryType> = new Map();\r\n  private currentConfiguration: MemoryConfiguration;\r\n  private learningHistory: LearningEvent[] = [];\r\n  private memoryMetrics: MemoryMetrics;\r\n\r\n  constructor() {\r\n    this.initializeMemoryTypes();\r\n    this.currentConfiguration = this.getDefaultConfiguration();\r\n    this.memoryMetrics = this.getInitialMetrics();\r\n    \r\n    console.log('üß† Ë®òÊÜ∂Â¢ûÂº∑ÂºïÊìéÂàùÂßãÂåñÂÆåÊàê');\r\n  }\r\n\r\n  /**\r\n   * ÂàùÂßãÂåñË®òÊÜ∂È°ûÂûã\r\n   */\r\n  private initializeMemoryTypes(): void {\r\n    const memoryTypes: MemoryType[] = [\r\n      {\r\n        id: 'spatial-visual',\r\n        name: 'Á©∫ÈñìË¶ñË¶∫Ë®òÊÜ∂',\r\n        description: 'Âü∫ÊñºÁ©∫Èñì‰ΩçÁΩÆÂíåË¶ñË¶∫ÁâπÂæµÁöÑË®òÊÜ∂',\r\n        cognitiveLoad: 'medium',\r\n        memorySystem: 'working',\r\n        neuralBasis: ['Ë¶ñË¶∫ÁöÆÂ±§', 'È†ÇËëâÁöÆÂ±§'],\r\n        enhancementStrategies: ['Á©∫ÈñìÈÖçÁΩÆ', 'È°èËâ≤Á∑®Á¢º', 'Ë¶ñË¶∫ÊèêÁ§∫']\r\n      },\r\n      {\r\n        id: 'collision-reaction',\r\n        name: 'Á¢∞ÊíûÂèçÊáâË®òÊÜ∂',\r\n        description: 'Âü∫ÊñºÂãï‰ΩúÂèçÊáâÁöÑÁ®ãÂ∫èÊÄßË®òÊÜ∂',\r\n        cognitiveLoad: 'high',\r\n        memorySystem: 'procedural',\r\n        neuralBasis: ['Â∞èËÖ¶', 'Âü∫Â∫ïÁ•ûÁ∂ìÁØÄ'],\r\n        enhancementStrategies: ['ÈáçË§áÁ∑¥Áøí', 'Âç≥ÊôÇÂèçÈ•ã', 'ËÇåËÇâË®òÊÜ∂']\r\n      },\r\n      {\r\n        id: 'vocabulary-association',\r\n        name: 'Ë©ûÂΩôÈóúËÅØË®òÊÜ∂',\r\n        description: 'Âü∫ÊñºË™ûÁæ©ÈóúËÅØÁöÑÈï∑ÊúüË®òÊÜ∂',\r\n        cognitiveLoad: 'medium',\r\n        memorySystem: 'long-term',\r\n        neuralBasis: ['Êµ∑È¶¨È´î', 'È°≥ËëâÁöÆÂ±§'],\r\n        enhancementStrategies: ['Ë™ûÁæ©ÈÄ£Áµê', 'ÊÉÖÂ¢ÉÂ≠∏Áøí', 'ÈñìÈöîÈáçË§á']\r\n      }\r\n    ];\r\n\r\n    memoryTypes.forEach(type => {\r\n      this.memoryTypes.set(type.id, type);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÈªòË™çÈÖçÁΩÆ\r\n   */\r\n  private getDefaultConfiguration(): MemoryConfiguration {\r\n    return {\r\n      primaryMemoryType: 'collision-reaction',\r\n      secondaryMemoryTypes: ['spatial-visual', 'vocabulary-association'],\r\n      difficultyLevel: 3,\r\n      timeConstraints: {\r\n        enabled: true,\r\n        duration: 5,\r\n        pressureLevel: 'medium'\r\n      },\r\n      repetitionSettings: {\r\n        spacedRepetition: true,\r\n        intervalMultiplier: 2,\r\n        maxRepetitions: 5\r\n      },\r\n      feedbackMechanisms: {\r\n        immediate: true,\r\n        delayed: false,\r\n        explanatory: true,\r\n        emotional: true\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÂàùÂßãÊåáÊ®ô\r\n   */\r\n  private getInitialMetrics(): MemoryMetrics {\r\n    return {\r\n      retentionRate: 0,\r\n      recallSpeed: 0,\r\n      errorRate: 0,\r\n      cognitiveLoad: 5,\r\n      engagementLevel: 8,\r\n      learningEfficiency: 0\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Ë®òÈåÑÂ≠∏Áøí‰∫ã‰ª∂\r\n   */\r\n  recordLearningEvent(event: LearningEvent): void {\r\n    this.learningHistory.push(event);\r\n    this.updateMetrics();\r\n    \r\n    console.log(`üìù Ë®òÈåÑÂ≠∏Áøí‰∫ã‰ª∂: ${event.word} - ${event.isCorrect ? 'Ê≠£Á¢∫' : 'ÈåØË™§'}`);\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞Ë®òÊÜ∂ÊåáÊ®ô\r\n   */\r\n  private updateMetrics(): void {\r\n    if (this.learningHistory.length === 0) return;\r\n\r\n    const recentEvents = this.learningHistory.slice(-20); // ÊúÄËøë20ÂÄã‰∫ã‰ª∂\r\n    \r\n    // Ë®àÁÆó‰øùÊåÅÁéá\r\n    const correctEvents = recentEvents.filter(e => e.isCorrect);\r\n    this.memoryMetrics.retentionRate = (correctEvents.length / recentEvents.length) * 100;\r\n\r\n    // Ë®àÁÆóÂπ≥ÂùáÂèçÊáâÊôÇÈñì\r\n    const totalResponseTime = recentEvents.reduce((sum, e) => sum + e.responseTime, 0);\r\n    this.memoryMetrics.recallSpeed = totalResponseTime / recentEvents.length;\r\n\r\n    // Ë®àÁÆóÈåØË™§Áéá\r\n    this.memoryMetrics.errorRate = 100 - this.memoryMetrics.retentionRate;\r\n\r\n    // Ë®àÁÆóÂ≠∏ÁøíÊïàÁéá\r\n    this.memoryMetrics.learningEfficiency = this.calculateLearningEfficiency();\r\n\r\n    console.log('üìä Ë®òÊÜ∂ÊåáÊ®ôÂ∑≤Êõ¥Êñ∞:', this.memoryMetrics);\r\n  }\r\n\r\n  /**\r\n   * Ë®àÁÆóÂ≠∏ÁøíÊïàÁéá\r\n   */\r\n  private calculateLearningEfficiency(): number {\r\n    if (this.learningHistory.length < 5) return 0;\r\n\r\n    const recentEvents = this.learningHistory.slice(-10);\r\n    const firstHalf = recentEvents.slice(0, 5);\r\n    const secondHalf = recentEvents.slice(5);\r\n\r\n    const firstHalfAccuracy = firstHalf.filter(e => e.isCorrect).length / firstHalf.length;\r\n    const secondHalfAccuracy = secondHalf.filter(e => e.isCorrect).length / secondHalf.length;\r\n\r\n    const improvement = secondHalfAccuracy - firstHalfAccuracy;\r\n    return Math.max(0, Math.min(100, (improvement + 1) * 50));\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÂÄã‰∫∫ÂåñÂª∫Ë≠∞\r\n   */\r\n  getPersonalizedRecommendations(): string[] {\r\n    const recommendations: string[] = [];\r\n    const metrics = this.memoryMetrics;\r\n\r\n    if (metrics.retentionRate < 60) {\r\n      recommendations.push('Âª∫Ë≠∞Â¢ûÂä†ÈáçË§áÁ∑¥ÁøíÈ†ªÁéá');\r\n      recommendations.push('ËÄÉÊÖÆÈôç‰ΩéÈõ£Â∫¶Á≠âÁ¥ö');\r\n    }\r\n\r\n    if (metrics.recallSpeed > 3000) {\r\n      recommendations.push('Âª∫Ë≠∞ÈÄ≤Ë°åÂèçÊáâÈÄüÂ∫¶Ë®ìÁ∑¥');\r\n      recommendations.push('ÂèØ‰ª•ÂòóË©¶Êõ¥Â§öË¶ñË¶∫ÊèêÁ§∫');\r\n    }\r\n\r\n    if (metrics.errorRate > 40) {\r\n      recommendations.push('Âª∫Ë≠∞Âä†Âº∑Âü∫Á§éË©ûÂΩôÁ∑¥Áøí');\r\n      recommendations.push('ËÄÉÊÖÆ‰ΩøÁî®Êõ¥Â§öË®òÊÜ∂ËºîÂä©Â∑•ÂÖ∑');\r\n    }\r\n\r\n    if (metrics.learningEfficiency < 30) {\r\n      recommendations.push('Âª∫Ë≠∞Ë™øÊï¥Â≠∏ÁøíÁ≠ñÁï•');\r\n      recommendations.push('ÂèØ‰ª•ÂòóË©¶‰∏çÂêåÁöÑË®òÊÜ∂ÊäÄÂ∑ß');\r\n    }\r\n\r\n    return recommendations;\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÁï∂ÂâçÊåáÊ®ô\r\n   */\r\n  getCurrentMetrics(): MemoryMetrics {\r\n    return { ...this.memoryMetrics };\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÂ≠∏ÁøíÊ≠∑Âè≤\r\n   */\r\n  getLearningHistory(): LearningEvent[] {\r\n    return [...this.learningHistory];\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞ÈÖçÁΩÆ\r\n   */\r\n  updateConfiguration(newConfig: Partial<MemoryConfiguration>): void {\r\n    this.currentConfiguration = { ...this.currentConfiguration, ...newConfig };\r\n    console.log('‚öôÔ∏è Ë®òÊÜ∂Â¢ûÂº∑ÈÖçÁΩÆÂ∑≤Êõ¥Êñ∞');\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÁï∂ÂâçÈÖçÁΩÆ\r\n   */\r\n  getCurrentConfiguration(): MemoryConfiguration {\r\n    return { ...this.currentConfiguration };\r\n  }\r\n\r\n  /**\r\n   * ÈáçÁΩÆÊï∏Êìö\r\n   */\r\n  reset(): void {\r\n    this.learningHistory = [];\r\n    this.memoryMetrics = this.getInitialMetrics();\r\n    console.log('üîÑ Ë®òÊÜ∂Â¢ûÂº∑ÂºïÊìéÂ∑≤ÈáçÁΩÆ');\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñË®òÊÜ∂È°ûÂûã‰ø°ÊÅØ\r\n   */\r\n  getMemoryType(id: string): MemoryType | undefined {\r\n    return this.memoryTypes.get(id);\r\n  }\r\n\r\n  /**\r\n   * Áç≤ÂèñÊâÄÊúâË®òÊÜ∂È°ûÂûã\r\n   */\r\n  getAllMemoryTypes(): MemoryType[] {\r\n    return Array.from(this.memoryTypes.values());\r\n  }\r\n}\r\n"],"names":["GEPTManager","constructor","__publicField","this","Map","initializeWordDatabase","wordDatabase","set","id","english","chinese","level","frequency","console","log","setLevel","currentLevel","getCurrentLevel","getWordsForLevel","get","getCurrentLevelWords","getRandomWord","customVocabulary","getCustomVocabulary","length","Math","floor","random","targetLevel","words","warn","vocabularyData","localStorage","getItem","parsed","JSON","parse","vocabulary","Array","isArray","map","item","index","toString","difficulty","partOfSpeech","category","error","getRandomWords","count","sort","slice","min","findWordById","word","find","w","findWordByEnglish","toLowerCase","validateWord","foundWord","isValid","errors","type","message","severity","suggestion","warnings","suggestions","geptCompliance","score","issues","isCorrectLevel","getStatistics","elementary","intermediate","addWord","some","push","CollisionDetectionSystem","scene","geptLevel","effectConfig","initializeEffectSystems","enableParticles","initializeParticleSystem","graphics","add","fillStyle","fillCircle","generateTexture","destroy","setTargetWord","englishWord","chineseWord","targetEnglishWord","targetChineseWord","targetSetTime","Date","now","handleCollision","player","cloud","cloudWord","currentTime","responseTime","isCorrect","collisionType","collisionEvent","targetWord","timestamp","playerPosition","x","y","cloudPosition","correctCollisions","incorrectCollisions","collisionHistory","triggerCollisionEffects","event","enableVisualFeedback","createVisualFeedback","createParticleEffect","enableSoundEffects","playSoundEffect","enableScreenShake","triggerScreenShake","color","text","feedback","fontSize","fontStyle","setOrigin","tweens","targets","alpha","scale","duration","ease","onComplete","particleCount","getParticleCount","emitter","particles","speed","max","start","end","tint","lifespan","quantity","time","delayedCall","particleIntensity","intensity","cameras","main","shake","soundType","soundVolume","totalCollisions","accuracy","totalResponseTime","reduce","sum","averageResponseTime","round","getCollisionHistory","resetStatistics","updateConfig","newConfig","MemoryEnhancementEngine","initializeMemoryTypes","currentConfiguration","getDefaultConfiguration","memoryMetrics","getInitialMetrics","name","description","cognitiveLoad","memorySystem","neuralBasis","enhancementStrategies","forEach","memoryTypes","primaryMemoryType","secondaryMemoryTypes","difficultyLevel","timeConstraints","enabled","pressureLevel","repetitionSettings","spacedRepetition","intervalMultiplier","maxRepetitions","feedbackMechanisms","immediate","delayed","explanatory","emotional","retentionRate","recallSpeed","errorRate","engagementLevel","learningEfficiency","recordLearningEvent","learningHistory","updateMetrics","recentEvents","correctEvents","filter","e","calculateLearningEfficiency","firstHalf","secondHalf","firstHalfAccuracy","improvement","getPersonalizedRecommendations","recommendations","metrics","getCurrentMetrics","getLearningHistory","updateConfiguration","getCurrentConfiguration","reset","getMemoryType","getAllMemoryTypes","from","values"],"mappings":"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"}