{"version":3,"file":"managers-BDCOAzdU.js","sources":["../../src/managers/GEPTManager.ts","../../src/managers/CollisionDetectionSystem.ts","../../src/managers/MemoryEnhancementEngine.ts"],"sourcesContent":["/**\n * GEPTManager - GEPT分級和內容模板管理系統\n * 遷移到 Vite + Phaser 3 專案\n */\n\nexport type GEPTLevel = 'elementary' | 'intermediate' | 'high-intermediate';\n\nexport interface GEPTWord {\n  id: string;\n  english: string;\n  chinese: string;\n  level: GEPTLevel;\n  frequency: number; // 使用頻率 1-100\n  difficulty?: number; // 難度 1-10\n  partOfSpeech?: string;\n  pronunciation?: string;\n  category?: string;\n}\n\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: ValidationError[];\n  warnings: ValidationWarning[];\n  suggestions: string[];\n  geptCompliance: {\n    level: GEPTLevel;\n    score: number; // 0-100\n    issues: string[];\n  };\n}\n\nexport interface ValidationError {\n  type: 'grammar' | 'spelling' | 'format' | 'gept-compliance';\n  message: string;\n  position?: { start: number; end: number };\n  severity: 'error' | 'warning' | 'info';\n  suggestion?: string;\n}\n\nexport interface ValidationWarning {\n  type: 'complexity' | 'vocabulary' | 'structure';\n  message: string;\n  suggestion: string;\n}\n\n/**\n * GEPT 管理器類\n */\nexport class GEPTManager {\n  private wordDatabase: Map<GEPTLevel, GEPTWord[]> = new Map();\n  private currentLevel: GEPTLevel = 'elementary';\n\n  constructor() {\n    this.initializeWordDatabase();\n  }\n\n  /**\n   * 初始化詞彙數據庫\n   */\n  private initializeWordDatabase(): void {\n    // Elementary 級別詞彙\n    const elementaryWords: GEPTWord[] = [\n      { id: '1', english: 'hello', chinese: '你好', level: 'elementary', frequency: 100 },\n      { id: '2', english: 'world', chinese: '世界', level: 'elementary', frequency: 95 },\n      { id: '3', english: 'book', chinese: '書', level: 'elementary', frequency: 90 },\n      { id: '4', english: 'school', chinese: '學校', level: 'elementary', frequency: 85 },\n      { id: '5', english: 'friend', chinese: '朋友', level: 'elementary', frequency: 80 },\n      { id: '6', english: 'family', chinese: '家庭', level: 'elementary', frequency: 85 },\n      { id: '7', english: 'house', chinese: '房子', level: 'elementary', frequency: 82 },\n      { id: '8', english: 'water', chinese: '水', level: 'elementary', frequency: 88 },\n      { id: '9', english: 'food', chinese: '食物', level: 'elementary', frequency: 86 },\n      { id: '10', english: 'time', chinese: '時間', level: 'elementary', frequency: 92 }\n    ];\n\n    // Intermediate 級別詞彙\n    const intermediateWords: GEPTWord[] = [\n      { id: '11', english: 'environment', chinese: '環境', level: 'intermediate', frequency: 75 },\n      { id: '12', english: 'technology', chinese: '技術', level: 'intermediate', frequency: 78 },\n      { id: '13', english: 'education', chinese: '教育', level: 'intermediate', frequency: 80 },\n      { id: '14', english: 'government', chinese: '政府', level: 'intermediate', frequency: 72 },\n      { id: '15', english: 'economy', chinese: '經濟', level: 'intermediate', frequency: 70 }\n    ];\n\n    // High-Intermediate 級別詞彙\n    const highIntermediateWords: GEPTWord[] = [\n      { id: '16', english: 'sophisticated', chinese: '複雜的', level: 'high-intermediate', frequency: 60 },\n      { id: '17', english: 'phenomenon', chinese: '現象', level: 'high-intermediate', frequency: 58 },\n      { id: '18', english: 'hypothesis', chinese: '假設', level: 'high-intermediate', frequency: 55 },\n      { id: '19', english: 'methodology', chinese: '方法論', level: 'high-intermediate', frequency: 52 },\n      { id: '20', english: 'comprehensive', chinese: '全面的', level: 'high-intermediate', frequency: 65 }\n    ];\n\n    this.wordDatabase.set('elementary', elementaryWords);\n    this.wordDatabase.set('intermediate', intermediateWords);\n    this.wordDatabase.set('high-intermediate', highIntermediateWords);\n\n    console.log('📚 GEPT 詞彙數據庫初始化完成');\n  }\n\n  /**\n   * 設置當前 GEPT 等級\n   */\n  setLevel(level: GEPTLevel): void {\n    this.currentLevel = level;\n    console.log(`📊 設置 GEPT 等級: ${level}`);\n  }\n\n  /**\n   * 獲取當前等級\n   */\n  getCurrentLevel(): GEPTLevel {\n    return this.currentLevel;\n  }\n\n  /**\n   * 獲取指定等級的詞彙\n   */\n  getWordsForLevel(level: GEPTLevel): GEPTWord[] {\n    return this.wordDatabase.get(level) || [];\n  }\n\n  /**\n   * 獲取當前等級的詞彙\n   */\n  getCurrentLevelWords(): GEPTWord[] {\n    return this.getWordsForLevel(this.currentLevel);\n  }\n\n  /**\n   * 獲取隨機詞彙\n   */\n  getRandomWord(level?: GEPTLevel): GEPTWord | null {\n    const targetLevel = level || this.currentLevel;\n    const words = this.getWordsForLevel(targetLevel);\n    \n    if (words.length === 0) {\n      console.warn(`⚠️ 沒有找到 ${targetLevel} 等級的詞彙`);\n      return null;\n    }\n\n    const randomIndex = Math.floor(Math.random() * words.length);\n    return words[randomIndex];\n  }\n\n  /**\n   * 獲取多個隨機詞彙\n   */\n  getRandomWords(count: number, level?: GEPTLevel): GEPTWord[] {\n    const targetLevel = level || this.currentLevel;\n    const words = this.getWordsForLevel(targetLevel);\n    \n    if (words.length === 0) return [];\n\n    const shuffled = [...words].sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, Math.min(count, words.length));\n  }\n\n  /**\n   * 根據 ID 查找詞彙\n   */\n  findWordById(id: string): GEPTWord | null {\n    for (const [level, words] of this.wordDatabase) {\n      const word = words.find(w => w.id === id);\n      if (word) return word;\n    }\n    return null;\n  }\n\n  /**\n   * 根據英文單字查找詞彙\n   */\n  findWordByEnglish(english: string): GEPTWord | null {\n    for (const [level, words] of this.wordDatabase) {\n      const word = words.find(w => w.english.toLowerCase() === english.toLowerCase());\n      if (word) return word;\n    }\n    return null;\n  }\n\n  /**\n   * 驗證詞彙是否符合 GEPT 標準\n   */\n  validateWord(word: string, level: GEPTLevel): ValidationResult {\n    const foundWord = this.findWordByEnglish(word);\n    \n    if (!foundWord) {\n      return {\n        isValid: false,\n        errors: [{\n          type: 'gept-compliance',\n          message: `詞彙 \"${word}\" 不在 GEPT ${level} 詞彙表中`,\n          severity: 'error',\n          suggestion: '請使用 GEPT 標準詞彙'\n        }],\n        warnings: [],\n        suggestions: [],\n        geptCompliance: {\n          level,\n          score: 0,\n          issues: [`詞彙 \"${word}\" 未找到`]\n        }\n      };\n    }\n\n    const isCorrectLevel = foundWord.level === level;\n    \n    return {\n      isValid: isCorrectLevel,\n      errors: isCorrectLevel ? [] : [{\n        type: 'gept-compliance',\n        message: `詞彙 \"${word}\" 屬於 ${foundWord.level} 等級，不符合 ${level} 等級要求`,\n        severity: 'warning',\n        suggestion: `建議使用 ${level} 等級詞彙`\n      }],\n      warnings: [],\n      suggestions: [],\n      geptCompliance: {\n        level: foundWord.level,\n        score: isCorrectLevel ? 100 : 50,\n        issues: isCorrectLevel ? [] : [`等級不匹配: ${foundWord.level} vs ${level}`]\n      }\n    };\n  }\n\n  /**\n   * 獲取詞彙統計信息\n   */\n  getStatistics(): { [key in GEPTLevel]: number } {\n    return {\n      elementary: this.wordDatabase.get('elementary')?.length || 0,\n      intermediate: this.wordDatabase.get('intermediate')?.length || 0,\n      'high-intermediate': this.wordDatabase.get('high-intermediate')?.length || 0\n    };\n  }\n\n  /**\n   * 添加新詞彙\n   */\n  addWord(word: GEPTWord): boolean {\n    const words = this.wordDatabase.get(word.level);\n    if (!words) return false;\n\n    // 檢查是否已存在\n    const exists = words.some(w => w.english.toLowerCase() === word.english.toLowerCase());\n    if (exists) {\n      console.warn(`⚠️ 詞彙 \"${word.english}\" 已存在`);\n      return false;\n    }\n\n    words.push(word);\n    console.log(`✅ 添加詞彙: ${word.english} (${word.level})`);\n    return true;\n  }\n}\n","/**\n * 碰撞檢測系統 - Vite + Phaser 3 版本\n * 負責處理飛機與雲朵的碰撞檢測、特效觸發和學習數據記錄\n */\n\nimport Phaser from 'phaser';\nimport { GEPTWord, GEPTLevel } from './GEPTManager';\n\nexport interface CollisionEvent {\n  type: 'correct' | 'incorrect' | 'neutral';\n  cloudWord: string;\n  targetWord: string;\n  responseTime: number;\n  timestamp: number;\n  playerPosition: { x: number; y: number };\n  cloudPosition: { x: number; y: number };\n}\n\nexport interface CollisionEffectConfig {\n  enableParticles: boolean;\n  enableScreenShake: boolean;\n  enableSoundEffects: boolean;\n  enableVisualFeedback: boolean;\n  particleIntensity: 'low' | 'medium' | 'high';\n  soundVolume: number;\n}\n\n/**\n * 碰撞檢測系統\n */\nexport class CollisionDetectionSystem {\n  private scene: Phaser.Scene;\n  private geptLevel: GEPTLevel;\n  private effectConfig: CollisionEffectConfig;\n\n  // 目標詞彙管理\n  private targetEnglishWord: string = '';\n  private targetChineseWord: string = '';\n  private targetSetTime: number = 0;\n\n  // 統計數據\n  private collisionHistory: CollisionEvent[] = [];\n  private correctCollisions: number = 0;\n  private incorrectCollisions: number = 0;\n\n  // 特效系統\n  private particles?: Phaser.GameObjects.Particles.ParticleEmitter;\n  private screenShakeIntensity: number = 0;\n\n  constructor(\n    scene: Phaser.Scene,\n    geptLevel: GEPTLevel,\n    effectConfig: CollisionEffectConfig\n  ) {\n    this.scene = scene;\n    this.geptLevel = geptLevel;\n    this.effectConfig = effectConfig;\n    \n    this.initializeEffectSystems();\n    console.log('🎯 碰撞檢測系統初始化完成');\n  }\n\n  /**\n   * 初始化特效系統\n   */\n  private initializeEffectSystems(): void {\n    if (this.effectConfig.enableParticles) {\n      this.initializeParticleSystem();\n    }\n  }\n\n  /**\n   * 初始化粒子系統\n   */\n  private initializeParticleSystem(): void {\n    // 創建粒子紋理\n    const graphics = this.scene.add.graphics();\n    graphics.fillStyle(0xffffff);\n    graphics.fillCircle(4, 4, 4);\n    graphics.generateTexture('particle', 8, 8);\n    graphics.destroy();\n\n    console.log('✨ 粒子系統初始化完成');\n  }\n\n  /**\n   * 設置目標詞彙\n   */\n  setTargetWord(englishWord: string, chineseWord: string): void {\n    this.targetEnglishWord = englishWord;\n    this.targetChineseWord = chineseWord;\n    this.targetSetTime = Date.now();\n    \n    console.log(`🎯 設置目標詞彙: ${englishWord} (${chineseWord})`);\n  }\n\n  /**\n   * 處理碰撞事件\n   */\n  handleCollision(\n    player: Phaser.GameObjects.GameObject,\n    cloud: Phaser.GameObjects.GameObject,\n    cloudWord: GEPTWord\n  ): CollisionEvent {\n    const currentTime = Date.now();\n    const responseTime = currentTime - this.targetSetTime;\n    \n    // 判斷碰撞類型\n    const isCorrect = cloudWord.english === this.targetEnglishWord;\n    const collisionType: 'correct' | 'incorrect' = isCorrect ? 'correct' : 'incorrect';\n    \n    // 創建碰撞事件\n    const collisionEvent: CollisionEvent = {\n      type: collisionType,\n      cloudWord: cloudWord.english,\n      targetWord: this.targetEnglishWord,\n      responseTime,\n      timestamp: currentTime,\n      playerPosition: { x: (player as any).x, y: (player as any).y },\n      cloudPosition: { x: (cloud as any).x, y: (cloud as any).y }\n    };\n\n    // 記錄統計\n    if (isCorrect) {\n      this.correctCollisions++;\n    } else {\n      this.incorrectCollisions++;\n    }\n    \n    this.collisionHistory.push(collisionEvent);\n\n    // 觸發特效\n    this.triggerCollisionEffects(collisionEvent, cloud as any);\n\n    console.log(`💥 碰撞處理: ${cloudWord.english} - ${collisionType}`);\n    \n    return collisionEvent;\n  }\n\n  /**\n   * 觸發碰撞特效\n   */\n  private triggerCollisionEffects(\n    event: CollisionEvent,\n    cloud: Phaser.GameObjects.GameObject\n  ): void {\n    const { x, y } = event.cloudPosition;\n\n    // 視覺反饋\n    if (this.effectConfig.enableVisualFeedback && event.type !== 'neutral') {\n      this.createVisualFeedback(event.type, x, y);\n    }\n\n    // 粒子特效\n    if (this.effectConfig.enableParticles && event.type !== 'neutral') {\n      this.createParticleEffect(event.type, x, y);\n    }\n\n    // 螢幕震動\n    if (this.effectConfig.enableScreenShake && event.type !== 'neutral') {\n      this.triggerScreenShake(event.type);\n    }\n\n    // 音效\n    if (this.effectConfig.enableSoundEffects && event.type !== 'neutral') {\n      this.playSoundEffect(event.type);\n    }\n  }\n\n  /**\n   * 創建視覺反饋\n   */\n  private createVisualFeedback(type: 'correct' | 'incorrect', x: number, y: number): void {\n    const color = type === 'correct' ? '#00ff00' : '#ff0000';\n    const text = type === 'correct' ? '✓' : '✗';\n    \n    const feedback = this.scene.add.text(x, y, text, {\n      fontSize: '32px',\n      color: color,\n      fontStyle: 'bold'\n    }).setOrigin(0.5);\n\n    // 動畫效果\n    this.scene.tweens.add({\n      targets: feedback,\n      y: y - 50,\n      alpha: 0,\n      scale: 1.5,\n      duration: 1000,\n      ease: 'Power2',\n      onComplete: () => feedback.destroy()\n    });\n  }\n\n  /**\n   * 創建粒子特效\n   */\n  private createParticleEffect(type: 'correct' | 'incorrect', x: number, y: number): void {\n    const color = type === 'correct' ? 0x00ff00 : 0xff0000;\n    const particleCount = this.getParticleCount();\n\n    // 創建臨時粒子發射器\n    const emitter = this.scene.add.particles(x, y, 'particle', {\n      speed: { min: 50, max: 150 },\n      scale: { start: 0.5, end: 0 },\n      tint: color,\n      lifespan: 500,\n      quantity: particleCount\n    });\n\n    // 自動清理\n    this.scene.time.delayedCall(1000, () => {\n      emitter.destroy();\n    });\n  }\n\n  /**\n   * 獲取粒子數量\n   */\n  private getParticleCount(): number {\n    switch (this.effectConfig.particleIntensity) {\n      case 'low': return 5;\n      case 'medium': return 10;\n      case 'high': return 20;\n      default: return 10;\n    }\n  }\n\n  /**\n   * 觸發螢幕震動\n   */\n  private triggerScreenShake(type: 'correct' | 'incorrect'): void {\n    const intensity = type === 'correct' ? 5 : 10;\n    const duration = type === 'correct' ? 200 : 400;\n\n    // 簡單的相機震動效果\n    if (this.scene.cameras.main) {\n      this.scene.cameras.main.shake(duration, intensity);\n    }\n  }\n\n  /**\n   * 播放音效\n   */\n  private playSoundEffect(type: 'correct' | 'incorrect'): void {\n    // 這裡可以添加音效播放邏輯\n    // 目前只記錄日誌\n    const soundType = type === 'correct' ? '正確音效' : '錯誤音效';\n    console.log(`🔊 播放${soundType} (音量: ${this.effectConfig.soundVolume})`);\n  }\n\n  /**\n   * 獲取統計數據\n   */\n  getStatistics(): {\n    correctCollisions: number;\n    incorrectCollisions: number;\n    totalCollisions: number;\n    accuracy: number;\n    averageResponseTime: number;\n  } {\n    const totalCollisions = this.correctCollisions + this.incorrectCollisions;\n    const accuracy = totalCollisions > 0 ? (this.correctCollisions / totalCollisions) * 100 : 0;\n    \n    const totalResponseTime = this.collisionHistory.reduce((sum, event) => sum + event.responseTime, 0);\n    const averageResponseTime = this.collisionHistory.length > 0 ? totalResponseTime / this.collisionHistory.length : 0;\n\n    return {\n      correctCollisions: this.correctCollisions,\n      incorrectCollisions: this.incorrectCollisions,\n      totalCollisions,\n      accuracy: Math.round(accuracy * 100) / 100,\n      averageResponseTime: Math.round(averageResponseTime)\n    };\n  }\n\n  /**\n   * 獲取碰撞歷史\n   */\n  getCollisionHistory(): CollisionEvent[] {\n    return [...this.collisionHistory];\n  }\n\n  /**\n   * 重置統計數據\n   */\n  resetStatistics(): void {\n    this.correctCollisions = 0;\n    this.incorrectCollisions = 0;\n    this.collisionHistory = [];\n    console.log('📊 碰撞統計數據已重置');\n  }\n\n  /**\n   * 更新配置\n   */\n  updateConfig(newConfig: Partial<CollisionEffectConfig>): void {\n    this.effectConfig = { ...this.effectConfig, ...newConfig };\n    console.log('⚙️ 碰撞檢測配置已更新');\n  }\n\n  /**\n   * 銷毀系統\n   */\n  destroy(): void {\n    if (this.particles) {\n      this.particles.destroy();\n    }\n    this.collisionHistory = [];\n    console.log('🗑️ 碰撞檢測系統已銷毀');\n  }\n}\n","/**\n * 記憶增強引擎 - Vite + Phaser 3 版本\n * 基於記憶科學原理的學習效果優化系統\n */\n\nexport interface MemoryType {\n  id: string;\n  name: string;\n  description: string;\n  cognitiveLoad: 'low' | 'medium' | 'high';\n  memorySystem: 'working' | 'short-term' | 'long-term' | 'procedural' | 'episodic';\n  neuralBasis: string[];\n  enhancementStrategies: string[];\n}\n\nexport interface MemoryConfiguration {\n  primaryMemoryType: string;\n  secondaryMemoryTypes: string[];\n  difficultyLevel: number; // 1-5\n  timeConstraints: {\n    enabled: boolean;\n    duration: number; // seconds\n    pressureLevel: 'low' | 'medium' | 'high';\n  };\n  repetitionSettings: {\n    spacedRepetition: boolean;\n    intervalMultiplier: number;\n    maxRepetitions: number;\n  };\n  feedbackMechanisms: {\n    immediate: boolean;\n    delayed: boolean;\n    explanatory: boolean;\n    emotional: boolean;\n  };\n}\n\nexport interface MemoryMetrics {\n  retentionRate: number; // 0-100\n  recallSpeed: number; // milliseconds\n  errorRate: number; // 0-100\n  cognitiveLoad: number; // 1-10\n  engagementLevel: number; // 1-10\n  learningEfficiency: number; // 0-100\n}\n\nexport interface LearningEvent {\n  wordId: string;\n  word: string;\n  timestamp: number;\n  responseTime: number;\n  isCorrect: boolean;\n  attemptNumber: number;\n  contextData: any;\n}\n\n/**\n * 記憶增強引擎\n */\nexport class MemoryEnhancementEngine {\n  private memoryTypes: Map<string, MemoryType> = new Map();\n  private currentConfiguration: MemoryConfiguration;\n  private learningHistory: LearningEvent[] = [];\n  private memoryMetrics: MemoryMetrics;\n\n  constructor() {\n    this.initializeMemoryTypes();\n    this.currentConfiguration = this.getDefaultConfiguration();\n    this.memoryMetrics = this.getInitialMetrics();\n    \n    console.log('🧠 記憶增強引擎初始化完成');\n  }\n\n  /**\n   * 初始化記憶類型\n   */\n  private initializeMemoryTypes(): void {\n    const memoryTypes: MemoryType[] = [\n      {\n        id: 'spatial-visual',\n        name: '空間視覺記憶',\n        description: '基於空間位置和視覺特徵的記憶',\n        cognitiveLoad: 'medium',\n        memorySystem: 'working',\n        neuralBasis: ['視覺皮層', '頂葉皮層'],\n        enhancementStrategies: ['空間配置', '顏色編碼', '視覺提示']\n      },\n      {\n        id: 'collision-reaction',\n        name: '碰撞反應記憶',\n        description: '基於動作反應的程序性記憶',\n        cognitiveLoad: 'high',\n        memorySystem: 'procedural',\n        neuralBasis: ['小腦', '基底神經節'],\n        enhancementStrategies: ['重複練習', '即時反饋', '肌肉記憶']\n      },\n      {\n        id: 'vocabulary-association',\n        name: '詞彙關聯記憶',\n        description: '基於語義關聯的長期記憶',\n        cognitiveLoad: 'medium',\n        memorySystem: 'long-term',\n        neuralBasis: ['海馬體', '顳葉皮層'],\n        enhancementStrategies: ['語義連結', '情境學習', '間隔重複']\n      }\n    ];\n\n    memoryTypes.forEach(type => {\n      this.memoryTypes.set(type.id, type);\n    });\n  }\n\n  /**\n   * 獲取默認配置\n   */\n  private getDefaultConfiguration(): MemoryConfiguration {\n    return {\n      primaryMemoryType: 'collision-reaction',\n      secondaryMemoryTypes: ['spatial-visual', 'vocabulary-association'],\n      difficultyLevel: 3,\n      timeConstraints: {\n        enabled: true,\n        duration: 5,\n        pressureLevel: 'medium'\n      },\n      repetitionSettings: {\n        spacedRepetition: true,\n        intervalMultiplier: 2,\n        maxRepetitions: 5\n      },\n      feedbackMechanisms: {\n        immediate: true,\n        delayed: false,\n        explanatory: true,\n        emotional: true\n      }\n    };\n  }\n\n  /**\n   * 獲取初始指標\n   */\n  private getInitialMetrics(): MemoryMetrics {\n    return {\n      retentionRate: 0,\n      recallSpeed: 0,\n      errorRate: 0,\n      cognitiveLoad: 5,\n      engagementLevel: 8,\n      learningEfficiency: 0\n    };\n  }\n\n  /**\n   * 記錄學習事件\n   */\n  recordLearningEvent(event: LearningEvent): void {\n    this.learningHistory.push(event);\n    this.updateMetrics();\n    \n    console.log(`📝 記錄學習事件: ${event.word} - ${event.isCorrect ? '正確' : '錯誤'}`);\n  }\n\n  /**\n   * 更新記憶指標\n   */\n  private updateMetrics(): void {\n    if (this.learningHistory.length === 0) return;\n\n    const recentEvents = this.learningHistory.slice(-20); // 最近20個事件\n    \n    // 計算保持率\n    const correctEvents = recentEvents.filter(e => e.isCorrect);\n    this.memoryMetrics.retentionRate = (correctEvents.length / recentEvents.length) * 100;\n\n    // 計算平均反應時間\n    const totalResponseTime = recentEvents.reduce((sum, e) => sum + e.responseTime, 0);\n    this.memoryMetrics.recallSpeed = totalResponseTime / recentEvents.length;\n\n    // 計算錯誤率\n    this.memoryMetrics.errorRate = 100 - this.memoryMetrics.retentionRate;\n\n    // 計算學習效率\n    this.memoryMetrics.learningEfficiency = this.calculateLearningEfficiency();\n\n    console.log('📊 記憶指標已更新:', this.memoryMetrics);\n  }\n\n  /**\n   * 計算學習效率\n   */\n  private calculateLearningEfficiency(): number {\n    if (this.learningHistory.length < 5) return 0;\n\n    const recentEvents = this.learningHistory.slice(-10);\n    const firstHalf = recentEvents.slice(0, 5);\n    const secondHalf = recentEvents.slice(5);\n\n    const firstHalfAccuracy = firstHalf.filter(e => e.isCorrect).length / firstHalf.length;\n    const secondHalfAccuracy = secondHalf.filter(e => e.isCorrect).length / secondHalf.length;\n\n    const improvement = secondHalfAccuracy - firstHalfAccuracy;\n    return Math.max(0, Math.min(100, (improvement + 1) * 50));\n  }\n\n  /**\n   * 獲取個人化建議\n   */\n  getPersonalizedRecommendations(): string[] {\n    const recommendations: string[] = [];\n    const metrics = this.memoryMetrics;\n\n    if (metrics.retentionRate < 60) {\n      recommendations.push('建議增加重複練習頻率');\n      recommendations.push('考慮降低難度等級');\n    }\n\n    if (metrics.recallSpeed > 3000) {\n      recommendations.push('建議進行反應速度訓練');\n      recommendations.push('可以嘗試更多視覺提示');\n    }\n\n    if (metrics.errorRate > 40) {\n      recommendations.push('建議加強基礎詞彙練習');\n      recommendations.push('考慮使用更多記憶輔助工具');\n    }\n\n    if (metrics.learningEfficiency < 30) {\n      recommendations.push('建議調整學習策略');\n      recommendations.push('可以嘗試不同的記憶技巧');\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * 獲取當前指標\n   */\n  getCurrentMetrics(): MemoryMetrics {\n    return { ...this.memoryMetrics };\n  }\n\n  /**\n   * 獲取學習歷史\n   */\n  getLearningHistory(): LearningEvent[] {\n    return [...this.learningHistory];\n  }\n\n  /**\n   * 更新配置\n   */\n  updateConfiguration(newConfig: Partial<MemoryConfiguration>): void {\n    this.currentConfiguration = { ...this.currentConfiguration, ...newConfig };\n    console.log('⚙️ 記憶增強配置已更新');\n  }\n\n  /**\n   * 獲取當前配置\n   */\n  getCurrentConfiguration(): MemoryConfiguration {\n    return { ...this.currentConfiguration };\n  }\n\n  /**\n   * 重置數據\n   */\n  reset(): void {\n    this.learningHistory = [];\n    this.memoryMetrics = this.getInitialMetrics();\n    console.log('🔄 記憶增強引擎已重置');\n  }\n\n  /**\n   * 獲取記憶類型信息\n   */\n  getMemoryType(id: string): MemoryType | undefined {\n    return this.memoryTypes.get(id);\n  }\n\n  /**\n   * 獲取所有記憶類型\n   */\n  getAllMemoryTypes(): MemoryType[] {\n    return Array.from(this.memoryTypes.values());\n  }\n}\n"],"names":["GEPTManager","constructor","__publicField","this","Map","initializeWordDatabase","wordDatabase","set","id","english","chinese","level","frequency","console","log","setLevel","currentLevel","getCurrentLevel","getWordsForLevel","get","getCurrentLevelWords","getRandomWord","targetLevel","words","length","warn","Math","floor","random","getRandomWords","count","sort","slice","min","findWordById","word","find","w","findWordByEnglish","toLowerCase","validateWord","foundWord","isValid","errors","type","message","severity","suggestion","warnings","suggestions","geptCompliance","score","issues","isCorrectLevel","getStatistics","elementary","intermediate","addWord","some","push","CollisionDetectionSystem","scene","geptLevel","effectConfig","initializeEffectSystems","enableParticles","initializeParticleSystem","graphics","add","fillStyle","fillCircle","generateTexture","destroy","setTargetWord","englishWord","chineseWord","targetEnglishWord","targetChineseWord","targetSetTime","Date","now","handleCollision","player","cloud","cloudWord","currentTime","responseTime","isCorrect","collisionType","collisionEvent","targetWord","timestamp","playerPosition","x","y","cloudPosition","correctCollisions","incorrectCollisions","collisionHistory","triggerCollisionEffects","event","enableVisualFeedback","createVisualFeedback","createParticleEffect","enableScreenShake","triggerScreenShake","enableSoundEffects","playSoundEffect","color","text","feedback","fontSize","fontStyle","setOrigin","tweens","targets","alpha","scale","duration","ease","onComplete","particleCount","getParticleCount","emitter","particles","speed","max","start","end","tint","lifespan","quantity","time","delayedCall","particleIntensity","intensity","cameras","main","shake","soundType","soundVolume","totalCollisions","accuracy","totalResponseTime","reduce","sum","averageResponseTime","round","getCollisionHistory","resetStatistics","updateConfig","newConfig","MemoryEnhancementEngine","initializeMemoryTypes","currentConfiguration","getDefaultConfiguration","memoryMetrics","getInitialMetrics","name","description","cognitiveLoad","memorySystem","neuralBasis","enhancementStrategies","forEach","memoryTypes","primaryMemoryType","secondaryMemoryTypes","difficultyLevel","timeConstraints","enabled","pressureLevel","repetitionSettings","spacedRepetition","intervalMultiplier","maxRepetitions","feedbackMechanisms","immediate","delayed","explanatory","emotional","retentionRate","recallSpeed","errorRate","engagementLevel","learningEfficiency","recordLearningEvent","learningHistory","updateMetrics","recentEvents","correctEvents","filter","e","calculateLearningEfficiency","firstHalf","secondHalf","firstHalfAccuracy","improvement","getPersonalizedRecommendations","recommendations","metrics","getCurrentMetrics","getLearningHistory","updateConfiguration","getCurrentConfiguration","reset","getMemoryType","getAllMemoryTypes","Array","from","values"],"mappings":"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"}