# 🔧 v7.0 手機直向佈局調試指南

## 🚨 問題診斷

您看到的現象：
- 手機直向（375×667px）
- 顯示 3 列 × 4 行 = 12 個卡片
- 分頁顯示 1/2（第 1 頁，共 2 頁）
- 預期：5 列 × 2 行 = 10 個卡片

**根本原因**：很可能是**瀏覽器緩存**導致舊代碼仍在運行

---

## 🔍 調試步驟

### 步驟 1：硬刷新瀏覽器

**iOS Safari**：
```
1. 按住「重新整理」按鈕
2. 選擇「清除所有網站資料」
3. 重新載入頁面
```

**Android Chrome**：
```
1. 按 Ctrl+Shift+R（或 Cmd+Shift+R）
2. 或進入設定 → 清除瀏覽資料 → 清除快取
3. 重新載入頁面
```

**桌面 Chrome**：
```
1. 按 Ctrl+Shift+R（Windows）
2. 或 Cmd+Shift+R（Mac）
3. 或 F12 → 右鍵重新整理 → 清除快取並硬重新整理
```

---

### 步驟 2：打開開發者工具查看日誌

**打開方式**：
- iOS Safari：設定 → Safari → 進階 → Web Inspector
- Android Chrome：按 F12 或 Ctrl+Shift+I
- 桌面 Chrome：按 F12

**查看 Console 日誌**：

找到以下日誌：

```
📊 每頁最大卡片數計算: {
    layout: "mixed",
    isCompactMode: true,  ← 應該是 TRUE
    cols: 5,              ← 應該是 5
    maxRows: 5,           ← 應該是 5
    maxCardsPerPage: 25,  ← 應該是 25
    availableHeight: "567",
    totalUnitHeight: "98"
}
```

**如果看到**：
```
isCompactMode: false,  ← ❌ 錯誤！
cols: 3,               ← ❌ 錯誤！
```

**說明**：代碼沒有更新，需要清除緩存

---

### 步驟 3：檢查實際列數

**在 Console 中執行**：
```javascript
// 查看當前遊戲場景的設置
console.log('當前佈局:', this.scene.scenes[0].layout);
console.log('每頁卡片數:', this.scene.scenes[0].itemsPerPage);
console.log('總頁數:', this.scene.scenes[0].totalPages);
```

**預期輸出**：
```
當前佈局: mixed
每頁卡片數: 25
總頁數: 1
```

---

## 📊 預期結果

### 修復前（v6.0）
```
手機直向（375×667px）
isCompactMode = false ❌
cols = 3
maxRows = 3
maxCardsPerPage = 9

20 個卡片 → 分成 3 頁
- 第 1 頁：9 個卡片（3 列 × 3 行）
- 第 2 頁：9 個卡片（3 列 × 3 行）
- 第 3 頁：2 個卡片（3 列 × 1 行）
```

### 修復後（v7.0）
```
手機直向（375×667px）
isCompactMode = true ✅
cols = 5
maxRows = 5
maxCardsPerPage = 25

20 個卡片 → 分成 1 頁
- 第 1 頁：20 個卡片（5 列 × 4 行）
```

---

## 🔧 手動清除緩存方法

### 方法 1：瀏覽器設定

**Chrome**：
```
設定 → 隱私權和安全性 → 清除瀏覽資料
✓ Cookie 和其他網站資料
✓ 快取的圖片和檔案
時間範圍：所有時間
```

**Safari**：
```
設定 → Safari → 進階 → 網站資料
找到 recreate.vercel.app
點擊「移除」
```

### 方法 2：開發者工具

**Chrome DevTools**：
```
F12 → Application → Storage
✓ Clear site data
```

### 方法 3：強制重新載入

**所有瀏覽器**：
```
Ctrl+Shift+R（Windows）
Cmd+Shift+R（Mac）
```

---

## 📝 檢查清單

- [ ] 執行硬刷新（Ctrl+Shift+R）
- [ ] 打開開發者工具（F12）
- [ ] 查看 Console 日誌
- [ ] 確認 `isCompactMode = true`
- [ ] 確認 `cols = 5`
- [ ] 確認 `maxCardsPerPage = 25`
- [ ] 重新載入頁面
- [ ] 驗證顯示 5 列 × 4 行

---

## 🎯 預期改變

### 修復前
```
┌─────────────────────────────┐
│ eraser │ PEN   │ cary      │
│ 蘋果   │ 機器人 │ 車子      │
├─────────────────────────────┤
│ dogc   │ dog   │ cars      │
│ 書     │ 橡皮擦 │ 獅子      │
├─────────────────────────────┤
│ (卡片) │ (卡片) │ dogx      │
│ 山     │ 小於   │ T         │
├─────────────────────────────┤
│ book   │ card  │ dogy      │
│ 戶     │ 口    │ P         │
└─────────────────────────────┘
3 列 × 4 行 = 12 個卡片（第 1 頁）
```

### 修復後
```
┌──────────────────────────────────────────────┐
│ eraser │ PEN │ cary │ dogc │ dog           │
│ 蘋果   │ 機器人│ 車子 │ 書   │ 橡皮擦        │
├──────────────────────────────────────────────┤
│ cars   │ (卡) │ (卡) │ book │ card          │
│ 獅子   │ 山   │ 小於 │ 戶   │ 口            │
├──────────────────────────────────────────────┤
│ dogy   │ (卡) │ (卡) │ (卡) │ (卡)          │
│ P      │ ... │ ... │ ... │ ...           │
├──────────────────────────────────────────────┤
│ (卡)   │ (卡) │ (卡) │ (卡) │ (卡)          │
│ ...    │ ... │ ... │ ... │ ...           │
└──────────────────────────────────────────────┘
5 列 × 4 行 = 20 個卡片（第 1 頁）
```

---

## 💡 常見問題

### Q1：清除緩存後還是 3 列？
**A**：可能是代碼沒有部署。檢查：
1. 代碼是否已提交
2. 部署是否完成
3. 查看 Console 中的代碼版本

### Q2：如何確認代碼已更新？
**A**：在 Console 中查看日誌時間戳，確認是最新的

### Q3：為什麼 Wordwall 是 5 列？
**A**：Wordwall 對手機直向優先使用 5 列，以充分利用水平空間

---

## 📞 需要幫助？

如果清除緩存後仍然是 3 列，請提供：
1. Console 日誌截圖
2. 當前 URL
3. 瀏覽器版本
4. 設備型號


