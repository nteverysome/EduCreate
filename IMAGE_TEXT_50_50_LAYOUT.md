# Match-up 遊戲 - 圖片 + 文字 50-50 比例佈局

## 🎯 新功能概述

當卡片有圖片和英文字時，現在採用 **50-50 比例**顯示：
- **上半部分**：圖片 1:1 正方形
- **下半部分**：英文字

### 功能特性
✅ **50-50 比例分割** - 圖片和文字各佔一半
✅ **圖片 1:1 正方形** - 圖片保持原始寬高比
✅ **文字清晰顯示** - 文字有充足空間
✅ **視覺平衡** - 圖片和文字比例協調

---

## 📊 視覺對比

### 舊版本（90% 圖片 + 10% 文字）
```
┌─────────────────┐
│                 │
│   ┌───────────┐ │
│   │  圖片1:1  │ │  ← 圖片（上 90%）
│   └───────────┘ │
│                 │
├─────────────────┤
│   English Word  │  ← 文字（下 10%）
└─────────────────┘
```

### 新版本（50% 圖片 + 50% 文字）⭐
```
┌─────────────────┐
│   ┌───────────┐ │
│   │  圖片1:1  │ │  ← 圖片（上 50%）
│   └───────────┘ │
├─────────────────┤
│   English Word  │  ← 文字（下 50%）
│   English Word  │
└─────────────────┘
```

---

## 🔧 技術實現

### 修改的佈局函數：`createCardLayoutD`

```javascript
// 🔥 佈局函數 - 情況 D：圖片 + 文字（各佔 50%）
createCardLayoutD(container, background, width, height, text, imageUrl, pairId) {
    // 首先添加背景（最底層）
    container.add([background]);

    // 圖片區域：佔據卡片上方 50%
    const imageHeight = height * 0.5;
    const imageY = -height / 2 + imageHeight / 2;

    // 文字區域：佔據卡片下方 50%
    const textHeight = height * 0.5;
    const textY = height / 2 - textHeight / 2;

    // 計算正方形圖片的尺寸（1:1 比例）
    const squareSize = Math.min(width - 4, imageHeight - 4);

    // 創建圖片
    this.loadAndDisplayImage(container, imageUrl, 0, imageY, squareSize, pairId);

    // 創建文字（如果有）
    if (text && text.trim() !== '' && text.trim() !== '<br>') {
        this.createTextElement(container, text, 0, textY, width, textHeight);
    }
}
```

### 觸發條件

當卡片滿足以下條件時，使用佈局 D：
- ✅ 有圖片 (`hasImage = true`)
- ✅ 有文字 (`hasText = true`)
- ✅ 沒有音頻 (`hasAudio = false`)

```javascript
if (hasImage && hasText && !hasAudio) {
    // 情況 D：圖片 + 文字（各佔 50%）
    this.createCardLayoutD(container, background, width, height, text, imageUrl, pairId);
}
```

---

## 📐 尺寸計算

### 圖片區域
```javascript
const imageHeight = height * 0.5;  // 50% 高度
const imageY = -height / 2 + imageHeight / 2;  // 上半部分中央
```

### 文字區域
```javascript
const textHeight = height * 0.5;  // 50% 高度
const textY = height / 2 - textHeight / 2;  // 下半部分中央
```

### 正方形圖片尺寸
```javascript
const squareSize = Math.min(width - 4, imageHeight - 4);
```

### 示例
| 卡片寬度 | 卡片高度 | 圖片尺寸 | 文字高度 |
|---------|---------|---------|---------|
| 200px | 200px | 96px × 96px | 100px |
| 200px | 300px | 146px × 146px | 150px |
| 300px | 200px | 96px × 96px | 100px |

---

## 🎨 支持的卡片類型

### 佈局 A：圖片 + 文字 + 音頻
```
┌─────────────────┐
│      🔊         │  ← 音頻按鈕（上 30%）
├─────────────────┤
│   ┌───────────┐ │
│   │  圖片1:1  │ │  ← 圖片（中 40%）
│   └───────────┘ │
├─────────────────┤
│   English Word  │  ← 文字（下 30%）
└─────────────────┘
```

### 佈局 D：圖片 + 文字 ⭐ 已更新
```
┌─────────────────┐
│   ┌───────────┐ │
│   │  圖片1:1  │ │  ← 圖片（上 50%）
│   └───────────┘ │
├─────────────────┤
│   English Word  │  ← 文字（下 50%）
│   English Word  │
└─────────────────┘
```

### 佈局 F：只有圖片
```
┌─────────────────┐
│                 │
│   ┌───────────┐ │
│   │  圖片1:1  │ │  ← 圖片（100% 正方形）
│   └───────────┘ │
│                 │
└─────────────────┘
```

---

## 📝 控制台日誌

### 使用佈局 D 時
```
🎨 佈局 D: 圖片 + 文字 (各 50%) {
    width: 200,
    height: 200,
    pairId: "pair-123",
    hasText: true,
    imageUrl: "https://example.com/image.jpg..."
}
```

---

## 🧪 驗證步驟

### 1. 準備測試數據
- 創建有圖片和英文字的卡片對
- 確保圖片和文字都存在

### 2. 打開遊戲
- 加載遊戲頁面
- 查看卡片顯示

### 3. 驗證佈局
- [ ] 圖片佔據上半部分（50%）
- [ ] 文字佔據下半部分（50%）
- [ ] 圖片為正方形（1:1）
- [ ] 圖片沒有被拉伸
- [ ] 文字清晰可讀

### 4. 測試不同卡片大小
- [ ] 小卡片（150×150）
- [ ] 中卡片（200×200）
- [ ] 大卡片（300×300）
- [ ] 非正方形卡片（200×300）

---

## 🔄 兼容性

### 支持的佈局
✅ Separated 佈局
✅ Mixed 佈局
✅ 其他所有佈局

### 支持的圖片格式
✅ JPG / JPEG
✅ PNG
✅ WebP
✅ GIF

---

## 💡 設計考慮

### 為什麼選擇 50-50 比例？
1. **視覺平衡** - 圖片和文字比例協調
2. **文字可讀性** - 文字有充足空間
3. **圖片清晰度** - 圖片有足夠大小
4. **用戶體驗** - 兩者都能清楚看到

### 與 Screenshot_167 的對應
- 上半部分：圖片 1:1 正方形（如 crab 圖片）
- 下半部分：英文字（如 "heaa" 文字）
- 完全相同的 50-50 比例分割

---

## 📊 代碼改動

**文件**：`public/games/match-up-game/scenes/game.js`

**改動位置**：第 2597-2628 行

**改動內容**：
- 修改圖片區域：90% → 50%
- 修改文字區域：10% → 50%
- 添加調試日誌
- 總計 +8 行代碼

---

## 🚀 部署狀態

### Git 提交
```
6d7a1cc - Feature: Update layout D to 50-50 split between image and text
```

### 部署進度
- ✅ 代碼修改完成
- ✅ Git 提交成功
- ✅ GitHub 推送成功
- ⏳ Vercel 自動部署中（2-3 分鐘）

---

## ✨ 用戶體驗改進

### 之前
- 圖片佔 90%，文字只有 10%
- 文字空間不足，難以閱讀
- 比例不協調

### 之後
- 圖片佔 50%，文字佔 50%
- 文字空間充足，清晰可讀
- 比例協調，視覺平衡

---

## 📞 下一步

### 立即驗證（部署後）
1. 打開遊戲頁面
2. 查看有圖片和文字的卡片
3. 驗證圖片佔上半部分
4. 驗證文字佔下半部分
5. 確認比例為 50-50

### 監控項目
- 圖片顯示效果
- 文字可讀性
- 卡片佈局是否正確
- 用戶反饋

---

**最後更新**：2025-11-01
**版本**：v1.3 - 更新圖片 + 文字佈局為 50-50 比例
**狀態**：✅ 完成，等待部署驗證

