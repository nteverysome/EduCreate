# Wordwall「Add Sound」模態框深度分析

## 📋 分析信息

- **分析日期**: 2025-10-23
- **分析頁面**: https://wordwall.net/create/entercontent?templateId=3&folderId=0
- **模板類型**: Match up (配對遊戲)
- **分析工具**: Playwright MCP

---

## 🎯 模態框觸發流程

### 1. 觸發前狀態
- 輸入框右側有「Add Sound」按鈕 (🔊 圖標)
- 按鈕位置: 在「Add Image」按鈕旁邊
- 按鈕樣式: 灰色圖標,hover 時變色

### 2. 點擊「Add Sound」後
- 彈出模態框覆蓋整個頁面
- 模態框有半透明背景遮罩
- 模態框居中顯示
- 右上角有「×」關閉按鈕

---

## 🔍 模態框結構分析

### 頂部標籤頁 (Tabs)

模態框頂部有兩個標籤:

1. **Upload 標籤** (上傳音頻)
   - 圖標: 📁 (文件夾圖標)
   - 功能: 上傳本地音頻文件
   - 點擊後: 打開文件選擇器

2. **Add Sound 標籤** (生成語音) - **默認選中**
   - 圖標: 🔊 (喇叭圖標)
   - 功能: 使用 TTS 生成語音
   - 點擊後: 顯示 TTS 生成表單

---

## 📝 「Add Sound」標籤內容詳細分析

### 1. Text (文字輸入框)

**HTML 結構**:
```yaml
- generic [ref=e285]: Text
- textbox "Enter text to read aloud..." [ref=e286]
```

**特點**:
- **標籤**: "Text"
- **佔位符**: "Enter text to read aloud..." (輸入要朗讀的文字...)
- **輸入框類型**: 單行文字輸入框 (textbox)
- **必填**: 是 (沒有文字時「Generate」按鈕可能禁用)
- **字符限制**: 未明確顯示,但可能有限制

**功能**:
- 用戶輸入要轉換為語音的文字
- 支持多語言文字輸入
- 實時驗證輸入內容

---

### 2. Language (語言選擇下拉框)

**HTML 結構**:
```yaml
- generic [ref=e287]: Language
- combobox [ref=e288]:
  - option "Čeština (CZ)"
  - option "Dansk (DK)"
  - option "Deutsch (DE)"
  - ... (共 65 種語言選項)
  - option "繁體字 (TW)" [selected]
```

**特點**:
- **標籤**: "Language"
- **控件類型**: 下拉選擇框 (combobox)
- **默認選擇**: "繁體字 (TW)" (根據用戶地區自動選擇)
- **選項數量**: 65 種語言/地區組合

**支持的語言** (部分列表):
- **歐洲語言**: 
  - Čeština (CZ), Dansk (DK), Deutsch (DE), English (US/GB/AU/IE/NZ)
  - Español (ES/MX/AR/CL/CR/EC/PE/SV/VE)
  - Français (FR/BE/CA), Italiano (IT), Nederlands (NL)
  - Polski (PL), Português (PT/BR), Română (RO)
  - Svenska (SE), Suomi (FI), Norsk (NO)
  
- **東歐語言**:
  - Hrvatski (HR), Magyar (HU), Slovenčina (SK), Slovenščina (SI)
  - Eesti keel (EE), Latvian (LV), Lietuvių (LT)
  - български (BG), Русский (RU), Українська (UA)
  - Српски (RS/ME)

- **亞洲語言**:
  - 简体字 (CN), 繁體字 (HK/TW)
  - 日本語 (JP), 한국어 (KR)
  - ภาษาไทย (TH), Vietnamese (VN)
  - Indonesia (ID), Melayu (MY), Tagalog (PH)
  - हिंदी (IN), ગુજરાતી (GU)

- **中東語言**:
  - עִברִית (IL)
  - عربى (AE/BH/EG/JO/KW/QA/SA/TN)

- **其他語言**:
  - Türkçe (TR), O'zbek (UZ), Қазақ (KZ)

**語言格式**:
- 格式: `語言名稱 (國家代碼)`
- 例如: "English (US)", "繁體字 (TW)"
- 同一語言可能有多個地區變體 (如 English 有 US, GB, AU, IE, NZ)

---

### 3. Voice (語音類型選擇)

**HTML 結構**:
```yaml
- generic [ref=e289]: Voice
- combobox [ref=e290]:
  - option "Male" [selected]
  - option "Female"
```

**特點**:
- **標籤**: "Voice"
- **控件類型**: 下拉選擇框 (combobox)
- **默認選擇**: "Male" (男聲)
- **選項數量**: 2 種 (Male, Female)

**選項說明**:
1. **Male** (男聲)
   - 默認選項
   - 適合一般教學內容

2. **Female** (女聲)
   - 可選選項
   - 提供不同的語音風格

**注意**:
- Wordwall 只提供 **2 種語音類型** (Male/Female)
- **沒有年齡區分** (成人/兒童)
- **沒有語音風格選擇** (正式/輕鬆等)
- 比 EduCreate 的 4 種語音類型 (男聲成人/女聲成人/男聲兒童/女聲兒童) 簡單

---

### 4. Generate (生成按鈕)

**HTML 結構**:
```yaml
- button "Generate" [ref=e292] [cursor=pointer]
```

**特點**:
- **按鈕文字**: "Generate"
- **按鈕類型**: 主要操作按鈕 (Primary Button)
- **位置**: 表單底部
- **狀態**: 可點擊 (cursor=pointer)

**功能**:
- 點擊後: 調用 TTS API 生成語音
- 生成成功後: 關閉模態框,語音添加到輸入框
- 生成失敗後: 顯示錯誤信息

---

## 🎨 UI/UX 設計分析

### 模態框設計

**尺寸和位置**:
- 模態框居中顯示
- 寬度: 約 500-600px (估計)
- 高度: 自適應內容
- 背景遮罩: 半透明黑色

**視覺層次**:
1. **頂部**: 標籤頁 (Upload / Add Sound)
2. **中間**: 表單內容 (Text, Language, Voice)
3. **底部**: 操作按鈕 (Generate)
4. **右上角**: 關閉按鈕 (×)

**顏色方案**:
- 背景: 白色
- 標籤頁: 藍色高亮 (選中狀態)
- 按鈕: 藍色 (主要操作)
- 文字: 深灰色

---

### 表單設計

**標籤位置**:
- 標籤在輸入框上方
- 標籤文字: 粗體,深灰色
- 標籤和輸入框間距: 約 8px

**輸入框樣式**:
- 邊框: 淺灰色
- 圓角: 約 4px
- 內邊距: 約 8-12px
- Focus 狀態: 藍色邊框

**下拉框樣式**:
- 與輸入框樣式一致
- 右側有下拉箭頭圖標
- 選項列表: 白色背景,hover 時高亮

---

### 交互設計

**模態框打開**:
- 動畫: 淡入效果
- 背景遮罩: 同時淡入
- 焦點: 自動聚焦到文字輸入框

**模態框關閉**:
- 點擊「×」按鈕
- 點擊背景遮罩 (可能)
- 按 Escape 鍵 (可能)
- 點擊「Generate」後自動關閉

**表單驗證**:
- 實時驗證: 可能有
- 錯誤提示: 紅色文字或邊框
- 成功提示: 綠色勾選或提示信息

---

## 🔄 與 EduCreate 的對比

### 相似之處

| 功能 | Wordwall | EduCreate |
|------|----------|-----------|
| 模態框設計 | ✅ | ✅ |
| 文字輸入框 | ✅ | ✅ |
| 語言選擇 | ✅ (65 種) | ✅ (5 種核心) |
| 語音類型選擇 | ✅ (2 種) | ✅ (4 種) |
| 生成按鈕 | ✅ | ✅ |
| 上傳功能 | ✅ | ❌ |

### 差異之處

| 特性 | Wordwall | EduCreate |
|------|----------|-----------|
| **語言數量** | 65 種 | 5 種核心語言 |
| **語音類型** | 2 種 (Male/Female) | 4 種 (男/女 × 成人/兒童) |
| **上傳功能** | ✅ 支持上傳音頻 | ❌ 不支持 |
| **標籤頁** | ✅ Upload / Add Sound | ❌ 單一功能 |
| **年齡適配** | ❌ 無年齡區分 | ✅ 成人/兒童語音 |
| **教育場景** | ❌ 無明確標註 | ✅ 標註適合年齡層 |

---

## 💡 EduCreate 可以借鑒的設計

### 1. 上傳功能 (Upload Tab)

**建議**:
- 添加「上傳音頻」標籤頁
- 支持用戶上傳自己錄製的音頻
- 支持常見音頻格式 (MP3, WAV, OGG)

**優點**:
- 提供更多靈活性
- 支持特殊發音或方言
- 支持音樂或音效

---

### 2. 語言選擇優化

**Wordwall 的優勢**:
- 65 種語言選項
- 同一語言的多個地區變體
- 清晰的語言名稱和國家代碼

**EduCreate 可以**:
- 保持 5 種核心語言 (簡化選擇)
- 添加地區變體 (如 English US/GB)
- 使用國旗圖標增強視覺識別

---

### 3. 表單布局

**Wordwall 的優勢**:
- 標籤在上方,清晰明確
- 輸入框和下拉框樣式一致
- 間距合理,視覺舒適

**EduCreate 可以**:
- 保持當前的卡片式布局
- 優化標籤和輸入框間距
- 統一表單元素樣式

---

## 📊 技術實現推測

### TTS API

**Wordwall 使用**:
- 可能使用 Azure Neural TTS
- 支持 65 種語言
- 支持 Male/Female 語音

**API 調用流程**:
1. 用戶輸入文字
2. 選擇語言和語音類型
3. 點擊「Generate」
4. 前端調用後端 API
5. 後端調用 Azure TTS API
6. 生成音頻並返回 URL
7. 前端接收 URL 並關閉模態框
8. 音頻添加到輸入框

---

### 音頻存儲

**推測**:
- 音頻文件存儲在 CDN
- 使用 MD5 或 SHA256 哈希避免重複生成
- 緩存策略: 永久緩存或長期緩存

---

## 🎵 第二個模態框:語音預覽和確認

### 觸發條件
點擊第一個模態框的「Generate」按鈕後,會出現第二個模態框。

### 模態框結構

**HTML 結構**:
```yaml
- generic [ref=e294]:
  - generic [ref=e296]:
    - generic [ref=e297]:
      - generic [ref=e298]: Add Sound
      - text:
    - button "" [ref=e309] [cursor=pointer]:
      - generic [ref=e310]:
      - text:
    - generic [ref=e305]:
      - button "Back" [ref=e306] [cursor=pointer]
      - button "OK" [ref=e307] [cursor=pointer]
  - generic [ref=e308] [cursor=pointer]: ×
```

### 模態框內容

#### 1. 標題
- **文字**: "Add Sound"
- **位置**: 模態框頂部
- **樣式**: 粗體,深灰色

#### 2. 音頻播放器
- **控件**: 播放/暫停按鈕
- **圖標**: ▶️ (播放) / ⏸️ (暫停)
- **功能**: 預覽生成的語音
- **位置**: 模態框中央
- **樣式**: 大型圓形按鈕

**特點**:
- 自動生成音頻後顯示播放器
- 用戶可以點擊播放預覽語音
- 播放時按鈕變為暫停圖標
- 音頻播放完畢後自動恢復播放圖標

#### 3. 操作按鈕

**Back 按鈕**:
- **文字**: "Back"
- **功能**: 返回第一個模態框 (重新編輯)
- **位置**: 底部左側
- **樣式**: 次要按鈕 (灰色或白色背景)

**OK 按鈕**:
- **文字**: "OK"
- **功能**: 確認並添加語音到輸入框
- **位置**: 底部右側
- **樣式**: 主要按鈕 (藍色背景)

#### 4. 關閉按鈕
- **圖標**: ×
- **位置**: 右上角
- **功能**: 關閉模態框,取消添加語音

---

### 交互流程

#### 完整流程
1. **點擊「Add Sound」按鈕** → 打開第一個模態框
2. **輸入文字** → 在 Text 輸入框中輸入要轉換的文字
3. **選擇語言** → 從 65 種語言中選擇
4. **選擇語音類型** → Male 或 Female
5. **點擊「Generate」** → 調用 TTS API 生成語音
6. **顯示第二個模態框** → 顯示音頻播放器
7. **預覽語音** → 點擊播放按鈕預覽
8. **確認或返回**:
   - 點擊「OK」→ 語音添加到輸入框,關閉模態框
   - 點擊「Back」→ 返回第一個模態框重新編輯
   - 點擊「×」→ 取消添加,關閉模態框

#### 添加成功後
- 第二個模態框關閉
- 語音圖標出現在輸入框左側
- 「Add Sound」按鈕移動到語音圖標前面
- 點擊語音圖標可以播放語音

---

### UI/UX 設計分析

#### 第二個模態框的優點

1. **預覽功能**:
   - 用戶可以在確認前預覽語音
   - 避免添加錯誤的語音
   - 提高用戶信心

2. **返回編輯**:
   - 提供「Back」按鈕返回編輯
   - 無需重新開始整個流程
   - 提高用戶體驗

3. **清晰的操作**:
   - 只有兩個主要操作 (Back / OK)
   - 操作意圖明確
   - 減少用戶困惑

4. **視覺焦點**:
   - 大型播放按鈕吸引注意力
   - 鼓勵用戶預覽語音
   - 提高語音質量感知

---

### 語音添加後的狀態

#### 輸入框變化

**HTML 結構**:
```yaml
- generic [ref=e43] [cursor=pointer]:
  - text:
  - generic [ref=e311]:
```

**視覺變化**:
- 語音圖標 (🔊) 出現在輸入框左側
- 「Add Sound」按鈕移動到語音圖標前面
- 語音圖標可點擊播放

**交互變化**:
- 點擊語音圖標 → 播放語音
- 點擊「Add Sound」按鈕 → 重新打開模態框編輯語音
- 可以替換現有語音

---

## 🔄 與 EduCreate 的詳細對比

### 模態框流程對比

| 階段 | Wordwall | EduCreate |
|------|----------|-----------|
| **第一個模態框** | 輸入文字 + 選擇語言/語音 | 輸入文字 + 選擇語言/語音 |
| **第二個模態框** | ✅ 預覽和確認 | ❌ 無預覽模態框 |
| **添加後狀態** | 語音圖標在左側 | 語音縮圖在左側 |
| **按鈕位置** | 移動到語音圖標前面 | 隱藏按鈕 |

### 預覽功能對比

| 功能 | Wordwall | EduCreate |
|------|----------|-----------|
| **生成前預覽** | ❌ | ❌ |
| **生成後預覽** | ✅ 第二個模態框 | ❌ 直接添加 |
| **添加後播放** | ✅ 點擊語音圖標 | ✅ 點擊語音縮圖 |
| **重新編輯** | ✅ 點擊「Add Sound」 | ✅ 重新點擊「加入聲音」 |

---

## 💡 EduCreate 可以借鑒的設計 (更新)

### 1. 添加預覽模態框 ⭐ **重要**

**建議**:
- 在生成語音後,顯示預覽模態框
- 提供播放按鈕讓用戶預覽語音
- 提供「返回編輯」和「確認」按鈕

**優點**:
- 提高用戶信心
- 避免添加錯誤的語音
- 提供重新編輯的機會
- 提升專業感

**實施方案**:
```typescript
// 在 AddSoundDialog 組件中添加預覽狀態
const [previewMode, setPreviewMode] = useState(false);
const [generatedAudioUrl, setGeneratedAudioUrl] = useState<string | null>(null);

// 生成語音後進入預覽模式
const handleGenerate = async () => {
  const audioUrl = await generateTTS(...);
  setGeneratedAudioUrl(audioUrl);
  setPreviewMode(true); // 進入預覽模式
};

// 預覽模態框
{previewMode && (
  <div>
    <h2>預覽語音</h2>
    <button onClick={() => playAudio(generatedAudioUrl)}>播放</button>
    <button onClick={() => setPreviewMode(false)}>返回編輯</button>
    <button onClick={handleConfirm}>確認</button>
  </div>
)}
```

---

### 2. 按鈕位置策略

**Wordwall 的策略**:
- 添加語音後,「Add Sound」按鈕移動到語音圖標前面
- 按鈕不隱藏,方便重新編輯

**EduCreate 的策略**:
- 添加語音後,「加入聲音」按鈕隱藏
- 語音縮圖顯示在左側

**建議**:
- **保持 EduCreate 的策略** (隱藏按鈕)
- 原因:
  - 更簡潔的 UI
  - 避免按鈕過多
  - 語音縮圖本身就是編輯入口 (可以添加編輯功能)

**改進方案**:
- 語音縮圖右鍵菜單:
  - 播放語音
  - 重新生成
  - 刪除語音

---

### 3. 語音質量指示

**建議**:
- 在預覽模態框中顯示語音信息:
  - 語言: English (US)
  - 語音類型: 女聲(成人)
  - 文字: "cat"
  - 時長: 0.5 秒

**優點**:
- 提供更多上下文信息
- 幫助用戶確認語音正確性
- 提升專業感

---

## ✅ 總結 (更新)

### Wordwall「Add Sound」完整流程的核心特點

1. **雙模態框設計**:
   - 第一個模態框: 輸入和配置
   - 第二個模態框: 預覽和確認 ⭐ **關鍵特點**

2. **預覽功能**:
   - 生成後立即預覽
   - 大型播放按鈕
   - 返回編輯選項

3. **清晰的操作流程**:
   - 輸入 → 生成 → 預覽 → 確認
   - 每個階段都有明確的操作

4. **靈活的編輯**:
   - 可以在預覽階段返回編輯
   - 添加後可以重新編輯

### EduCreate 的優勢 (保持)

1. **4 種語音類型**: 男/女 × 成人/兒童
2. **教育場景標註**: 適合高中/成人,適合國小/國中
3. **GEPT 分級整合**: 與詞彙分級系統整合
4. **記憶科學驅動**: 基於記憶科學的遊戲設計
5. **簡潔的 UI**: 按鈕隱藏策略更簡潔

### 建議改進 (更新)

1. **添加預覽模態框** ⭐ **最重要**:
   - 生成後顯示預覽模態框
   - 提供播放、返回編輯、確認按鈕
   - 提高用戶信心和體驗

2. **添加上傳功能**:
   - 支持用戶上傳自己的音頻
   - 提供更多靈活性

3. **優化語音縮圖交互**:
   - 添加右鍵菜單 (播放/重新生成/刪除)
   - 提供更多操作選項

4. **保持教育特色**:
   - 繼續強調年齡適配和教育場景
   - 整合 GEPT 分級系統

---

**分析完成!** 🎉

**關鍵發現**: Wordwall 使用**雙模態框設計**,第二個模態框提供**預覽和確認**功能,這是提升用戶體驗的關鍵!

