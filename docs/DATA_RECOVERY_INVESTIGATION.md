# æ•¸æ“šæ¢å¾©èª¿æŸ¥æŒ‡å—

## ðŸ“‹ å•é¡Œç¸½çµ

**ç™¼ç¾**: æ•¸æ“šåº«ä¸­æ²’æœ‰ 2025-10-16 15:29:54 ä¹‹å‰çš„æ•¸æ“š  
**å½±éŸ¿**: ç”¨æˆ¶ä¹‹å‰å‰µå»ºçš„æ‰€æœ‰æ´»å‹•å’Œçµæžœéƒ½ä¸è¦‹äº†  
**æ•¸æ“šåº«**: Neon PostgreSQL  

---

## ðŸ” èª¿æŸ¥æ­¥é©Ÿ

### æ­¥é©Ÿ 1: æª¢æŸ¥ Vercel éƒ¨ç½²æ—¥èªŒ

#### 1.1 è¨ªå• Vercel Dashboard
1. ç™»å…¥ Vercel: https://vercel.com/dashboard
2. é¸æ“‡ EduCreate å°ˆæ¡ˆ
3. é»žæ“Š "Deployments" æ¨™ç±¤

#### 1.2 æŸ¥çœ‹éƒ¨ç½²æ­·å²
æŸ¥æ‰¾ 2025-10-16 15:29 ä¹‹å‰çš„éƒ¨ç½²è¨˜éŒ„ï¼š
- æŸ¥çœ‹éƒ¨ç½²æ™‚é–“
- æŸ¥çœ‹éƒ¨ç½²ç‹€æ…‹ï¼ˆæˆåŠŸ/å¤±æ•—ï¼‰
- æŸ¥çœ‹æ§‹å»ºæ—¥èªŒ

#### 1.3 æœç´¢é—œéµå­—
åœ¨éƒ¨ç½²æ—¥èªŒä¸­æœç´¢ä»¥ä¸‹é—œéµå­—ï¼š
- `prisma migrate`
- `prisma db push`
- `prisma migrate reset`
- `prisma migrate deploy`
- `DATABASE_URL`
- `error`
- `failed`

#### 1.4 é‡é»žæª¢æŸ¥é …ç›®
- [ ] æ˜¯å¦æœ‰æ•¸æ“šåº«é·ç§»åŸ·è¡Œ
- [ ] æ˜¯å¦æœ‰é·ç§»å¤±æ•—çš„è¨˜éŒ„
- [ ] æ˜¯å¦æœ‰ `prisma migrate reset` å‘½ä»¤åŸ·è¡Œ
- [ ] æ˜¯å¦æœ‰ç’°å¢ƒè®Šæ•¸è®Šæ›´
- [ ] æ˜¯å¦æœ‰æ§‹å»ºéŒ¯èª¤

---

### æ­¥é©Ÿ 2: æª¢æŸ¥ Neon PostgreSQL å‚™ä»½

#### 2.1 è¨ªå• Neon Console
1. ç™»å…¥ Neon: https://console.neon.tech/
2. é¸æ“‡ EduCreate å°ˆæ¡ˆçš„æ•¸æ“šåº«
3. æŸ¥çœ‹æ•¸æ“šåº«è©³æƒ…

#### 2.2 æª¢æŸ¥å‚™ä»½è¨­ç½®
- [ ] ç¢ºèªæ˜¯å¦å•Ÿç”¨äº†è‡ªå‹•å‚™ä»½
- [ ] æŸ¥çœ‹å‚™ä»½ä¿ç•™æœŸé™
- [ ] æŸ¥çœ‹æœ€è¿‘çš„å‚™ä»½æ™‚é–“

#### 2.3 æŸ¥çœ‹æ•¸æ“šåº«æ­·å²
åœ¨ Neon Console ä¸­ï¼š
1. é»žæ“Š "Branches" æˆ– "History" æ¨™ç±¤
2. æŸ¥çœ‹æ•¸æ“šåº«åˆ†æ”¯æ­·å²
3. ç¢ºèªæ˜¯å¦æœ‰æ™‚é–“é»žæ¢å¾©ï¼ˆPoint-in-Time Recoveryï¼‰åŠŸèƒ½

#### 2.4 æª¢æŸ¥æ•¸æ“šåº«æ“ä½œæ—¥èªŒ
- [ ] æŸ¥çœ‹æ˜¯å¦æœ‰ DROP DATABASE æ“ä½œ
- [ ] æŸ¥çœ‹æ˜¯å¦æœ‰ TRUNCATE TABLE æ“ä½œ
- [ ] æŸ¥çœ‹æ˜¯å¦æœ‰å¤§é‡ DELETE æ“ä½œ
- [ ] æŸ¥çœ‹æ˜¯å¦æœ‰æ•¸æ“šåº«é‡ç½®æ“ä½œ

#### 2.5 Neon å‚™ä»½æ¢å¾©é¸é …
Neon PostgreSQL æä¾›ä»¥ä¸‹æ¢å¾©é¸é …ï¼š
1. **æ™‚é–“é»žæ¢å¾©ï¼ˆPITRï¼‰**: æ¢å¾©åˆ°ç‰¹å®šæ™‚é–“é»ž
2. **åˆ†æ”¯æ¢å¾©**: å¾žæ•¸æ“šåº«åˆ†æ”¯æ¢å¾©
3. **å¿«ç…§æ¢å¾©**: å¾žå¿«ç…§æ¢å¾©

---

### æ­¥é©Ÿ 3: ç¢ºèªæ•¸æ“šåº«é€£æŽ¥è¨­ç½®

#### 3.1 æª¢æŸ¥ Vercel ç’°å¢ƒè®Šæ•¸
1. è¨ªå• Vercel Dashboard
2. é€²å…¥ EduCreate å°ˆæ¡ˆ
3. é»žæ“Š "Settings" â†’ "Environment Variables"
4. æŸ¥çœ‹ `DATABASE_URL` çš„å€¼

#### 3.2 ç¢ºèªæ•¸æ“šåº«é€£æŽ¥å­—ç¬¦ä¸²
æª¢æŸ¥ `DATABASE_URL` æ ¼å¼ï¼š
```
postgresql://[user]:[password]@[host]/[database]?sslmode=require
```

é‡é»žæª¢æŸ¥ï¼š
- [ ] Host æ˜¯å¦æ­£ç¢ºï¼ˆæ‡‰è©²æ˜¯ Neon çš„ hostï¼‰
- [ ] Database åç¨±æ˜¯å¦æ­£ç¢º
- [ ] æ˜¯å¦æœ‰å¤šå€‹ç’°å¢ƒï¼ˆDevelopment, Preview, Productionï¼‰
- [ ] æ¯å€‹ç’°å¢ƒçš„ DATABASE_URL æ˜¯å¦ä¸åŒ

#### 3.3 æª¢æŸ¥æœ¬åœ° .env æ–‡ä»¶
```bash
# æŸ¥çœ‹æœ¬åœ° .env æ–‡ä»¶
cat .env | grep DATABASE_URL
```

ç¢ºèªï¼š
- [ ] æœ¬åœ° DATABASE_URL æ˜¯å¦èˆ‡ Vercel ç”Ÿç”¢ç’°å¢ƒç›¸åŒ
- [ ] æ˜¯å¦æœ‰å¤šå€‹ .env æ–‡ä»¶ï¼ˆ.env.local, .env.productionï¼‰

#### 3.4 æ¸¬è©¦æ•¸æ“šåº«é€£æŽ¥
å‰µå»ºæ¸¬è©¦è…³æœ¬ `scripts/test-connection.js`:
```javascript
const { PrismaClient } = require('@prisma/client');

const prisma = new PrismaClient({
  log: ['query', 'info', 'warn', 'error'],
});

async function testConnection() {
  try {
    console.log('Testing database connection...');
    
    // æ¸¬è©¦é€£æŽ¥
    await prisma.$connect();
    console.log('âœ… Database connected successfully');
    
    // ç²å–æ•¸æ“šåº«ä¿¡æ¯
    const result = await prisma.$queryRaw`
      SELECT 
        current_database() as database,
        current_user as user,
        version() as version
    `;
    console.log('Database Info:', result);
    
    // æª¢æŸ¥è¡¨æ˜¯å¦å­˜åœ¨
    const tables = await prisma.$queryRaw`
      SELECT tablename 
      FROM pg_tables 
      WHERE schemaname = 'public'
      ORDER BY tablename
    `;
    console.log('Tables:', tables);
    
  } catch (error) {
    console.error('âŒ Connection failed:', error);
  } finally {
    await prisma.$disconnect();
  }
}

testConnection();
```

åŸ·è¡Œæ¸¬è©¦ï¼š
```bash
node scripts/test-connection.js
```

---

## ðŸ”§ æ•¸æ“šæ¢å¾©æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: å¾ž Neon å‚™ä»½æ¢å¾©ï¼ˆæŽ¨è–¦ï¼‰

#### å‰ææ¢ä»¶
- Neon æœ‰å¯ç”¨çš„å‚™ä»½
- å‚™ä»½æ™‚é–“åœ¨æ•¸æ“šä¸Ÿå¤±ä¹‹å‰

#### æ¢å¾©æ­¥é©Ÿ
1. ç™»å…¥ Neon Console
2. é¸æ“‡æ•¸æ“šåº«å°ˆæ¡ˆ
3. é»žæ“Š "Restore" æˆ– "Point-in-Time Recovery"
4. é¸æ“‡æ¢å¾©æ™‚é–“é»žï¼ˆ2025-10-16 15:29 ä¹‹å‰ï¼‰
5. å‰µå»ºæ–°çš„æ•¸æ“šåº«åˆ†æ”¯æˆ–æ¢å¾©åˆ°ä¸»åˆ†æ”¯
6. æ›´æ–° Vercel çš„ DATABASE_URL æŒ‡å‘æ¢å¾©çš„æ•¸æ“šåº«

#### æ³¨æ„äº‹é …
- âš ï¸ æ¢å¾©æœƒè¦†è“‹ç•¶å‰æ•¸æ“š
- âš ï¸ å»ºè­°å…ˆå‰µå»ºç•¶å‰æ•¸æ“šçš„å‚™ä»½
- âš ï¸ æ¢å¾©å¾Œéœ€è¦é‡æ–°éƒ¨ç½²æ‡‰ç”¨

---

### æ–¹æ¡ˆ 2: å¾ž Vercel éƒ¨ç½²æ­·å²æ¢å¾©

#### å‰ææ¢ä»¶
- ä¹‹å‰çš„éƒ¨ç½²ä½¿ç”¨äº†ä¸åŒçš„æ•¸æ“šåº«
- èˆŠæ•¸æ“šåº«ä»ç„¶å­˜åœ¨

#### æ¢å¾©æ­¥é©Ÿ
1. æŸ¥çœ‹ Vercel éƒ¨ç½²æ­·å²
2. æ‰¾åˆ°æ•¸æ“šä¸Ÿå¤±å‰çš„éƒ¨ç½²
3. æŸ¥çœ‹è©²éƒ¨ç½²çš„ç’°å¢ƒè®Šæ•¸
4. ç²å–èˆŠçš„ DATABASE_URL
5. é€£æŽ¥åˆ°èˆŠæ•¸æ“šåº«
6. å°Žå‡ºæ•¸æ“š
7. å°Žå…¥åˆ°ç•¶å‰æ•¸æ“šåº«

---

### æ–¹æ¡ˆ 3: å¾žæœ¬åœ°é–‹ç™¼æ•¸æ“šåº«æ¢å¾©

#### å‰ææ¢ä»¶
- æœ¬åœ°é–‹ç™¼ç’°å¢ƒæœ‰æ•¸æ“š
- æœ¬åœ°æ•¸æ“šæ˜¯æœ€æ–°çš„

#### æ¢å¾©æ­¥é©Ÿ
1. å¾žæœ¬åœ°æ•¸æ“šåº«å°Žå‡ºæ•¸æ“šï¼š
```bash
# ä½¿ç”¨ pg_dump å°Žå‡º
pg_dump -h localhost -U postgres -d educreate > backup.sql

# æˆ–ä½¿ç”¨ Prisma
npx prisma db pull
npx prisma db push --force-reset
```

2. å°Žå…¥åˆ° Neon æ•¸æ“šåº«ï¼š
```bash
# ä½¿ç”¨ psql å°Žå…¥
psql $DATABASE_URL < backup.sql
```

---

## ðŸ“Š æ•¸æ“šåº«ç‹€æ…‹æª¢æŸ¥æ¸…å–®

### ç•¶å‰æ•¸æ“šåº«ç‹€æ…‹
- [x] æ•¸æ“šåº«é€£æŽ¥æ­£å¸¸
- [x] ç”¨æˆ¶è¡¨å­˜åœ¨
- [x] Activity è¡¨å­˜åœ¨
- [x] Folder è¡¨å­˜åœ¨
- [ ] æœ‰ 2025-10-16 15:29 ä¹‹å‰çš„æ•¸æ“š
- [ ] æœ‰ç”¨æˆ¶çš„æ´»å‹•æ•¸æ“š
- [ ] æœ‰ç”¨æˆ¶çš„çµæžœæ•¸æ“š

### æ•¸æ“šä¸Ÿå¤±ç¯„åœ
- [x] æ‰€æœ‰ 2025-10-16 15:29 ä¹‹å‰çš„æ•¸æ“š
- [x] ç”¨æˆ¶ä¹‹å‰å‰µå»ºçš„æ´»å‹•
- [x] ç”¨æˆ¶ä¹‹å‰å‰µå»ºçš„çµæžœ
- [x] ç”¨æˆ¶ä¹‹å‰çš„èª²æ¥­åˆ†é…

---

## ðŸŽ¯ èª¿æŸ¥çµæžœè¨˜éŒ„

### Vercel éƒ¨ç½²æ—¥èªŒæª¢æŸ¥çµæžœ
```
æ—¥æœŸ: _______________
æª¢æŸ¥äºº: _______________

ç™¼ç¾:
- [ ] æœ‰æ•¸æ“šåº«é·ç§»åŸ·è¡Œ
- [ ] æœ‰é·ç§»å¤±æ•—è¨˜éŒ„
- [ ] æœ‰ reset å‘½ä»¤åŸ·è¡Œ
- [ ] æœ‰ç’°å¢ƒè®Šæ•¸è®Šæ›´
- [ ] æœ‰æ§‹å»ºéŒ¯èª¤

è©³ç´°è¨˜éŒ„:
_______________________________________
_______________________________________
_______________________________________
```

### Neon å‚™ä»½æª¢æŸ¥çµæžœ
```
æ—¥æœŸ: _______________
æª¢æŸ¥äºº: _______________

ç™¼ç¾:
- [ ] æœ‰è‡ªå‹•å‚™ä»½
- [ ] æœ‰å¯ç”¨çš„å‚™ä»½é»ž
- [ ] æœ‰æ™‚é–“é»žæ¢å¾©åŠŸèƒ½
- [ ] æœ‰æ•¸æ“šåº«æ“ä½œæ—¥èªŒ

æœ€è¿‘å‚™ä»½æ™‚é–“: _______________
å‚™ä»½ä¿ç•™æœŸé™: _______________

è©³ç´°è¨˜éŒ„:
_______________________________________
_______________________________________
_______________________________________
```

### æ•¸æ“šåº«é€£æŽ¥æª¢æŸ¥çµæžœ
```
æ—¥æœŸ: _______________
æª¢æŸ¥äºº: _______________

ç™¼ç¾:
- [ ] DATABASE_URL æ­£ç¢º
- [ ] é€£æŽ¥åˆ°æ­£ç¢ºçš„æ•¸æ“šåº«
- [ ] æ²’æœ‰å¤šå€‹æ•¸æ“šåº«å¯¦ä¾‹
- [ ] ç’°å¢ƒè®Šæ•¸ä¸€è‡´

ç•¶å‰ DATABASE_URL: _______________
æ•¸æ“šåº«åç¨±: _______________
Host: _______________

è©³ç´°è¨˜éŒ„:
_______________________________________
_______________________________________
_______________________________________
```

---

## ðŸ“ž è¯ç¹«æ”¯æ´

### Neon Support
- ç¶²ç«™: https://neon.tech/docs/introduction
- æ”¯æ´: https://neon.tech/docs/introduction/support
- Discord: https://discord.gg/neon

### Vercel Support
- ç¶²ç«™: https://vercel.com/support
- æ–‡æª”: https://vercel.com/docs

---

## âœ¨ ç¸½çµ

### èª¿æŸ¥å„ªå…ˆç´š
1. ðŸ”´ **æœ€é«˜å„ªå…ˆç´š**: æª¢æŸ¥ Neon å‚™ä»½
   - å¦‚æžœæœ‰å‚™ä»½ï¼Œå¯ä»¥ç›´æŽ¥æ¢å¾©æ•¸æ“š
   - é€™æ˜¯æœ€å¿«é€Ÿå’Œæœ€å¯é çš„æ–¹æ³•

2. ðŸŸ¡ **ä¸­ç­‰å„ªå…ˆç´š**: æª¢æŸ¥ Vercel éƒ¨ç½²æ—¥èªŒ
   - äº†è§£æ•¸æ“šä¸Ÿå¤±çš„åŽŸå› 
   - é˜²æ­¢æœªä¾†å†æ¬¡ç™¼ç”Ÿ

3. ðŸŸ¢ **ä½Žå„ªå…ˆç´š**: ç¢ºèªæ•¸æ“šåº«é€£æŽ¥è¨­ç½®
   - ç¢ºä¿é€£æŽ¥åˆ°æ­£ç¢ºçš„æ•¸æ“šåº«
   - æŽ’é™¤é…ç½®éŒ¯èª¤çš„å¯èƒ½æ€§

### é æœŸçµæžœ
- âœ… æ‰¾åˆ°æ•¸æ“šä¸Ÿå¤±çš„åŽŸå› 
- âœ… ç¢ºèªæ˜¯å¦æœ‰å¯ç”¨çš„å‚™ä»½
- âœ… åˆ¶å®šæ•¸æ“šæ¢å¾©è¨ˆç•«
- âœ… å¯¦æ–½é é˜²æŽªæ–½

### ä¸‹ä¸€æ­¥è¡Œå‹•
1. ç«‹å³æª¢æŸ¥ Neon Console çš„å‚™ä»½ç‹€æ…‹
2. å¦‚æžœæœ‰å‚™ä»½ï¼Œæº–å‚™æ¢å¾©è¨ˆç•«
3. å¦‚æžœæ²’æœ‰å‚™ä»½ï¼Œæª¢æŸ¥å…¶ä»–æ¢å¾©é¸é …
4. å¯¦æ–½æ•¸æ“šæ¢å¾©
5. é©—è­‰æ¢å¾©çµæžœ
6. æ·»åŠ é é˜²æŽªæ–½ï¼ˆå®šæœŸå‚™ä»½ã€ç›£æŽ§ï¼‰

