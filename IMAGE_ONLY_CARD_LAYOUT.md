# Match-up 遊戲 - 只有圖片卡片 1:1 比例顯示

## 🎯 新功能概述

當卡片只有圖片沒有英文單字時，圖片現在會以 **1:1 的正方形比例**顯示，而不是被拉伸！

### 功能特性
✅ **1:1 正方形比例** - 圖片保持原始寬高比
✅ **居中顯示** - 圖片在卡片中央
✅ **自動適配** - 根據卡片大小自動調整
✅ **完整佔據** - 圖片佔據整個卡片區域

---

## 📊 視覺對比

### 舊版本（拉伸）
```
┌─────────────────┐
│                 │
│   圖片被拉伸    │  ← 寬度 100%，高度 100%
│   變形顯示      │
│                 │
└─────────────────┘
```

### 新版本（1:1 正方形）
```
┌─────────────────┐
│                 │
│   ┌───────────┐ │
│   │  圖片1:1  │ │  ← 寬度 = 高度（正方形）
│   │  正方形   │ │
│   └───────────┘ │
│                 │
└─────────────────┘
```

---

## 🔧 技術實現

### 新增佈局函數：`createCardLayoutF`

```javascript
// 🔥 佈局函數 - 情況 F：只有圖片（1:1 比例）
createCardLayoutF(container, background, width, height, imageUrl, pairId) {
    // 首先添加背景（最底層）
    container.add([background]);

    // 計算正方形圖片的尺寸（取寬度和高度的最小值，保持 1:1）
    const squareSize = Math.min(width - 4, height - 4);

    // 圖片置中顯示
    this.loadAndDisplayImage(container, imageUrl, 0, 0, squareSize, pairId);
}
```

### 觸發條件

當卡片滿足以下條件時，使用佈局 F：
- ✅ 有圖片 (`hasImage = true`)
- ✅ 沒有文字 (`hasText = false`)
- ✅ 沒有音頻 (`hasAudio = false`)

```javascript
if (hasImage && !hasText && !hasAudio) {
    // 只有圖片（無文字、無語音）- 1:1 比例顯示
    this.createCardLayoutF(container, background, width, height, imageUrl, pairId);
}
```

---

## 📐 尺寸計算

### 正方形尺寸公式
```javascript
const squareSize = Math.min(width - 4, height - 4);
```

**說明**：
- 取卡片寬度和高度的最小值
- 減去 4 像素邊距（保留邊框空間）
- 結果是一個正方形

### 示例
| 卡片寬度 | 卡片高度 | 圖片尺寸 |
|---------|---------|---------|
| 200px | 200px | 196px × 196px |
| 200px | 300px | 196px × 196px |
| 300px | 200px | 196px × 196px |

---

## 🎨 支持的卡片類型

### 佈局 A：圖片 + 文字 + 音頻
```
┌─────────────────┐
│      🔊         │  ← 音頻按鈕（上 30%）
├─────────────────┤
│   ┌───────────┐ │
│   │  圖片1:1  │ │  ← 圖片（中 40%）
│   └───────────┘ │
├─────────────────┤
│   English Word  │  ← 文字（下 30%）
└─────────────────┘
```

### 佈局 D：圖片 + 文字
```
┌─────────────────┐
│   ┌───────────┐ │
│   │  圖片1:1  │ │  ← 圖片（上 90%）
│   └───────────┘ │
├─────────────────┤
│   English Word  │  ← 文字（下 10%）
└─────────────────┘
```

### 佈局 F：只有圖片 ⭐ 新增
```
┌─────────────────┐
│                 │
│   ┌───────────┐ │
│   │  圖片1:1  │ │  ← 圖片（100% 正方形）
│   └───────────┘ │
│                 │
└─────────────────┘
```

---

## 📝 控制台日誌

### 使用佈局 F 時
```
🎨 佈局 F: 只有圖片 (1:1 比例) {
    width: 200,
    height: 200,
    pairId: "pair-123",
    imageUrl: "https://example.com/image.jpg..."
}
```

---

## 🧪 驗證步驟

### 1. 準備測試數據
- 創建只有圖片的卡片對
- 確保沒有英文單字
- 確保沒有音頻

### 2. 打開遊戲
- 加載遊戲頁面
- 查看卡片顯示

### 3. 驗證圖片顯示
- [ ] 圖片以正方形顯示
- [ ] 圖片在卡片中央
- [ ] 圖片沒有被拉伸
- [ ] 圖片佔據整個卡片區域

### 4. 測試不同卡片大小
- [ ] 小卡片（150×150）
- [ ] 中卡片（200×200）
- [ ] 大卡片（300×300）
- [ ] 非正方形卡片（200×300）

---

## 🔄 兼容性

### 支持的佈局
✅ Separated 佈局
✅ Mixed 佈局
✅ 其他所有佈局

### 支持的圖片格式
✅ JPG / JPEG
✅ PNG
✅ WebP
✅ GIF

---

## 💡 設計考慮

### 為什麼使用 1:1 比例？
1. **保持原始寬高比** - 圖片不會被拉伸變形
2. **視覺美觀** - 正方形卡片看起來更整齊
3. **用戶體驗** - 圖片顯示更清晰
4. **一致性** - 與其他佈局保持視覺一致

### 為什麼取最小值？
```javascript
const squareSize = Math.min(width - 4, height - 4);
```
- 確保圖片完全在卡片內
- 避免圖片超出邊界
- 保留邊框空間

---

## 📊 代碼改動

**文件**：`public/games/match-up-game/scenes/game.js`

**改動位置**：
1. 第 2357-2359 行：修改條件判斷
2. 第 2637-2654 行：新增 `createCardLayoutF` 函數

**改動內容**：
- 新增 1 個佈局函數
- 修改 1 個條件判斷
- 總計 +23 行代碼

---

## 🚀 部署狀態

### Git 提交
```
e742c2a - Feature: Add layout F for image-only cards with 1:1 aspect ratio
```

### 部署進度
- ✅ 代碼修改完成
- ✅ Git 提交成功
- ✅ GitHub 推送成功
- ⏳ Vercel 自動部署中（2-3 分鐘）

---

## ✨ 用戶體驗改進

### 之前
- 圖片被拉伸變形
- 視覺效果不佳

### 之後
- 圖片保持 1:1 正方形
- 視覺效果更美觀
- 圖片顯示更清晰

---

## 📞 下一步

### 立即驗證（部署後）
1. 打開遊戲頁面
2. 查看只有圖片的卡片
3. 驗證圖片是否為正方形
4. 確認圖片沒有被拉伸

### 監控項目
- 圖片顯示效果
- 卡片佈局是否正確
- 用戶反饋

---

**最後更新**：2025-11-01
**版本**：v1.2 - 添加只有圖片卡片 1:1 比例顯示
**狀態**：✅ 完成，等待部署驗證

