{"version":3,"file":"main-42e1641e.js","sources":["../../src/main.ts"],"sourcesContent":["import Phaser from 'phaser';\nimport { phaserConfig, GAME_CONFIG } from './game/config/gameConfig';\n\n// Êõ¥Êñ∞ÁãÄÊÖãÈ°ØÁ§∫\nfunction updateStatus(message: string, isError: boolean = false) {\n  const statusElement = document.getElementById('game-status');\n  if (statusElement) {\n    statusElement.innerHTML = message;\n    statusElement.style.borderColor = isError ? '#e74c3c' : '#3498db';\n    statusElement.style.background = isError ? \n      'rgba(231, 76, 60, 0.2)' : 'rgba(52, 73, 94, 0.8)';\n  }\n}\n\n// Èö±ËóèËºâÂÖ•Áï´Èù¢\nfunction hideLoadingScreen() {\n  const loadingScreen = document.getElementById('loading-screen');\n  if (loadingScreen) {\n    loadingScreen.style.opacity = '0';\n    setTimeout(() => {\n      loadingScreen.style.display = 'none';\n    }, 500);\n  }\n}\n\n// ‰∏ªÊáâÁî®Á®ãÂºèÈ°û\nclass GameApplication {\n  private game: Phaser.Game | null = null;\n  private isInitialized: boolean = false;\n\n  constructor() {\n    this.init();\n  }\n\n  private async init() {\n    try {\n      updateStatus('üîß ÂàùÂßãÂåñÈÅäÊà≤ÈÖçÁΩÆ...');\n      \n      // Ê™¢Êü• Phaser ÊòØÂê¶ËºâÂÖ•\n      if (typeof Phaser === 'undefined') {\n        throw new Error('Phaser 3 Êú™ËÉΩÊ≠£Á¢∫ËºâÂÖ•');\n      }\n\n      updateStatus(`‚úÖ Phaser ${Phaser.VERSION} ËºâÂÖ•ÊàêÂäüÔºÅ`);\n      \n      // Á≠âÂæÖ DOM ÂÆåÂÖ®ËºâÂÖ•\n      if (document.readyState !== 'complete') {\n        await new Promise(resolve => {\n          window.addEventListener('load', resolve);\n        });\n      }\n\n      updateStatus('üéÆ ÂâµÂª∫ÈÅäÊà≤ÂØ¶‰æã...');\n      \n      // ÂâµÂª∫ Phaser ÈÅäÊà≤ÂØ¶‰æã\n      this.createGame();\n      \n    } catch (error) {\n      console.error('ÈÅäÊà≤ÂàùÂßãÂåñÂ§±Êïó:', error);\n      updateStatus(`‚ùå ÂàùÂßãÂåñÂ§±Êïó: ${error instanceof Error ? error.message : 'Êú™Áü•ÈåØË™§'}`, true);\n    }\n  }\n\n  private createGame() {\n    try {\n      // Á¢∫‰øùÈÅäÊà≤ÂÆπÂô®Â≠òÂú®\n      const gameContainer = document.getElementById('game-container');\n      if (!gameContainer) {\n        throw new Error('Êâæ‰∏çÂà∞ÈÅäÊà≤ÂÆπÂô®ÂÖÉÁ¥†');\n      }\n\n      // ÂâµÂª∫ÈÅäÊà≤ÈÖçÁΩÆ\n      const config: Phaser.Types.Core.GameConfig = {\n        ...phaserConfig,\n        parent: gameContainer,\n        callbacks: {\n          preBoot: (_game) => {\n            console.log('üöÄ Phaser ÈÅäÊà≤È†êÂïüÂãï');\n            updateStatus('üöÄ ÈÅäÊà≤ÂºïÊìéÂïüÂãï‰∏≠...');\n          },\n          postBoot: (_game) => {\n            console.log('‚úÖ Phaser ÈÅäÊà≤ÂïüÂãïÂÆåÊàê');\n            updateStatus('üéØ ÈÅäÊà≤Ê∫ñÂÇôÂ∞±Á∑íÔºÅÈªûÊìäÈñãÂßãÈÅäÊà≤');\n            hideLoadingScreen();\n            this.isInitialized = true;\n          }\n        }\n      };\n\n      // ÂâµÂª∫ÈÅäÊà≤ÂØ¶‰æã\n      this.game = new Phaser.Game(config);\n\n      // Ë®≠ÁΩÆÈÅäÊà≤‰∫ã‰ª∂Áõ£ËÅΩ\n      this.setupGameEvents();\n\n    } catch (error) {\n      console.error('ÂâµÂª∫ÈÅäÊà≤Â§±Êïó:', error);\n      updateStatus(`‚ùå ÈÅäÊà≤ÂâµÂª∫Â§±Êïó: ${error instanceof Error ? error.message : 'Êú™Áü•ÈåØË™§'}`, true);\n    }\n  }\n\n  private setupGameEvents() {\n    if (!this.game) return;\n\n    // Áõ£ËÅΩÈÅäÊà≤‰∫ã‰ª∂\n    this.game.events.on('ready', () => {\n      console.log('üéÆ ÈÅäÊà≤Á≥ªÁµ±Ê∫ñÂÇôÂÆåÊàê');\n    });\n\n    this.game.events.on('destroy', () => {\n      console.log('üîÑ ÈÅäÊà≤ÂØ¶‰æãÂ∑≤Èä∑ÊØÄ');\n      this.isInitialized = false;\n    });\n\n    // Áõ£ËÅΩÁ™óÂè£Â§ßÂ∞èËÆäÂåñ\n    window.addEventListener('resize', () => {\n      if (this.game && this.isInitialized) {\n        this.game.scale.refresh();\n      }\n    });\n\n    // Áõ£ËÅΩÈ†ÅÈù¢ÂèØË¶ãÊÄßËÆäÂåñ\n    document.addEventListener('visibilitychange', () => {\n      if (this.game && this.isInitialized) {\n        if (document.hidden) {\n          // È†ÅÈù¢Èö±ËóèÊôÇÊö´ÂÅúÈÅäÊà≤\n          // this.game.scene.pause();\n        } else {\n          // È†ÅÈù¢È°ØÁ§∫ÊôÇÊÅ¢Âæ©ÈÅäÊà≤\n          // this.game.scene.resume();\n        }\n      }\n    });\n  }\n\n  // ÂÖ¨ÂÖ±ÊñπÊ≥ïÔºöÁç≤ÂèñÈÅäÊà≤ÂØ¶‰æã\n  public getGame(): Phaser.Game | null {\n    return this.game;\n  }\n\n  // ÂÖ¨ÂÖ±ÊñπÊ≥ïÔºöÊ™¢Êü•ÊòØÂê¶Â∑≤ÂàùÂßãÂåñ\n  public isReady(): boolean {\n    return this.isInitialized;\n  }\n\n  // ÂÖ¨ÂÖ±ÊñπÊ≥ïÔºöÈä∑ÊØÄÈÅäÊà≤\n  public destroy() {\n    if (this.game) {\n      this.game.destroy(true);\n      this.game = null;\n      this.isInitialized = false;\n    }\n  }\n}\n\n// ÂÖ®ÂüüËÆäÊï∏Ôºå‰æõË™øË©¶‰ΩøÁî®\ndeclare global {\n  interface Window {\n    gameApp: GameApplication;\n    Phaser: typeof Phaser;\n  }\n}\n\n// ÂïüÂãïÊáâÁî®Á®ãÂºè\nconsole.log('üéØ ÈñãÂßãÂàùÂßãÂåñ Phaser 3 È£õÊ©üÈÅ∏ÊìáÂô®');\nconsole.log(`üìä ÈÅäÊà≤ÈÖçÁΩÆ: ${GAME_CONFIG.SCREEN.WIDTH}x${GAME_CONFIG.SCREEN.HEIGHT}`);\n\nconst gameApp = new GameApplication();\n\n// Â∞áÂØ¶‰æãÊéõËºâÂà∞ÂÖ®ÂüüÔºå‰æõË™øË©¶‰ΩøÁî®\nwindow.gameApp = gameApp;\nwindow.Phaser = Phaser;\n\n// ÈñãÁôºÊ®°Âºè‰∏ãÁöÑÈ°çÂ§ñÂäüËÉΩ\nif (process.env.NODE_ENV === 'development') {\n  console.log('üîß ÈñãÁôºÊ®°ÂºèÂ∑≤ÂïüÁî®');\n\n  // ÁÜ±ÈáçËºâÊîØÊè¥ (Âú® Vite Áí∞Â¢É‰∏≠)\n  if (typeof window !== 'undefined' && (window as any).import?.meta?.hot) {\n    (window as any).import.meta.hot.accept(() => {\n      console.log('üîÑ ÁÜ±ÈáçËºâËß∏ÁôºÔºåÈáçÊñ∞ËºâÂÖ•ÈÅäÊà≤');\n      gameApp.destroy();\n      location.reload();\n    });\n  }\n\n  // ÈñãÁôºÊèêÁ§∫\n  console.log('üéÆ ÈñãÁôºÂø´Êç∑Èçµ:');\n  console.log('  F12: ÂàáÊèõË™øË©¶Èù¢Êùø');\n  console.log('  Ctrl+R: ÈáçÊñ∞ËºâÂÖ•Â†¥ÊôØ');\n  console.log('  Ctrl+D: ÂàáÊèõÁâ©ÁêÜË™øË©¶');\n  console.log('  Ctrl+G: ÂàáÊèõÁ∂≤Ê†ºÈ°ØÁ§∫');\n  console.log('  Ctrl+P: Êö´ÂÅú/ÊÅ¢Âæ©ÈÅäÊà≤');\n}\n\nexport default gameApp;\n"],"names":["updateStatus","message","isError","statusElement","document","getElementById","innerHTML","style","borderColor","background","console","log","GAME_CONFIG","SCREEN","WIDTH","HEIGHT","gameApp","constructor","this","game","isInitialized","init","Phaser","Error","VERSION","readyState","Promise","resolve","window","addEventListener","createGame","error","gameContainer","config","phaserConfig","parent","callbacks","preBoot","_game","postBoot","loadingScreen","opacity","setTimeout","display","Game","setupGameEvents","events","on","scale","refresh","getGame","isReady","destroy"],"mappings":"oHAIA,SAASA,EAAaC,EAAiBC,GAAmB,GAClD,MAAAC,EAAgBC,SAASC,eAAe,eAC1CF,IACFA,EAAcG,UAAYL,EACZE,EAAAI,MAAMC,YAAcN,EAAU,UAAY,UAC1CC,EAAAI,MAAME,WAAaP,EAC/B,yBAA2B,wBAEjC,gsBAwJAQ,QAAQC,IAAI,2BACZD,QAAQC,IAAI,YAAYC,EAAYC,OAAOC,SAASF,EAAYC,OAAOE,UAEvE,MAAMC,EAAU,IA7IhB,MAIE,WAAAC,GAHAC,KAAQC,KAA2B,KACnCD,KAAQE,eAAyB,EAG/BF,KAAKG,MACP,CAEA,UAAcA,GACR,IAIE,GAHJrB,EAAa,sBAGS,IAAXsB,EACH,MAAA,IAAIC,MAAM,mBAGLvB,EAAA,YAAYsB,EAAOE,iBAGJ,aAAxBpB,SAASqB,kBACL,IAAIC,QAAmBC,IACpBC,OAAAC,iBAAiB,OAAQF,KAIpC3B,EAAa,gBAGbkB,KAAKY,mBAEEC,GACCrB,QAAAqB,MAAM,WAAYA,GAC1B/B,EAAa,YAAY+B,aAAiBR,MAAQQ,EAAM9B,QAAU,UAAU,EAC9E,CACF,CAEQ,UAAA6B,GACF,IAEI,MAAAE,EAAgB5B,SAASC,eAAe,kBAC9C,IAAK2B,EACG,MAAA,IAAIT,MAAM,aAIlB,MAAMU,EAAuC,IACxCC,EACHC,OAAQH,EACRI,UAAW,CACTC,QAAUC,IACR5B,QAAQC,IAAI,mBACZX,EAAa,kBAEfuC,SAAWD,IACT5B,QAAQC,IAAI,mBACZX,EAAa,oBAnEzB,WACQ,MAAAwC,EAAgBpC,SAASC,eAAe,kBAC1CmC,IACFA,EAAcjC,MAAMkC,QAAU,IAC9BC,WAAW,KACTF,EAAcjC,MAAMoC,QAAU,QAC7B,KAEP,IA6DYzB,KAAKE,eAAgB,KAM3BF,KAAKC,KAAO,IAAIG,EAAOsB,KAAKX,GAG5Bf,KAAK2B,wBAEEd,GACCrB,QAAAqB,MAAM,UAAWA,GACzB/B,EAAa,aAAa+B,aAAiBR,MAAQQ,EAAM9B,QAAU,UAAU,EAC/E,CACF,CAEQ,eAAA4C,GACD3B,KAAKC,OAGVD,KAAKC,KAAK2B,OAAOC,GAAG,QAAS,KAC3BrC,QAAQC,IAAI,iBAGdO,KAAKC,KAAK2B,OAAOC,GAAG,UAAW,KAC7BrC,QAAQC,IAAI,cACZO,KAAKE,eAAgB,IAIhBQ,OAAAC,iBAAiB,SAAU,KAC5BX,KAAKC,MAAQD,KAAKE,eACfF,KAAAC,KAAK6B,MAAMC,YAKX7C,SAAAyB,iBAAiB,mBAAoB,KACxCX,KAAKC,MAAQD,KAAKE,gBAU1B,CAGO,OAAA8B,GACL,OAAOhC,KAAKC,IACd,CAGO,OAAAgC,GACL,OAAOjC,KAAKE,aACd,CAGO,OAAAgC,GACDlC,KAAKC,OACFD,KAAAC,KAAKiC,SAAQ,GAClBlC,KAAKC,KAAO,KACZD,KAAKE,eAAgB,EAEzB,GAkBFQ,OAAOZ,QAAUA,EACjBY,OAAON,OAASA"}