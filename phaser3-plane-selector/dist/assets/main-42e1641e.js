import{P as e}from"./phaser-51c66cbb.js";import{b as t,p as s}from"./game-b51d85e0.js";import"./planes-9c241b37.js";function i(e,t=!1){const s=document.getElementById("game-status");s&&(s.innerHTML=e,s.style.borderColor=t?"#e74c3c":"#3498db",s.style.background=t?"rgba(231, 76, 60, 0.2)":"rgba(52, 73, 94, 0.8)")}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();console.log("🎯 開始初始化 Phaser 3 飛機選擇器"),console.log(`📊 遊戲配置: ${t.SCREEN.WIDTH}x${t.SCREEN.HEIGHT}`);const o=new class{constructor(){this.game=null,this.isInitialized=!1,this.init()}async init(){try{if(i("🔧 初始化遊戲配置..."),void 0===e)throw new Error("Phaser 3 未能正確載入");i(`✅ Phaser ${e.VERSION} 載入成功！`),"complete"!==document.readyState&&await new Promise(e=>{window.addEventListener("load",e)}),i("🎮 創建遊戲實例..."),this.createGame()}catch(t){console.error("遊戲初始化失敗:",t),i(`❌ 初始化失敗: ${t instanceof Error?t.message:"未知錯誤"}`,!0)}}createGame(){try{const t=document.getElementById("game-container");if(!t)throw new Error("找不到遊戲容器元素");const o={...s,parent:t,callbacks:{preBoot:e=>{console.log("🚀 Phaser 遊戲預啟動"),i("🚀 遊戲引擎啟動中...")},postBoot:e=>{console.log("✅ Phaser 遊戲啟動完成"),i("🎯 遊戲準備就緒！點擊開始遊戲"),function(){const e=document.getElementById("loading-screen");e&&(e.style.opacity="0",setTimeout(()=>{e.style.display="none"},500))}(),this.isInitialized=!0}}};this.game=new e.Game(o),this.setupGameEvents()}catch(t){console.error("創建遊戲失敗:",t),i(`❌ 遊戲創建失敗: ${t instanceof Error?t.message:"未知錯誤"}`,!0)}}setupGameEvents(){this.game&&(this.game.events.on("ready",()=>{console.log("🎮 遊戲系統準備完成")}),this.game.events.on("destroy",()=>{console.log("🔄 遊戲實例已銷毀"),this.isInitialized=!1}),window.addEventListener("resize",()=>{this.game&&this.isInitialized&&this.game.scale.refresh()}),document.addEventListener("visibilitychange",()=>{this.game&&this.isInitialized}))}getGame(){return this.game}isReady(){return this.isInitialized}destroy(){this.game&&(this.game.destroy(!0),this.game=null,this.isInitialized=!1)}};window.gameApp=o,window.Phaser=e;
//# sourceMappingURL=main-42e1641e.js.map
