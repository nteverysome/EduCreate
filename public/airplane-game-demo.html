<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£›æ©Ÿè©å½™éŠæˆ² - å¯¦éš›å¯ç©ç‰ˆæœ¬</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #87CEEB, #4682B4);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .game-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            max-width: 800px;
            width: 100%;
        }
        
        .game-title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        #gameCanvas {
            border: 2px solid #3498db;
            border-radius: 8px;
            display: block;
            margin: 0 auto;
            background: linear-gradient(to bottom, #87CEEB, #4682B4);
        }
        
        .game-ui {
            margin-top: 20px;
            text-align: center;
        }
        
        .question-panel {
            background: #f8f9fa;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .question-text {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .option-btn {
            padding: 10px 15px;
            border: 2px solid #3498db;
            border-radius: 5px;
            background: white;
            color: #2c3e50;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option-btn:hover {
            background: #3498db;
            color: white;
        }
        
        .option-btn.correct {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }
        
        .option-btn.wrong {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }
        
        .score-panel {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .controls {
            margin: 10px 0;
        }
        
        .control-btn {
            padding: 8px 16px;
            margin: 0 5px;
            border: none;
            border-radius: 5px;
            background: #3498db;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }
        
        .control-btn:hover {
            background: #2980b9;
        }
        
        .feedback {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            min-height: 20px;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback.wrong {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .instructions {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: #1976d2;
        }
        
        .instructions ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .demo-note {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="demo-note">
            ğŸ® é€™æ˜¯ä¸€å€‹å¯¦éš›å¯ç©çš„é£›æ©Ÿè©å½™éŠæˆ²åŸå‹ - è­‰æ˜æˆ‘å€‘èƒ½å‰µå»ºçœŸæ­£çš„éŠæˆ²ï¼
        </div>
        
        <h1 class="game-title">ğŸ›©ï¸ é£›æ©Ÿè©å½™éŠæˆ²</h1>
        
        <div class="instructions">
            <h3>ğŸ¯ éŠæˆ²èªªæ˜ï¼š</h3>
            <ul>
                <li>é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€å•Ÿå‹•</li>
                <li>é£›æ©Ÿæœƒè‡ªå‹•é£›è¡Œï¼Œç¢°åˆ°é‡‘è‰²é›²æœµæœƒå‡ºç¾å•é¡Œ</li>
                <li>é¸æ“‡æ­£ç¢ºçš„è‹±æ–‡ç¿»è­¯ä¾†ç²å¾—åˆ†æ•¸</li>
                <li>é€™å€‹éŠæˆ²ä½¿ç”¨ Canvas 2D æŠ€è¡“ï¼Œæ¨¡æ“¬ Wordwall çš„æ¶æ§‹</li>
            </ul>
        </div>
        
        <canvas id="gameCanvas" width="760" height="400"></canvas>
        
        <div class="game-ui">
            <div class="score-panel">
                <span>åˆ†æ•¸: <span id="score">0</span></span>
                <span>æ­£ç¢º: <span id="correct">0</span></span>
                <span>éŒ¯èª¤: <span id="wrong">0</span></span>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="game.startGame()">ğŸš€ é–‹å§‹éŠæˆ²</button>
                <button class="control-btn" onclick="game.pauseGame()">â¸ï¸ æš«åœ</button>
                <button class="control-btn" onclick="game.resetGame()">ğŸ”„ é‡æ–°é–‹å§‹</button>
            </div>
            
            <div class="feedback" id="feedback">é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€ä¾†é–‹å§‹æ‚¨çš„è©å½™å­¸ç¿’ä¹‹æ—…ï¼</div>
            
            <div class="question-panel" id="questionPanel" style="display: none;">
                <div class="question-text" id="questionText"></div>
                <div class="options" id="optionsContainer"></div>
            </div>
        </div>
    </div>

    <script>
        // è©å½™æ•¸æ“š - æ¨¡æ“¬ GEPT åˆ†ç´š
        const vocabularyData = [
            { chinese: "é£›æ©Ÿ", english: "airplane", level: 1 },
            { chinese: "æ±½è»Š", english: "car", level: 1 },
            { chinese: "æˆ¿å­", english: "house", level: 1 },
            { chinese: "å­¸æ ¡", english: "school", level: 1 },
            { chinese: "æ›¸æœ¬", english: "book", level: 1 },
            { chinese: "è˜‹æœ", english: "apple", level: 1 },
            { chinese: "è²“å’ª", english: "cat", level: 1 },
            { chinese: "ç‹—ç‹—", english: "dog", level: 1 },
            { chinese: "å¤ªé™½", english: "sun", level: 2 },
            { chinese: "æœˆäº®", english: "moon", level: 2 },
            { chinese: "æ˜Ÿæ˜Ÿ", english: "star", level: 2 },
            { chinese: "é›²æœµ", english: "cloud", level: 2 }
        ];

        // éŠæˆ²é¡ - æ¨¡æ“¬ Wordwall çš„æ¶æ§‹
        class AirplaneVocabularyGame {
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.isRunning = false;
                this.isPaused = false;
                
                // éŠæˆ²å°è±¡
                this.airplane = { x: 50, y: 200, width: 60, height: 30, speed: 2 };
                this.clouds = [];
                this.currentQuestion = null;
                this.score = 0;
                this.correctAnswers = 0;
                this.wrongAnswers = 0;
                
                // åˆå§‹åŒ–é›²æœµ
                this.initializeClouds();
                
                // é–‹å§‹æ¸²æŸ“å¾ªç’°
                this.gameLoop();
                
                console.log('ğŸ® é£›æ©Ÿè©å½™éŠæˆ²å·²åˆå§‹åŒ–ï¼');
            }
            
            initializeClouds() {
                for (let i = 0; i < 5; i++) {
                    this.clouds.push({
                        x: 200 + i * 150,
                        y: 50 + Math.random() * 200,
                        width: 80,
                        height: 50,
                        speed: 0.5 + Math.random() * 0.5,
                        hasQuestion: i % 2 === 0,
                        triggered: false
                    });
                }
            }
            
            startGame() {
                this.isRunning = true;
                this.isPaused = false;
                document.getElementById('feedback').textContent = 'ğŸ® éŠæˆ²é–‹å§‹ï¼é£›æ©Ÿæ­£åœ¨é£›è¡Œï¼Œç¢°åˆ°é‡‘è‰²é›²æœµä¾†å›ç­”å•é¡Œï¼';
                document.getElementById('feedback').className = 'feedback';
                console.log('ğŸš€ éŠæˆ²é–‹å§‹ï¼');
            }
            
            pauseGame() {
                this.isPaused = !this.isPaused;
                document.getElementById('feedback').textContent = this.isPaused ? 'â¸ï¸ éŠæˆ²æš«åœ' : 'â–¶ï¸ éŠæˆ²ç¹¼çºŒ';
            }
            
            resetGame() {
                this.isRunning = false;
                this.isPaused = false;
                this.score = 0;
                this.correctAnswers = 0;
                this.wrongAnswers = 0;
                this.airplane.x = 50;
                this.airplane.y = 200;
                this.currentQuestion = null;
                
                // é‡ç½®é›²æœµ
                this.clouds.forEach(cloud => {
                    cloud.triggered = false;
                    cloud.x = 200 + Math.random() * 400;
                });
                
                this.updateUI();
                this.hideQuestion();
                document.getElementById('feedback').textContent = 'ğŸ”„ éŠæˆ²é‡ç½®å®Œæˆï¼Œé»æ“Šé–‹å§‹éŠæˆ²ï¼';
                document.getElementById('feedback').className = 'feedback';
            }
            
            update() {
                if (!this.isRunning || this.isPaused) return;
                
                // æ›´æ–°é£›æ©Ÿä½ç½® (ç°¡å–®çš„è‡ªå‹•é£›è¡Œ)
                this.airplane.x += this.airplane.speed;
                this.airplane.y += Math.sin(Date.now() * 0.003) * 0.5;
                
                // é‚Šç•Œæª¢æŸ¥
                if (this.airplane.x > this.canvas.width) {
                    this.airplane.x = -this.airplane.width;
                    // é‡æ–°ç”Ÿæˆé›²æœµä½ç½®
                    this.clouds.forEach(cloud => {
                        cloud.x = 200 + Math.random() * 400;
                        cloud.triggered = false;
                    });
                }
                
                // æ›´æ–°é›²æœµ
                this.clouds.forEach(cloud => {
                    cloud.x -= cloud.speed;
                    if (cloud.x < -cloud.width) {
                        cloud.x = this.canvas.width + Math.random() * 200;
                        cloud.triggered = false;
                    }
                });
                
                // æª¢æŸ¥ç¢°æ’
                this.checkCollisions();
            }
            
            checkCollisions() {
                this.clouds.forEach(cloud => {
                    if (cloud.hasQuestion && !cloud.triggered && this.isColliding(this.airplane, cloud)) {
                        cloud.triggered = true;
                        this.triggerQuestion();
                    }
                });
            }
            
            isColliding(rect1, rect2) {
                return rect1.x < rect2.x + rect2.width &&
                       rect1.x + rect1.width > rect2.x &&
                       rect1.y < rect2.y + rect2.height &&
                       rect1.y + rect1.height > rect2.y;
            }
            
            triggerQuestion() {
                this.isPaused = true;
                const randomWord = vocabularyData[Math.floor(Math.random() * vocabularyData.length)];
                this.currentQuestion = randomWord;
                
                // ç”Ÿæˆé¸é …
                const options = [randomWord.english];
                while (options.length < 4) {
                    const randomOption = vocabularyData[Math.floor(Math.random() * vocabularyData.length)].english;
                    if (!options.includes(randomOption)) {
                        options.push(randomOption);
                    }
                }
                
                // æ‰“äº‚é¸é …
                for (let i = options.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [options[i], options[j]] = [options[j], options[i]];
                }
                
                this.showQuestion(randomWord.chinese, options);
                console.log(`â“ å•é¡Œï¼š${randomWord.chinese} = ${randomWord.english}`);
            }
            
            showQuestion(questionText, options) {
                document.getElementById('questionText').textContent = `"${questionText}" çš„è‹±æ–‡æ˜¯ï¼Ÿ`;
                const container = document.getElementById('optionsContainer');
                container.innerHTML = '';
                
                options.forEach(option => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.textContent = option;
                    btn.onclick = () => this.answerQuestion(option);
                    container.appendChild(btn);
                });
                
                document.getElementById('questionPanel').style.display = 'block';
            }
            
            answerQuestion(selectedAnswer) {
                const correct = selectedAnswer === this.currentQuestion.english;
                
                // æ›´æ–°æŒ‰éˆ•æ¨£å¼
                const buttons = document.querySelectorAll('.option-btn');
                buttons.forEach(btn => {
                    if (btn.textContent === this.currentQuestion.english) {
                        btn.className = 'option-btn correct';
                    } else if (btn.textContent === selectedAnswer && !correct) {
                        btn.className = 'option-btn wrong';
                    }
                });
                
                // æ›´æ–°åˆ†æ•¸
                if (correct) {
                    this.score += 10;
                    this.correctAnswers++;
                    document.getElementById('feedback').textContent = 'âœ… æ­£ç¢ºï¼å¤ªæ£’äº†ï¼';
                    document.getElementById('feedback').className = 'feedback correct';
                    console.log('âœ… ç­”å°äº†ï¼');
                } else {
                    this.wrongAnswers++;
                    document.getElementById('feedback').textContent = `âŒ éŒ¯èª¤ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ "${this.currentQuestion.english}"`;
                    document.getElementById('feedback').className = 'feedback wrong';
                    console.log('âŒ ç­”éŒ¯äº†ï¼');
                }
                
                this.updateUI();
                
                // 2ç§’å¾Œç¹¼çºŒéŠæˆ²
                setTimeout(() => {
                    this.hideQuestion();
                    this.isPaused = false;
                }, 2000);
            }
            
            hideQuestion() {
                document.getElementById('questionPanel').style.display = 'none';
            }
            
            updateUI() {
                document.getElementById('score').textContent = this.score;
                document.getElementById('correct').textContent = this.correctAnswers;
                document.getElementById('wrong').textContent = this.wrongAnswers;
            }
            
            render() {
                // æ¸…é™¤ç•«å¸ƒ
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // ç¹ªè£½å¤©ç©ºèƒŒæ™¯
                const gradient = this.ctx.createLinearGradient(0, 0, 0, this.canvas.height);
                gradient.addColorStop(0, '#87CEEB');
                gradient.addColorStop(1, '#4682B4');
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // ç¹ªè£½é›²æœµ
                this.clouds.forEach(cloud => {
                    this.ctx.fillStyle = cloud.hasQuestion ? '#FFD700' : '#FFFFFF';
                    this.ctx.fillRect(cloud.x, cloud.y, cloud.width, cloud.height);
                    
                    // é›²æœµæ–‡å­—
                    this.ctx.fillStyle = '#333';
                    this.ctx.font = '12px Arial';
                    this.ctx.textAlign = 'center';
                    if (cloud.hasQuestion) {
                        this.ctx.fillText('?', cloud.x + cloud.width/2, cloud.y + cloud.height/2 + 4);
                    }
                });
                
                // ç¹ªè£½é£›æ©Ÿ
                this.ctx.fillStyle = '#FF6B6B';
                this.ctx.fillRect(this.airplane.x, this.airplane.y, this.airplane.width, this.airplane.height);
                
                // é£›æ©Ÿç´°ç¯€
                this.ctx.fillStyle = '#4ECDC4';
                this.ctx.fillRect(this.airplane.x + 10, this.airplane.y + 5, 40, 20);
                
                // é£›æ©Ÿæ–‡å­—
                this.ctx.fillStyle = '#FFF';
                this.ctx.font = '16px Arial';
                this.ctx.textAlign = 'center';
                this.ctx.fillText('âœˆï¸', this.airplane.x + this.airplane.width/2, this.airplane.y + this.airplane.height/2 + 6);
            }
            
            gameLoop() {
                this.update();
                this.render();
                requestAnimationFrame(() => this.gameLoop());
            }
        }
        
        // åˆå§‹åŒ–éŠæˆ²
        console.log('ğŸ® æ­£åœ¨åˆå§‹åŒ–é£›æ©Ÿè©å½™éŠæˆ²...');
        const game = new AirplaneVocabularyGame();
        console.log('âœ… éŠæˆ²åˆå§‹åŒ–å®Œæˆï¼æ‚¨å¯ä»¥é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€ä¾†é–‹å§‹ï¼');
    </script>
</body>
</html>
