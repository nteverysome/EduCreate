# 分離模式響應式設計說明

## 核心設計原理

分離模式中的英文卡片（左側）採用**等比例縮放**設計，確保聲音按鈕、圖片和文字能夠協調地適應各種卡片大小。

---

## 卡片佈局結構

### 佈局 A：聲音按鈕 + 圖片 + 文字

```
┌─────────────────────┐
│   🔊 按鈕區域 (20%)  │  ← 按鈕大小 = 按鈕區域 × 45%
├─────────────────────┤
│   📷 圖片區域 (50%)  │  ← 圖片自動縮放
├─────────────────────┤
│   文字區域 (30%)    │  ← 文字自動縮放
└─────────────────────┘
```

---

## 等比例縮放計算

### 按鈕大小計算

```javascript
// 按鈕區域高度 = 卡片高度 × 20%
const buttonAreaHeight = height * 0.2;

// 按鈕大小 = 按鈕區域高度 × 45%（或 35% for 20 items）
const buttonSize = this.currentPageItemCount === 20
    ? Math.max(12, Math.min(24, buttonAreaHeight * 0.35))
    : Math.max(14, Math.min(28, buttonAreaHeight * 0.45));
```

### 圖片大小計算

```javascript
// 圖片區域高度 = 卡片高度 × 50%
const imageAreaHeight = height * 0.5;

// 圖片大小 = min(卡片寬度, 圖片區域高度)
const squareSize = Math.min(width - 4, imageAreaHeight - 4);
```

### 文字大小計算

```javascript
// 基礎字體大小 = 卡片高度 × 60%
let fontSize = Math.max(14, Math.min(48, height * 0.6));

// 根據寬度自動調整
while (textWidth > maxWidth && fontSize > 12) {
    fontSize -= 2;
}
```

---

## 卡片大小變化示例

### 小卡片（20 個，高度 ≈ 50px）

```
┌──────────────┐
│ 🔊 (10px)    │  ← 按鈕自動縮小
├──────────────┤
│ 📷 (25px)    │  ← 圖片自動縮小
├──────────────┤
│ 文字 (8px)   │  ← 文字自動縮小
└──────────────┘
```

### 中卡片（10 個，高度 ≈ 75px）

```
┌────────────────┐
│ 🔊 (16px)      │  ← 按鈕標準大小
├────────────────┤
│ 📷 (40px)      │  ← 圖片標準大小
├────────────────┤
│ 文字 (12px)    │  ← 文字標準大小
└────────────────┘
```

### 大卡片（7 個，高度 ≈ 100px）

```
┌────────────────────┐
│ 🔊 (20px)          │  ← 按鈕自動放大
├────────────────────┤
│ 📷 (50px)          │  ← 圖片自動放大
├────────────────────┤
│ 文字 (16px)        │  ← 文字自動放大
└────────────────────┘
```

---

## 佈局類型

### 佈局 A：聲音 + 圖片 + 文字
- 按鈕區域：20%
- 圖片區域：50%
- 文字區域：30%

### 佈局 B：只有聲音
- 按鈕置中，大小 = min(width, height) × 50%

### 佈局 C：只有文字
- 文字置中

### 佈局 D：圖片 + 文字
- 圖片區域：50%
- 文字區域：50%

### 佈局 E：聲音 + 文字
- 按鈕在上方
- 文字在下方

### 佈局 F：只有圖片
- 圖片置中，1:1 比例

---

## 關鍵代碼位置

### 按鈕大小計算
- 文件：`public/games/match-up-game/scenes/game.js`
- 函數：`createCardLayoutA()` 第 5373-5388 行
- 函數：`createCardLayoutB()` 第 5453-5461 行
- 函數：`createCardLayoutE()` 第 5498-5538 行

### 圖片大小計算
- 文件：`public/games/match-up-game/scenes/game.js`
- 函數：`createCardLayoutA()` 第 5392-5401 行
- 函數：`createCardLayoutD()` 第 5472-5522 行
- 函數：`createCardLayoutF()` 第 5540-5548 行

### 文字大小計算
- 文件：`public/games/match-up-game/scenes/game.js`
- 函數：`createTextElement()` 第 5645-5725 行

---

## 響應式特性

### 自動適應卡片大小
- ✅ 卡片變大時，所有內容按比例變大
- ✅ 卡片變小時，所有內容按比例變小
- ✅ 按鈕、圖片、文字始終協調

### 自動適應項目數量
- ✅ 7 個項目：卡片最大
- ✅ 10 個項目：卡片中等
- ✅ 20 個項目：卡片最小

### 自動適應設備
- ✅ 手機：卡片小，內容緊湊
- ✅ 平板：卡片中等，內容平衡
- ✅ 桌面：卡片大，內容充分

---

## 測試方法

### 快速測試
1. 打開分離模式遊戲
2. 選擇不同的卡片數量（7、10、20）
3. 觀察按鈕、圖片、文字是否協調縮放

### 驗證清單
- [ ] 按鈕始終可點擊
- [ ] 圖片始終清晰
- [ ] 文字始終在卡片內
- [ ] 整體佈局協調

---

## 版本歷史

### v215.0
- 減少按鈕區域高度：30% → 20%
- 調整按鈕大小比例：60% → 45%
- 增加圖片區域高度：40% → 50%

### v216.0
- 簡化代碼，保留核心等比例縮放功能
- 移除複雜的文字長度調整
- 移除複雜的動態邊距調整

---

## 相關文檔

- `CODE_COMPARISON_MIXED_VS_SEPARATED.md` - 混合模式 vs 分離模式代碼對比
- `VISUAL_COMPARISON_SUMMARY.md` - 視覺化對比總結

---

**最後更新**：2025-11-14
**版本**：v216.0

