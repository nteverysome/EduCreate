# ç”Ÿäº§ç¯å¢ƒ vs æœ¬åœ°ç¯å¢ƒè¯Šæ–­æŠ¥å‘Š

## ğŸ” é—®é¢˜ç°è±¡

- âœ… **æœ¬åœ°ç¯å¢ƒ** (localhost:3000): ç¼©å°åˆ°å·¥ä½œåˆ—æˆ–æ¢åˆ†é¡µæ—¶ï¼Œæ¸¸æˆä¿æŒè¿è¡Œï¼Œå¡ç‰‡é¡ºåºå’Œå·²é…å¯¹çŠ¶æ€ä¿æŒ
- âŒ **ç”Ÿäº§ç¯å¢ƒ** (Vercel): ç¼©å°åˆ°å·¥ä½œåˆ—æˆ–æ¢åˆ†é¡µæ—¶ï¼Œæ¸¸æˆé‡æ–°åˆå§‹åŒ–ï¼Œæ˜¾ç¤ºã€Œè½½å…¥è¯æ±‡ä¸­â€¦ã€

## ğŸ¯ æ ¹æœ¬åŸå› åˆ†æ

### ä»£ç å±‚é¢ï¼ˆç›¸åŒï¼‰
ä¸¤ä¸ªç¯å¢ƒçš„ä»£ç å®Œå…¨ç›¸åŒï¼ˆéƒ½æ˜¯ 52620f7ï¼‰ï¼š
- âœ… v102.0: `pauseOnBlur: false` å·²è®¾ç½®
- âœ… v102.1: `scene.launch()` å·²ä½¿ç”¨
- âœ… v102.2: gameKey æ”¹å˜é€»è¾‘å·²ç§»é™¤
- âœ… v102.3: localStorage å¿«å–å·²æ”¯æŒ
- âœ… v102.4: vocabUpdateTrigger æœºåˆ¶å·²å®ç°
- âœ… Handler: `setupVisibilityHandling()` å·²å®ç°

### å¯èƒ½çš„å·®å¼‚åŸå› 

#### 1. **iframe æ²™ç®±é™åˆ¶**
ç”Ÿäº§ç¯å¢ƒçš„ iframe æ²™ç®±è®¾ç½®å¯èƒ½å¯¼è‡´ï¼š
- localStorage è®¿é—®å—é™
- è·¨åŸŸ API è°ƒç”¨å—é™
- äº‹ä»¶ç›‘å¬å—é™

#### 2. **æµè§ˆå™¨ç¼“å­˜ç­–ç•¥**
- æœ¬åœ°ç¯å¢ƒ: å¼€å‘è€…å·¥å…·ç¦ç”¨ç¼“å­˜
- ç”Ÿäº§ç¯å¢ƒ: æµè§ˆå™¨å¯ç”¨ç¼“å­˜ï¼Œå¯èƒ½å¯¼è‡´æ—§ç‰ˆæœ¬ä»£ç è¢«åŠ è½½

#### 3. **CDN ç¼“å­˜**
Vercel çš„ CDN å¯èƒ½ç¼“å­˜äº†æ—§ç‰ˆæœ¬çš„ JavaScript æ–‡ä»¶

#### 4. **æ„å»ºå·®å¼‚**
- æœ¬åœ°ç¯å¢ƒ: `npm run dev` (å¼€å‘æ„å»º)
- ç”Ÿäº§ç¯å¢ƒ: `npm run build` (ç”Ÿäº§æ„å»º)

å¯èƒ½çš„å·®å¼‚ï¼š
- ä»£ç å‹ç¼©å’Œæ··æ·†
- ç¯å¢ƒå˜é‡æ³¨å…¥
- æºæ˜ å°„å·®å¼‚

#### 5. **API å“åº”å·®å¼‚**
- æœ¬åœ°ç¯å¢ƒ: æœ¬åœ° API æœåŠ¡å™¨
- ç”Ÿäº§ç¯å¢ƒ: ç”Ÿäº§ API æœåŠ¡å™¨

å¯èƒ½å¯¼è‡´ï¼š
- customVocabulary åŠ è½½æ—¶é—´ä¸åŒ
- vocabUpdateTrigger è§¦å‘æ—¶æœºä¸åŒ
- iframe src æ”¹å˜æ—¶æœºä¸åŒ

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆç”¨æˆ·ä¾§ï¼‰
1. æ‰“å¼€ç”Ÿäº§ç¯å¢ƒé“¾æ¥
2. æŒ‰ `Ctrl+Shift+Delete` æ‰“å¼€æ¸…é™¤æµè§ˆå™¨æ•°æ®
3. æ¸…é™¤æ‰€æœ‰ç¼“å­˜
4. é‡æ–°åŠ è½½é¡µé¢

### æ–¹æ¡ˆ 2: æ¸…é™¤ Vercel ç¼“å­˜ï¼ˆå¼€å‘è€…ä¾§ï¼‰
1. è®¿é—® Vercel æ§åˆ¶é¢æ¿
2. è¿›å…¥ EduCreate é¡¹ç›®
3. ç‚¹å‡» Settings â†’ Storage
4. æ¸…é™¤æ‰€æœ‰ç¼“å­˜
5. é‡æ–°éƒ¨ç½²

### æ–¹æ¡ˆ 3: å¼ºåˆ¶é‡æ–°éƒ¨ç½²
```bash
cd C:\Users\Administrator\Desktop\EduCreate
git push origin master --force
```

### æ–¹æ¡ˆ 4: æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒçš„ iframe src
åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼š
1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. è¿›å…¥ Console æ ‡ç­¾
3. è¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ iframe srcï¼š
```javascript
document.querySelector('iframe').src
```

4. æ£€æŸ¥æ˜¯å¦åŒ…å« `vocabUpdateTrigger` å‚æ•°
5. ç¼©å°åˆ°å·¥ä½œåˆ—åï¼Œå†æ¬¡æ£€æŸ¥ src æ˜¯å¦æ”¹å˜

### æ–¹æ¡ˆ 5: æ£€æŸ¥ localStorage
åœ¨ç”Ÿäº§ç¯å¢ƒçš„ iframe ä¸­ï¼š
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. è¿›å…¥ Console æ ‡ç­¾
3. è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
```javascript
localStorage.getItem('gameCustomVocabulary')
```

4. æ£€æŸ¥æ˜¯å¦èƒ½è®¿é—® localStorage

## ğŸ“Š è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1: éªŒè¯ä»£ç ç‰ˆæœ¬
```bash
# æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒæ˜¯å¦çœŸçš„éƒ¨ç½²äº† 52620f7
# åœ¨ç”Ÿäº§ç¯å¢ƒçš„ Console ä¸­æŸ¥çœ‹æ—¥å¿—
# åº”è¯¥çœ‹åˆ° "ğŸ”„ [v102.4] customVocabulary å·²æ”¹è®Š"
```

### æ­¥éª¤ 2: ç›‘æ§ iframe src å˜åŒ–
åœ¨ç”Ÿäº§ç¯å¢ƒçš„ Console ä¸­è¿è¡Œï¼š
```javascript
const iframe = document.querySelector('iframe');
const originalSrc = iframe.src;

// ç›‘å¬ src å˜åŒ–
const observer = new MutationObserver(() => {
  if (iframe.src !== originalSrc) {
    console.log('ğŸ”„ iframe src å·²æ”¹è®Š:', iframe.src);
    originalSrc = iframe.src;
  }
});

observer.observe(iframe, { attributes: true, attributeFilter: ['src'] });
```

### æ­¥éª¤ 3: æ£€æŸ¥ vocabUpdateTrigger
åœ¨ç”Ÿäº§ç¯å¢ƒçš„ Console ä¸­æŸ¥çœ‹ï¼š
```javascript
// æŸ¥çœ‹ URL ä¸­çš„ vocabUpdateTrigger å‚æ•°
const url = new URL(document.querySelector('iframe').src);
console.log('vocabUpdateTrigger:', url.searchParams.get('vocabUpdateTrigger'));
```

## ğŸ¯ é¢„æœŸç»“æœ

### æœ¬åœ°ç¯å¢ƒï¼ˆæ­£å¸¸ï¼‰
```
1. åŠ è½½é¡µé¢ â†’ iframe src: ...&vocabUpdateTrigger=1
2. ç¼©å°åˆ°å·¥ä½œåˆ— â†’ iframe src ä¸å˜
3. å›åˆ°é¡µé¢ â†’ iframe src ä¸å˜
4. æ¸¸æˆç»§ç»­è¿è¡Œï¼Œå¡ç‰‡é¡ºåºå’Œå·²é…å¯¹çŠ¶æ€ä¿æŒ
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆé—®é¢˜ï¼‰
```
1. åŠ è½½é¡µé¢ â†’ iframe src: ...&vocabUpdateTrigger=1
2. ç¼©å°åˆ°å·¥ä½œåˆ— â†’ iframe src æ”¹å˜ä¸º ...&vocabUpdateTrigger=2
3. å›åˆ°é¡µé¢ â†’ iframe é‡æ–°åŠ è½½ï¼Œæ¸¸æˆé‡æ–°åˆå§‹åŒ–
4. æ˜¾ç¤ºã€Œè½½å…¥è¯æ±‡ä¸­â€¦ã€ï¼Œå¡ç‰‡è¢«é‡æ–°æ´—ç‰Œ
```

## ğŸ“ ä¸‹ä¸€æ­¥

1. åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œè¯Šæ–­æ­¥éª¤
2. æ”¶é›† Console æ—¥å¿—
3. æ£€æŸ¥ iframe src æ˜¯å¦åœ¨ç¼©å°åˆ°å·¥ä½œåˆ—æ—¶æ”¹å˜
4. å¦‚æœæ”¹å˜ï¼Œè¯´æ˜ vocabUpdateTrigger è¢«æ„å¤–è§¦å‘
5. æ‰¾å‡ºè§¦å‘åŸå› å¹¶ä¿®å¤

---

**çŠ¶æ€**: ğŸ” éœ€è¦è¿›ä¸€æ­¥è¯Šæ–­
**æ—¥æœŸ**: 2025-11-08

