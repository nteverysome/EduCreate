<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸Šä¸‹å®¹å™¨é–“è·æ§åˆ¶å‡½æ•¸å¯è¦–åŒ–</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .visualization-box {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .visualization-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .bug-fix-banner {
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E72 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .formula-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .formula-box {
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .formula-wrong {
            background: #FFE5E5;
            border: 2px solid #FF6B6B;
        }

        .formula-correct {
            background: #E5F5E5;
            border: 2px solid #4CAF50;
        }

        .formula-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .formula-wrong .formula-title {
            color: #FF6B6B;
        }

        .formula-correct .formula-title {
            color: #4CAF50;
        }

        .screen {
            width: 100%;
            height: 600px;
            background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
            border: 3px solid #333;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .timer-area {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: #FFD700;
            border-bottom: 2px solid #FFA500;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #333;
            z-index: 10;
        }

        .timer-gap {
            position: absolute;
            top: 50px;
            left: 0;
            right: 0;
            height: 20px;
            background: #f5f5f5;
            border-bottom: 1px dashed #999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            color: #666;
        }

        .top-margin {
            position: absolute;
            top: 70px;
            left: 0;
            right: 0;
            height: 90px;
            background: #E8F4F8;
            border-bottom: 1px dashed #999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            color: #666;
        }

        .top-container {
            position: absolute;
            top: 160px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            height: 100px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 3px solid #333;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            z-index: 5;
        }

        .vertical-spacing {
            position: absolute;
            top: 260px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            height: 2px;
            background: #FF4444;
            border: 1px solid #FF0000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
        }

        .spacing-label {
            position: absolute;
            top: 265px;
            left: 50%;
            transform: translateX(-50%);
            background: #FF4444;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 1em;
            font-weight: bold;
            white-space: nowrap;
            z-index: 4;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
        }

        .bottom-container {
            position: absolute;
            top: 270px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            height: 100px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: 3px solid #333;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            z-index: 5;
            flex-direction: column;
            gap: 8px;
        }

        .bottom-button-area {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: #FFF9E6;
            border-top: 2px solid #FFD700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            color: #666;
            z-index: 1;
        }

        .answer-cards-wrapper {
            position: absolute;
            top: 370px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 15px;
            z-index: 4;
            flex-wrap: wrap;
        }

        .answer-card-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .answer-empty-box {
            width: 50px;
            height: 50px;
            border: 2px solid #333;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.5em;
            color: #999;
            border-radius: 4px;
        }

        .answer-image-box {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7em;
            font-weight: bold;
        }

        .answer-text-box {
            font-size: 0.55em;
            font-weight: bold;
            color: #333;
            text-align: center;
            max-width: 50px;
            word-break: break-word;
        }

        .controls {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-label {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .control-value {
            color: #667eea;
            font-size: 1.1em;
            font-weight: bold;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .function-list {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .function-item {
            background: #f9f9f9;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
        }

        .function-name {
            font-weight: bold;
            color: #667eea;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .function-desc {
            color: #666;
            font-size: 0.95em;
            margin-bottom: 8px;
        }

        .function-code {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            color: #333;
            overflow-x: auto;
        }

        .highlight {
            background: #FFFF00;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .answer-card-visualization {
            background: #f9f9f9;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .answer-card-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .answer-card-demo {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 40px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .answer-card-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .answer-card-label {
            font-weight: bold;
            color: #333;
            font-size: 0.95em;
        }

        .empty-box {
            width: 120px;
            height: 120px;
            border: 3px solid #333;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            color: #999;
        }

        .answer-image {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8em;
        }

        .answer-text {
            font-size: 0.9em;
            font-weight: bold;
            color: #333;
            text-align: center;
            max-width: 120px;
        }

        .answer-card-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .answer-control-group {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .answer-control-label {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            font-size: 0.95em;
        }

        .answer-control-value {
            color: #667eea;
            font-weight: bold;
            margin-left: 10px;
        }

        .answer-control-slider {
            width: 100%;
            margin-top: 8px;
        }

        .answer-control-info {
            font-size: 0.8em;
            color: #666;
            margin-top: 8px;
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .answer-card-demo {
                flex-direction: column;
                gap: 20px;
            }

            .answer-card-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® ä¸Šä¸‹å®¹å™¨é–“è·æ§åˆ¶å‡½æ•¸å¯è¦–åŒ–</h1>

        <div class="bug-fix-banner">
            ğŸ› v58.0 Bug ä¿®å¾©ï¼šç§»é™¤å¤šé¤˜çš„ cardHeight / 2ï¼Œä½¿å¾— verticalSpacing = 0 æ™‚å®¹å™¨å®Œå…¨è²¼åœ¨ä¸€èµ·ï¼
        </div>

        <div class="formula-comparison">
            <div class="formula-box formula-wrong">
                <div class="formula-title">âŒ ä¿®æ”¹å‰ï¼ˆéŒ¯èª¤ï¼‰</div>
                <div>bottomY = topY + cardHeight + verticalSpacing + <span style="background: #FF6B6B; color: white; padding: 2px 4px; border-radius: 3px;">cardHeight / 2</span></div>
                <div style="margin-top: 10px; font-size: 0.85em; color: #666;">
                  ç•¶ verticalSpacing = 0 æ™‚ï¼š<br>
                  é–“è· = 113px âŒ
                </div>
            </div>
            <div class="formula-box formula-correct">
                <div class="formula-title">âœ… ä¿®æ”¹å¾Œï¼ˆæ­£ç¢ºï¼‰</div>
                <div>bottomY = topY + cardHeight + verticalSpacing</div>
                <div style="margin-top: 10px; font-size: 0.85em; color: #666;">
                  ç•¶ verticalSpacing = 0 æ™‚ï¼š<br>
                  é–“è· = 0px âœ…
                </div>
            </div>
        </div>

        <div class="main-grid">
            <!-- å·¦å´ï¼šå¯è¦–åŒ– -->
            <div class="visualization-box">
                <div class="visualization-title">ğŸ“Š å¯¦æ™‚å¯è¦–åŒ–ï¼ˆå·²ä¿®å¾©ï¼‰</div>
                <div class="screen">
                    <div class="timer-area">â±ï¸ è¨ˆæ™‚å™¨ (50px)</div>
                    <div class="timer-gap">è¨ˆæ™‚å™¨é–“è· (20px)</div>
                    <div class="top-margin">é¡å¤–ä¸Šæ–¹é‚Šè· (90px)</div>
                    <div class="top-container">ğŸ”µ ä¸Šæ–¹å®¹å™¨ (è‹±æ–‡å¡ç‰‡)</div>
                    <div class="vertical-spacing"></div>
                    <div class="spacing-label" id="spacingLabel">2.2px (1%)</div>
                    <div class="bottom-container">ğŸ”´ ä¸‹æ–¹å®¹å™¨ (ç©ºç™½æ¡†)</div>
                    <div class="answer-cards-wrapper" id="answerCardsContainer"></div>
                    <div class="bottom-button-area">æäº¤æŒ‰éˆ•å€åŸŸ (80px)</div>
                </div>
            </div>

            <!-- å³å´ï¼šæ§åˆ¶é¢æ¿ -->
            <div class="visualization-box">
                <div class="visualization-title">ğŸ›ï¸ æ§åˆ¶é¢æ¿</div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span>å‚ç›´é–“è·æ¯”ä¾‹ (verticalSpacingRatio)</span>
                        <span class="control-value" id="ratioValue">0.01 (1%)</span>
                    </div>
                    <input type="range" id="ratioSlider" min="0" max="0.05" step="0.001" value="0.01">
                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                        ğŸ“ ä½ç½®: L2551 | ç•¶å‰å€¼: 0.01 | ç¯„åœ: 0 - 0.05
                    </div>
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span>åº•éƒ¨æŒ‰éˆ•å€åŸŸ (bottomButtonArea)</span>
                        <span class="control-value" id="bottomValue">80px</span>
                    </div>
                    <input type="range" id="bottomSlider" min="40" max="120" step="5" value="80">
                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                        ğŸ“ ä½ç½®: L2533 | ç•¶å‰å€¼: 80px | ç¯„åœ: 40 - 120px
                    </div>
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span>é¡å¤–ä¸Šæ–¹é‚Šè· (additionalTopMargin)</span>
                        <span class="control-value" id="topMarginValue">90px</span>
                    </div>
                    <input type="range" id="topMarginSlider" min="50" max="150" step="5" value="90">
                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                        ğŸ“ ä½ç½®: L2531 | ç•¶å‰å€¼: 90px | ç¯„åœ: 50 - 150px
                    </div>
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span>å¡ç‰‡é«˜åº¦ (cardHeight) - å‹•æ…‹è¨ˆç®—</span>
                        <span class="control-value" id="cardHeightValue">226px</span>
                    </div>
                    <div style="font-size: 0.85em; color: #666; margin-top: 5px; background: #E8F5E9; padding: 10px; border-radius: 5px; border-left: 4px solid #4CAF50;">
                        ğŸ”¥ [v61.0] å‹•æ…‹è­˜åˆ¥å®¹å™¨å¤§å°<br>
                        ğŸ“ ä½ç½®: L2570 | è‡ªå‹•è¨ˆç®— | æ ¹æ“šå…¶ä»–åƒæ•¸å‹•æ…‹èª¿æ•´<br>
                        <span style="color: #2E7D32; font-weight: bold;">å…¬å¼: cardHeight = (600 - 50 - 20 - topMargin - bottomButtonArea - answerCardsHeight) / 2</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç­”æ¡ˆå¡ç‰‡ä½ç½®å¯è¦–åŒ– -->
        <div class="answer-card-visualization">
            <div class="answer-card-title">ğŸ¨ v60.0 ç­”æ¡ˆå¡ç‰‡ä½ç½®å¯è¦–åŒ–ï¼ˆæ–‡å­—åœ¨ç©ºç™½æ¡†ä¸‹æ–¹ï¼‰</div>

            <div class="answer-card-demo">
                <div class="answer-card-container">
                    <div class="answer-card-label">ä¿®æ”¹å‰ (v33.0) - æ°´å¹³æ’åˆ—</div>
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <div class="empty-box">ç©ºç™½æ¡†</div>
                        <div style="display: flex; flex-direction: column; gap: 8px; align-items: center;">
                            <div class="answer-image">åœ–ç‰‡</div>
                            <div class="answer-text">æ–‡å­—</div>
                        </div>
                    </div>
                </div>

                <div class="answer-card-container">
                    <div class="answer-card-label">ä¿®æ”¹å¾Œ (v60.0) - å‚ç›´æ’åˆ— âœ…</div>
                    <div style="display: flex; flex-direction: column; gap: 15px; align-items: center;">
                        <div class="empty-box">ç©ºç™½æ¡†</div>
                        <div class="answer-image">åœ–ç‰‡</div>
                        <div class="answer-text">æ–‡å­—</div>
                    </div>
                </div>
            </div>

            <div class="answer-card-controls">
                <div class="answer-control-group">
                    <div class="answer-control-label">
                        åœ–ç‰‡èˆ‡æ¡†çš„é–“è· (imagePadding)
                        <span class="answer-control-value" id="imagePaddingValue">10px</span>
                    </div>
                    <input type="range" class="answer-control-slider" id="imagePaddingSlider" min="5" max="30" step="1" value="10">
                    <div class="answer-control-info">
                        ğŸ“ ä½ç½®: L9295 | ç•¶å‰å€¼: 10px | ç¯„åœ: 5 - 30px
                    </div>
                </div>

                <div class="answer-control-group">
                    <div class="answer-control-label">
                        æ–‡å­—èˆ‡åœ–ç‰‡çš„é–“è· (textPadding)
                        <span class="answer-control-value" id="textPaddingValue">8px</span>
                    </div>
                    <input type="range" class="answer-control-slider" id="textPaddingSlider" min="3" max="20" step="1" value="8">
                    <div class="answer-control-info">
                        ğŸ“ ä½ç½®: L9296 | ç•¶å‰å€¼: 8px | ç¯„åœ: 3 - 20px
                    </div>
                </div>

                <div class="answer-control-group">
                    <div class="answer-control-label">
                        åœ–ç‰‡å¤§å° (imageSize)
                        <span class="answer-control-value" id="imageSizeValue">90%</span>
                    </div>
                    <input type="range" class="answer-control-slider" id="imageSizeSlider" min="60" max="120" step="5" value="90">
                    <div class="answer-control-info">
                        ğŸ“ ä½ç½®: L9294 | ç•¶å‰å€¼: 90% | ç¯„åœ: 60% - 120%
                    </div>
                </div>

                <div class="answer-control-group">
                    <div class="answer-control-label">
                        å­—é«”å¤§å° (fontSize)
                        <span class="answer-control-value" id="fontSizeValue">16-28px</span>
                    </div>
                    <input type="range" class="answer-control-slider" id="fontSizeSlider" min="12" max="36" step="2" value="20">
                    <div class="answer-control-info">
                        ğŸ“ ä½ç½®: L9325 | ç•¶å‰å€¼: 16-28px | ç¯„åœ: 12-36px
                    </div>
                </div>
            </div>

            <div style="background: #E5F5E5; padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #4CAF50;">
                <div style="font-weight: bold; color: #2E7D32; margin-bottom: 8px;">âœ… v60.0 ä¿®æ”¹èªªæ˜</div>
                <div style="font-size: 0.9em; color: #333; line-height: 1.6;">
                    <strong>ä¿®æ”¹å‡½æ•¸</strong>: createOutsideAnswerCard() (L9291-9342)<br>
                    <strong>ä¿®æ”¹å…§å®¹</strong>: å°‡ç­”æ¡ˆå¡ç‰‡çš„æ–‡å­—ä½ç½®å¾åœ–ç‰‡å³é‚Šæ”¹ç‚ºåœ–ç‰‡ä¸‹æ–¹<br>
                    <strong>ä½ˆå±€æ–¹å‘</strong>: å¾æ°´å¹³æ’åˆ—æ”¹ç‚ºå‚ç›´æ’åˆ—<br>
                    <strong>æ–‡å­—å°é½</strong>: å¾å·¦å°é½æ”¹ç‚ºæ°´å¹³å±…ä¸­<br>
                    <strong>æ•ˆæœ</strong>: ä¸Šä¸‹åˆ†é›¢æ™‚ï¼Œæ–‡å­—åœ¨ç©ºç™½æ¡†ä¸‹æ–¹ï¼Œæ›´ç¬¦åˆè¦–è¦ºç¿’æ…£
                </div>
            </div>
        </div>

        <!-- å‡½æ•¸èªªæ˜ -->
        <div class="function-list">
            <div class="visualization-title">ğŸ“š æ§åˆ¶ä¸Šä¸‹å®¹å™¨é–“è·çš„å‡½æ•¸</div>

            <div class="function-item">
                <div class="function-name">1ï¸âƒ£ createTopBottomSingleRow() - ä¸Šä¸‹å–®è¡Œä½ˆå±€</div>
                <div class="function-desc">ä½ç½®: L2523 | ç”¨é€”: 7 å€‹åŒ¹é…æ•¸çš„ä¸Šä¸‹å–®è¡Œä½ˆå±€ | ç‰ˆæœ¬: v58.0ï¼ˆå·²ä¿®å¾©ï¼‰</div>
                <div class="function-code">
const <span class="highlight">verticalSpacingRatio</span> = 0.01;  // ğŸ”¥ æ§åˆ¶é–“è·çš„é—œéµåƒæ•¸<br>
const <span class="highlight">verticalSpacing</span> = cardHeight * verticalSpacingRatio;<br>
const topY = topButtonArea + cardHeight / 2;<br>
<span style="background: #FFE5E5; padding: 2px 4px; border-radius: 3px;">âŒ ä¿®æ”¹å‰: const bottomY = topY + cardHeight + verticalSpacing + cardHeight / 2;</span><br>
<span style="background: #E5F5E5; padding: 2px 4px; border-radius: 3px;">âœ… ä¿®æ”¹å¾Œ: const bottomY = topY + cardHeight + <span class="highlight">verticalSpacing</span>;</span>
                </div>
            </div>

            <div class="function-item">
                <div class="function-name">2ï¸âƒ£ createTopBottomTwoRows() - ä¸Šä¸‹é›™è¡Œä½ˆå±€</div>
                <div class="function-desc">ä½ç½®: L2265 | ç”¨é€”: 8-14 å€‹åŒ¹é…æ•¸çš„ä¸Šä¸‹é›™è¡Œä½ˆå±€</div>
                <div class="function-code">
const topAreaStartY = height * 0.12;  // ä¸Šæ–¹å€åŸŸ<br>
const <span class="highlight">bottomAreaStartY</span> = height * 0.55;  // ğŸ”¥ æ§åˆ¶ä¸Šä¸‹å®¹å™¨è·é›¢<br>
// é–“è· = bottomAreaStartY - topAreaStartY - topAreaHeight
                </div>
            </div>

            <div class="function-item">
                <div class="function-name">3ï¸âƒ£ calculateAvailableHeight() - è¨ˆç®—å¯ç”¨é«˜åº¦</div>
                <div class="function-desc">ä½ç½®: L759-761, L2534 | ç”¨é€”: è¨ˆç®—æ‰£é™¤æŒ‰éˆ•å€åŸŸå¾Œçš„å¯ç”¨é«˜åº¦</div>
                <div class="function-code">
const <span class="highlight">topButtonArea</span> = 160;  // è¨ˆæ™‚å™¨ + é–“è· + é‚Šè·<br>
const <span class="highlight">bottomButtonArea</span> = 80;  // æäº¤æŒ‰éˆ•å€åŸŸ<br>
const availableHeight = height - topButtonArea - bottomButtonArea;
                </div>
            </div>

            <div class="function-item">
                <div class="function-name">4ï¸âƒ£ é–“è·è¨ˆç®—å…¬å¼ï¼ˆv58.0 å·²ä¿®å¾©ï¼‰</div>
                <div class="function-desc">ä¸Šä¸‹å®¹å™¨ä¹‹é–“çš„å¯¦éš›é–“è·è¨ˆç®—</div>
                <div class="function-code">
<span style="color: #FF6B6B; font-weight: bold;">âŒ ä¿®æ”¹å‰ï¼ˆéŒ¯èª¤ï¼‰:</span><br>
bottomY = topY + cardHeight + verticalSpacing + <span style="background: #FF6B6B; color: white; padding: 2px 4px;">cardHeight / 2</span><br>
é–“è· = 113px (ç•¶ verticalSpacing = 0)<br>
<br>
<span style="color: #4CAF50; font-weight: bold;">âœ… ä¿®æ”¹å¾Œï¼ˆæ­£ç¢ºï¼‰:</span><br>
bottomY = topY + cardHeight + <span class="highlight">verticalSpacing</span><br>
é–“è· = 0px (ç•¶ verticalSpacing = 0) âœ…
                </div>
            </div>

            <div class="function-item">
                <div class="function-name">ğŸ“Š ä¿®å¾©å‰å¾Œå°æ¯”è¡¨</div>
                <div class="function-desc">v58.0 Bug ä¿®å¾©çš„å…·é«”æ”¹é€²</div>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 0.9em;">
                        <tr style="background: #f0f0f0;">
                            <th style="border: 1px solid #ddd; padding: 8px;">verticalSpacingRatio</th>
                            <th style="border: 1px solid #ddd; padding: 8px; background: #FFE5E5;">ä¿®æ”¹å‰</th>
                            <th style="border: 1px solid #ddd; padding: 8px; background: #E5F5E5;">ä¿®æ”¹å¾Œ</th>
                            <th style="border: 1px solid #ddd; padding: 8px;">æ”¹é€²</th>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 8px;">0</td>
                            <td style="border: 1px solid #ddd; padding: 8px; background: #FFE5E5;">113px âŒ</td>
                            <td style="border: 1px solid #ddd; padding: 8px; background: #E5F5E5;">0px âœ…</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">-113px</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 8px;">0.01</td>
                            <td style="border: 1px solid #ddd; padding: 8px; background: #FFE5E5;">115.26px</td>
                            <td style="border: 1px solid #ddd; padding: 8px; background: #E5F5E5;">2.26px âœ…</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">-113px</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 8px;">0.02</td>
                            <td style="border: 1px solid #ddd; padding: 8px; background: #FFE5E5;">117.52px</td>
                            <td style="border: 1px solid #ddd; padding: 8px; background: #E5F5E5;">4.52px âœ…</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">-113px</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 8px;">0.05</td>
                            <td style="border: 1px solid #ddd; padding: 8px; background: #FFE5E5;">125.3px</td>
                            <td style="border: 1px solid #ddd; padding: 8px; background: #E5F5E5;">11.3px âœ…</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">-113px</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ä¸Šä¸‹å®¹å™¨é–“è·æ§åˆ¶
        const ratioSlider = document.getElementById('ratioSlider');
        const bottomSlider = document.getElementById('bottomSlider');
        const topMarginSlider = document.getElementById('topMarginSlider');
        const cardHeightSlider = document.getElementById('cardHeightSlider');

        const ratioValue = document.getElementById('ratioValue');
        const bottomValue = document.getElementById('bottomValue');
        const topMarginValue = document.getElementById('topMarginValue');
        const cardHeightValue = document.getElementById('cardHeightValue');
        const spacingLabel = document.getElementById('spacingLabel');

        // ç­”æ¡ˆå¡ç‰‡ä½ç½®æ§åˆ¶
        const imagePaddingSlider = document.getElementById('imagePaddingSlider');
        const textPaddingSlider = document.getElementById('textPaddingSlider');
        const imageSizeSlider = document.getElementById('imageSizeSlider');
        const fontSizeSlider = document.getElementById('fontSizeSlider');

        const imagePaddingValue = document.getElementById('imagePaddingValue');
        const textPaddingValue = document.getElementById('textPaddingValue');
        const imageSizeValue = document.getElementById('imageSizeValue');
        const fontSizeValue = document.getElementById('fontSizeValue');

        const topContainer = document.querySelector('.top-container');
        const bottomContainer = document.querySelector('.bottom-container');
        const verticalSpacing = document.querySelector('.vertical-spacing');
        const topMargin = document.querySelector('.top-margin');
        const bottomButtonArea = document.querySelector('.bottom-button-area');
        const answerCardsContainer = document.getElementById('answerCardsContainer');

        function calculateDynamicCardHeight(topMargin, bottomButtonArea, imagePadding, textPadding, imageSize) {
            // å±å¹•ç¸½é«˜åº¦
            const screenHeight = 600;

            // å›ºå®šå€åŸŸé«˜åº¦
            const timerHeight = 50;
            const timerGap = 20;

            // ç­”æ¡ˆå¡ç‰‡å€åŸŸé«˜åº¦ï¼ˆä¼°è¨ˆå€¼ï¼‰
            // åœ–ç‰‡é«˜åº¦ + imagePadding + textPadding + æ–‡å­—é«˜åº¦
            const estimatedImageHeight = 50 * (imageSize / 100);  // å‡è¨­åŸºç¤é«˜åº¦ 50px
            const estimatedTextHeight = 20;
            const answerCardsHeight = estimatedImageHeight + imagePadding + textPadding + estimatedTextHeight + 10;  // +10 ç‚ºé–“è·

            // å¯ç”¨é«˜åº¦ = å±å¹•é«˜åº¦ - å›ºå®šå€åŸŸ - é‚Šè· - æŒ‰éˆ•å€åŸŸ - ç­”æ¡ˆå¡ç‰‡å€åŸŸ
            const availableHeight = screenHeight - timerHeight - timerGap - topMargin - bottomButtonArea - answerCardsHeight;

            // å¡ç‰‡é«˜åº¦ = å¯ç”¨é«˜åº¦ / 2ï¼ˆä¸Šä¸‹å„ä¸€å€‹å®¹å™¨ï¼‰
            const dynamicCardHeight = Math.max(80, Math.floor(availableHeight / 2));

            return dynamicCardHeight;
        }

        function updateVisualization() {
            const ratio = parseFloat(ratioSlider.value);
            const bottom = parseInt(bottomSlider.value);
            const topMargin = parseInt(topMarginSlider.value);
            const imagePadding = parseInt(imagePaddingSlider.value);
            const textPadding = parseInt(textPaddingSlider.value);
            const imageSize = parseInt(imageSizeSlider.value);

            // ğŸ”¥ å‹•æ…‹è¨ˆç®—å¡ç‰‡é«˜åº¦
            const cardHeight = calculateDynamicCardHeight(topMargin, bottom, imagePadding, textPadding, imageSize);

            // æ›´æ–°æ¨™ç±¤
            ratioValue.textContent = `${ratio.toFixed(3)} (${(ratio * 100).toFixed(1)}%)`;
            bottomValue.textContent = `${bottom}px`;
            topMarginValue.textContent = `${topMargin}px`;
            cardHeightValue.textContent = `${cardHeight}px`;

            // è¨ˆç®—é–“è· - é€™æ˜¯ä¸Šä¸‹å®¹å™¨ä¸­é–“çš„ç©ºé–“
            const spacing = cardHeight * ratio;

            // æ›´æ–°æ¨™ç±¤ - é¡¯ç¤ºè¨ˆç®—å…¬å¼
            if (spacing === 0) {
                spacingLabel.textContent = `0px (ç„¡é–“è·)`;
            } else {
                spacingLabel.textContent = `${spacing.toFixed(1)}px = ${cardHeight}px Ã— ${ratio.toFixed(3)}`;
            }

            // æ›´æ–°è¦–è¦ºä½ç½® - ä½¿ç”¨ä¿®å¾©å¾Œçš„æ­£ç¢ºå…¬å¼
            const topButtonArea = 50 + 20 + topMargin;  // timer + gap + margin
            const topY = topButtonArea + cardHeight / 2;

            // ğŸ”¥ [v58.0] ä¿®å¾©å¾Œçš„æ­£ç¢ºå…¬å¼ï¼ˆç§»é™¤ + cardHeight / 2ï¼‰
            const bottomY = topY + cardHeight + spacing;

            // è¨ˆç®—ä¿®æ”¹å‰çš„éŒ¯èª¤å…¬å¼ï¼ˆç”¨æ–¼å°æ¯”ï¼‰
            const bottomY_wrong = topY + cardHeight + spacing + cardHeight / 2;
            const spacing_wrong = bottomY_wrong - topY - cardHeight;

            topContainer.style.top = (topButtonArea) + 'px';
            topContainer.style.height = cardHeight + 'px';

            verticalSpacing.style.top = (topY + cardHeight / 2) + 'px';
            verticalSpacing.style.height = Math.max(1, spacing) + 'px';  // æœ€å°‘ 1px ä»¥ä¾¿çœ‹è¦‹

            spacingLabel.style.top = (topY + cardHeight / 2 + Math.max(1, spacing) / 2 - 15) + 'px';

            bottomContainer.style.top = (topY + cardHeight + spacing) + 'px';
            bottomContainer.style.height = cardHeight + 'px';

            bottomButtonArea.style.height = bottom + 'px';

            topMargin.style.height = topMargin + 'px';

            // æ§åˆ¶å°è¼¸å‡º - é¡¯ç¤ºä¿®å¾©å‰å¾Œçš„å°æ¯”
            console.log('ğŸ“Š [v61.0] ä¸Šä¸‹å®¹å™¨é–“è·è¨ˆç®—ï¼ˆå‹•æ…‹å¡ç‰‡é«˜åº¦ï¼‰:', {
                verticalSpacingRatio: ratio,
                cardHeight_dynamic: cardHeight,
                verticalSpacing: spacing.toFixed(2),
                topY: topY.toFixed(0),
                bottomY_correct: bottomY.toFixed(0),
                spacing_correct: spacing.toFixed(2),
                formula_dynamic: `cardHeight = (600 - 50 - 20 - ${topMargin} - ${bottom} - answerCardsHeight) / 2 = ${cardHeight}px`,
                formula_correct: `bottomY = topY + cardHeight + verticalSpacing = ${topY.toFixed(0)} + ${cardHeight.toFixed(0)} + ${spacing.toFixed(2)}`,
                note: 'å¡ç‰‡é«˜åº¦ç¾åœ¨æ ¹æ“šå®¹å™¨å¤§å°å‹•æ…‹è¨ˆç®—ï¼Œç‚ºåœ–ç‰‡å’Œæ–‡å­—ç•™å‡ºç©ºé–“'
            });
        }

        function generateAnswerCards() {
            // æ¸…ç©ºå®¹å™¨
            answerCardsContainer.innerHTML = '';

            // ç”Ÿæˆ 3 å€‹ç¤ºä¾‹ç­”æ¡ˆå¡ç‰‡
            const sampleAnswers = [
                { text: 'Answer 1', emoji: 'ğŸ“' },
                { text: 'Answer 2', emoji: 'ğŸ“š' },
                { text: 'Answer 3', emoji: 'âœï¸' }
            ];

            sampleAnswers.forEach((answer, index) => {
                const cardItem = document.createElement('div');
                cardItem.className = 'answer-card-item';

                const emptyBox = document.createElement('div');
                emptyBox.className = 'answer-empty-box';
                emptyBox.textContent = 'ç©ºç™½æ¡†';

                const imageBox = document.createElement('div');
                imageBox.className = 'answer-image-box';
                imageBox.textContent = answer.emoji;

                const textBox = document.createElement('div');
                textBox.className = 'answer-text-box';
                textBox.textContent = answer.text;

                cardItem.appendChild(emptyBox);
                cardItem.appendChild(imageBox);
                cardItem.appendChild(textBox);

                answerCardsContainer.appendChild(cardItem);
            });
        }

        function updateAnswerCardVisualization() {
            const imagePadding = parseInt(imagePaddingSlider.value);
            const textPadding = parseInt(textPaddingSlider.value);
            const imageSize = parseInt(imageSizeSlider.value);
            const fontSize = parseInt(fontSizeSlider.value);

            // æ›´æ–°æ¨™ç±¤
            imagePaddingValue.textContent = `${imagePadding}px`;
            textPaddingValue.textContent = `${textPadding}px`;
            imageSizeValue.textContent = `${imageSize}%`;
            fontSizeValue.textContent = `${Math.max(12, Math.min(36, fontSize))}px`;

            // æ›´æ–°ç­”æ¡ˆå¡ç‰‡çš„æ¨£å¼
            const answerImageBoxes = document.querySelectorAll('.answer-image-box');
            const answerTextBoxes = document.querySelectorAll('.answer-text-box');

            answerImageBoxes.forEach(box => {
                box.style.width = `${imageSize * 0.5}px`;
                box.style.height = `${imageSize * 0.5}px`;
                box.style.marginTop = `${imagePadding}px`;
            });

            answerTextBoxes.forEach(box => {
                box.style.marginTop = `${textPadding}px`;
                box.style.fontSize = `${Math.max(0.5, fontSize / 20)}em`;
            });

            // æ§åˆ¶å°è¼¸å‡º
            console.log('ğŸ¨ [v60.0] ç­”æ¡ˆå¡ç‰‡ä½ç½®èª¿æ•´:', {
                imagePadding: `${imagePadding}px`,
                textPadding: `${textPadding}px`,
                imageSize: `${imageSize}%`,
                fontSize: `${fontSize}px`,
                formula: `imageY = boxBottomEdge + ${imagePadding}px + imageSize/2`,
                textFormula: `textY = imageY + imageSize/2 + ${textPadding}px`,
                description: 'æ–‡å­—åœ¨ç©ºç™½æ¡†ä¸‹æ–¹ï¼Œåœ–ç‰‡åœ¨æ–‡å­—ä¸Šæ–¹'
            });
        }

        ratioSlider.addEventListener('input', updateVisualization);
        bottomSlider.addEventListener('input', updateVisualization);
        topMarginSlider.addEventListener('input', updateVisualization);

        // ğŸ”¥ [v61.0] ç­”æ¡ˆå¡ç‰‡åƒæ•¸ä¹Ÿæœƒå½±éŸ¿å¡ç‰‡é«˜åº¦ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦æ›´æ–°å¯è¦–åŒ–
        imagePaddingSlider.addEventListener('input', () => {
            updateVisualization();
            updateAnswerCardVisualization();
        });
        textPaddingSlider.addEventListener('input', () => {
            updateVisualization();
            updateAnswerCardVisualization();
        });
        imageSizeSlider.addEventListener('input', () => {
            updateVisualization();
            updateAnswerCardVisualization();
        });
        fontSizeSlider.addEventListener('input', updateAnswerCardVisualization);

        // åˆå§‹åŒ–
        generateAnswerCards();
        updateVisualization();
        updateAnswerCardVisualization();
    </script>
</body>
</html>

