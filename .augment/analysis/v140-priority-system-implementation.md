# Match-Up Game v140.0 - 優先級系統實施文檔

## 🎯 功能概述

實現了一個**優先級系統**，用於決定英文卡片中顯示的內容。

### 優先級順序
1. **優先級 1**：有文字 → **一定顯示文字**
2. **優先級 2**：沒有文字但有圖片 → **顯示圖片**
3. **優先級 3**：沒有文字和圖片但有語音 → **顯示語音**

---

## 📊 內容組合對應表

### 優先級 1：有文字的所有情況

| 文字 | 圖片 | 語音 | 佈局 | 顯示內容 |
|------|------|------|------|---------|
| ✅ | ✅ | ✅ | A | 文字 + 圖片 + 語音 |
| ✅ | ✅ | ❌ | D | 文字 + 圖片 |
| ✅ | ❌ | ✅ | E | 文字 + 語音 |
| ✅ | ❌ | ❌ | C | 只有文字 |

### 優先級 2：沒有文字但有圖片的情況

| 文字 | 圖片 | 語音 | 佈局 | 顯示內容 |
|------|------|------|------|---------|
| ❌ | ✅ | ✅ | A | 圖片 + 語音 |
| ❌ | ✅ | ❌ | F | 只有圖片 |

### 優先級 3：沒有文字和圖片但有語音的情況

| 文字 | 圖片 | 語音 | 佈局 | 顯示內容 |
|------|------|------|------|---------|
| ❌ | ❌ | ✅ | B | 只有語音 |

### 都沒有的情況

| 文字 | 圖片 | 語音 | 佈局 | 顯示內容 |
|------|------|------|------|---------|
| ❌ | ❌ | ❌ | - | 只顯示背景 |

---

## 🔧 代碼實施

### 修改位置
- 文件：`public/games/match-up-game/scenes/game.js`
- 函數：`createLeftCard()`
- 行號：3780-3837

### 核心邏輯

```javascript
// 優先級 1：有文字 → 一定顯示文字
if (hasText) {
    if (hasImage && hasAudio) {
        // 佈局 A：文字 + 圖片 + 語音
    } else if (hasImage && !hasAudio) {
        // 佈局 D：文字 + 圖片
    } else if (!hasImage && hasAudio) {
        // 佈局 E：文字 + 語音
    } else {
        // 佈局 C：只有文字
    }
}
// 優先級 2：沒有文字但有圖片 → 顯示圖片
else if (hasImage) {
    if (hasAudio) {
        // 佈局 A：圖片 + 語音
    } else {
        // 佈局 F：只有圖片
    }
}
// 優先級 3：沒有文字和圖片但有語音 → 顯示語音
else if (hasAudio) {
    // 佈局 B：只有語音
}
// 都沒有：只顯示背景
else {
    // 只顯示背景
}
```

---

## 📝 日誌輸出

系統會輸出詳細的日誌，幫助調試：

```
📊 [v140.0] 優先級系統 [1]:
  優先級1_有文字: true
  優先級2_有圖片: true
  優先級3_有語音: true
✅ [v140.0] 優先級 1 - 顯示文字 [1]
  └─ 佈局 A：文字 + 圖片 + 語音
```

---

## 🧪 測試場景

### 場景 1：有文字 + 圖片 + 語音
- **預期**：顯示文字（優先級 1）
- **佈局**：A（文字 + 圖片 + 語音）
- **驗證**：文字應該顯示在卡片上

### 場景 2：有文字 + 圖片（無語音）
- **預期**：顯示文字（優先級 1）
- **佈局**：D（文字 + 圖片）
- **驗證**：文字應該顯示在卡片上

### 場景 3：有文字（無圖片、無語音）
- **預期**：顯示文字（優先級 1）
- **佈局**：C（只有文字）
- **驗證**：文字應該顯示在卡片上

### 場景 4：無文字 + 圖片 + 語音
- **預期**：顯示圖片（優先級 2）
- **佈局**：A（圖片 + 語音）
- **驗證**：圖片應該顯示，文字不顯示

### 場景 5：無文字 + 圖片（無語音）
- **預期**：顯示圖片（優先級 2）
- **佈局**：F（只有圖片）
- **驗證**：圖片應該顯示，文字不顯示

### 場景 6：無文字 + 無圖片 + 語音
- **預期**：顯示語音（優先級 3）
- **佈局**：B（只有語音）
- **驗證**：語音按鈕應該顯示

### 場景 7：無文字 + 無圖片 + 無語音
- **預期**：只顯示背景
- **佈局**：無
- **驗證**：只有白色背景框

---

## ✅ 驗收標準

- ✅ 有文字時，一定顯示文字
- ✅ 沒有文字但有圖片時，顯示圖片
- ✅ 沒有文字和圖片但有語音時，顯示語音
- ✅ 日誌正確記錄優先級選擇
- ✅ 所有佈局（A-F）正常工作

---

## 🚀 下一步

1. **測試**：在所有場景下測試優先級系統
2. **驗證**：確認日誌輸出正確
3. **優化**：根據測試結果進行調整
4. **文檔**：更新用戶文檔

---

## 📌 版本信息

- **版本**：v140.0
- **修改日期**：2025-11-10
- **修改文件**：`public/games/match-up-game/scenes/game.js`
- **修改行數**：3780-3837
- **修改類型**：邏輯重構

