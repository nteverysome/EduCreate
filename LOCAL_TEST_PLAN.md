# 🧪 EduCreate 本地測試計劃

## 📋 測試目標
驗證編輯器創建功能和模板切換是否正常工作

## ✅ 靜態代碼分析結果

### 1. 模板映射完整性 ✅
**檢查項目**: 8個模板的ID、名稱、類型映射
**結果**: 完全匹配

| 模板ID | 主頁名稱 | 編輯器名稱 | 類型 | 圖標 | 狀態 |
|--------|----------|------------|------|------|------|
| 1 | 配對遊戲 | 配對遊戲 | matching | 🎯 | ✅ |
| 2 | 問答遊戲 | 問答遊戲 | quiz | ❓ | ✅ |
| 3 | 單字遊戲 | 單字遊戲 | flashcards | 📚 | ✅ |
| 4 | 隨機輪盤 | 隨機輪盤 | wheel | 🎡 | ✅ |
| 5 | 迷宮遊戲 | 迷宮遊戲 | maze | 🌟 | ✅ |
| 6 | 排序遊戲 | 排序遊戲 | sorting | 🔢 | ✅ |
| 7 | 記憶遊戲 | 記憶遊戲 | memory | 🧠 | ✅ |
| 8 | 填字遊戲 | 填字遊戲 | crossword | ✏️ | ✅ |

### 2. 路由鏈接正確性 ✅
**主頁鏈接格式**: `/editor/create?template=${template.id}`
**編輯器路由**: `pages/editor/create.tsx` ✅ 已創建
**參數處理**: `router.query.template` ✅ 正確解析

### 3. API 集成完整性 ✅
**端點**: `/api/activities` ✅ 存在
**方法**: POST ✅ 支持
**認證**: getSession ✅ 正確實現
**數據結構**: 
```typescript
{
  title: string,
  description: string,
  type: string,
  templateId: string,
  status: 'draft'
}
```

### 4. 用戶認證流程 ✅
**未登錄處理**: 自動重定向到 `/login?callbackUrl=...`
**已登錄處理**: 正常顯示創建表單
**加載狀態**: 適當的加載指示器

### 5. 錯誤處理機制 ✅
**API 錯誤**: try-catch 包裝，顯示錯誤信息
**表單驗證**: 標題必填驗證
**網絡錯誤**: 適當的錯誤反饋

## 🧪 本地測試步驟

### 前置條件
1. 確保端口 3000 沒有被佔用
2. 確保數據庫連接正常
3. 確保所有依賴已安裝

### 測試步驟

#### 步驟 1: 啟動開發服務器
```bash
# 清理端口
taskkill /f /im node.exe
netstat -ano | findstr :3000

# 啟動服務器
npm run dev
```

#### 步驟 2: 測試主頁模板顯示
1. 訪問 `http://localhost:3000`
2. 確認顯示 8 個模板卡片
3. 檢查每個模板的圖標和描述

#### 步驟 3: 測試未登錄用戶流程
1. 確保未登錄狀態
2. 點擊任意模板的"開始創建"按鈕
3. 預期: 重定向到登錄頁面，URL 包含 callbackUrl

#### 步驟 4: 測試已登錄用戶流程
1. 登錄用戶賬號
2. 點擊"配對遊戲"的"開始創建"按鈕
3. 預期: 跳轉到 `/editor/create?template=1`
4. 確認頁面顯示:
   - 模板信息 (🎯 配對遊戲)
   - 活動標題輸入框
   - 活動描述輸入框
   - "創建活動"按鈕

#### 步驟 5: 測試活動創建
1. 填寫活動標題: "測試配對遊戲"
2. 填寫活動描述: "這是一個測試活動"
3. 點擊"創建活動"按鈕
4. 預期: 
   - 顯示"活動創建成功！"提示
   - 重定向到編輯器頁面

#### 步驟 6: 測試所有模板
重複步驟 4-5，測試所有 8 個模板:
- 配對遊戲 (template=1)
- 問答遊戲 (template=2)
- 單字遊戲 (template=3)
- 隨機輪盤 (template=4)
- 迷宮遊戲 (template=5)
- 排序遊戲 (template=6)
- 記憶遊戲 (template=7)
- 填字遊戲 (template=8)

## 🔍 驗證檢查點

### 功能檢查點
- [ ] 主頁正確顯示 8 個模板
- [ ] 未登錄用戶正確重定向
- [ ] 已登錄用戶可以訪問創建頁面
- [ ] 模板信息正確顯示
- [ ] 表單驗證正常工作
- [ ] API 調用成功
- [ ] 活動創建成功
- [ ] 重定向到編輯器正常

### 技術檢查點
- [ ] 無 JavaScript 錯誤
- [ ] 無 TypeScript 編譯錯誤
- [ ] 無 API 錯誤
- [ ] 數據庫操作正常
- [ ] 路由解析正確

## 🚨 已知問題和解決方案

### 問題 1: 本地開發服務器啟動失敗
**症狀**: npm run dev 無響應或端口衝突
**解決方案**:
```bash
# 方案 1: 清理 Node.js 進程
taskkill /f /im node.exe

# 方案 2: 使用不同端口
npx next dev -p 3001

# 方案 3: 重啟電腦清理所有進程
```

### 問題 2: TypeScript 編譯錯誤
**症狀**: 類型錯誤或模塊解析失敗
**解決方案**:
```bash
# 檢查 TypeScript 錯誤
npx tsc --noEmit

# 重新生成類型
npx prisma generate
```

### 問題 3: 數據庫連接問題
**症狀**: API 調用返回 500 錯誤
**解決方案**:
```bash
# 檢查數據庫連接
npx prisma db push
npx prisma generate
```

## 📊 測試結果記錄

### 測試環境
- **操作系統**: Windows
- **Node.js 版本**: [待填寫]
- **瀏覽器**: [待填寫]
- **測試時間**: [待填寫]

### 測試結果
| 測試項目 | 狀態 | 備註 |
|----------|------|------|
| 服務器啟動 | [ ] | |
| 主頁顯示 | [ ] | |
| 模板 1 (配對遊戲) | [ ] | |
| 模板 2 (問答遊戲) | [ ] | |
| 模板 3 (單字遊戲) | [ ] | |
| 模板 4 (隨機輪盤) | [ ] | |
| 模板 5 (迷宮遊戲) | [ ] | |
| 模板 6 (排序遊戲) | [ ] | |
| 模板 7 (記憶遊戲) | [ ] | |
| 模板 8 (填字遊戲) | [ ] | |
| 用戶認證 | [ ] | |
| API 調用 | [ ] | |
| 錯誤處理 | [ ] | |

## 🎯 成功標準
- 所有 8 個模板都能正常創建活動
- 用戶認證流程順暢
- 無 JavaScript 或 API 錯誤
- 創建的活動能正確保存到數據庫
- 重定向到編輯器頁面正常

---

**測試負責人**: [用戶]
**預計測試時間**: 30-45 分鐘
**最後更新**: 2025-06-28
